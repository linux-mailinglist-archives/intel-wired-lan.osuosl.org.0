Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id CDDBD29D011
	for <lists+intel-wired-lan@lfdr.de>; Wed, 28 Oct 2020 14:35:47 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id 857C886A87;
	Wed, 28 Oct 2020 13:35:46 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Wy9wNg91onTc; Wed, 28 Oct 2020 13:35:46 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by whitealder.osuosl.org (Postfix) with ESMTP id 88DEE86A92;
	Wed, 28 Oct 2020 13:35:42 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from hemlock.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by ash.osuosl.org (Postfix) with ESMTP id 0993E1BF857
 for <intel-wired-lan@lists.osuosl.org>; Wed, 28 Oct 2020 13:35:41 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by hemlock.osuosl.org (Postfix) with ESMTP id F1271873E9
 for <intel-wired-lan@lists.osuosl.org>; Wed, 28 Oct 2020 13:35:40 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from hemlock.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id uwoEJJKelksv for <intel-wired-lan@lists.osuosl.org>;
 Wed, 28 Oct 2020 13:35:39 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pf1-f193.google.com (mail-pf1-f193.google.com
 [209.85.210.193])
 by hemlock.osuosl.org (Postfix) with ESMTPS id 90F0D873E1
 for <intel-wired-lan@lists.osuosl.org>; Wed, 28 Oct 2020 13:35:39 +0000 (UTC)
Received: by mail-pf1-f193.google.com with SMTP id 126so2945978pfu.4
 for <intel-wired-lan@lists.osuosl.org>; Wed, 28 Oct 2020 06:35:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=sqsN722ssb+yJiDbsT28nLzbB0jvmz4/+1jmYycos9s=;
 b=jllmkngjeH0ITVZX0ppk4FLiUJa/QLhGrx4t40SXgyj35xlIxOxxNiiHBnuISZyHPH
 fZCMuyqiPoConmFas95ZyV2wUNQj62wynryoAnuPpXGR8HFfhz2wGprXh3blfGx8q/Qu
 U/D7XQ4n4swnfN+0xl4hLAqQ3GTfxnXOtwv9ASV8DCMp5LIs7qmnwtER0DuqYEM+QaQ8
 b5fda0H4Wr5DcNiBQPK3TGdg9RkBvHA48+vTXmNVTMUkcMq9JZdCInvmTZc7Zd+suyFu
 Se4ftntO2XKVLFt+bZ2u2voWzflP3ObzvZqFObwAJiZAcQt+filaJaPsLX8oDeKwgODo
 c1Jg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=sqsN722ssb+yJiDbsT28nLzbB0jvmz4/+1jmYycos9s=;
 b=s3EkMtQclsHZMptNLiuRzsJ1TGkI4PmZpRyJ3nvzr2FVaWD2A/NNKnkkOQzJH9+gV3
 zxioBscrf4D+WENE3AqgXHg3ZKprKg27muX4mHn1vzo9loTcj7+DUNMKwo+QyJaQR50p
 drjc9YVx5H92AXmhXsOi1sqEaqm/nDrfaRfE+pTA3ZAkADC63lIxVpJ/C6BTVgHGiWyn
 6jNYX7tHaleGZZ6Uzceid/CUdfkeUxu50G633yagPiNAtbcaTiRli5fN23rEoHZEmubf
 ErFEa8Rw+7t7XZC6x3ArjRN//5+fP7qQaOEOZuVS2Uoy4spcaPxZflzUOjy67gAc+kPm
 h3cw==
X-Gm-Message-State: AOAM532RnPbSjeAmvLlu/07rxOFODf+PIeYygurw3uEGsHcWEE3eaiLz
 5ZcHw6YtQ8+eUX/ZKdV6gMI+P53C5Q7KkACR
X-Google-Smtp-Source: ABdhPJwu5YC2c6TAcUXj2ofNJUwXTX0HC4+qPGQ5Im0p0vaf/TekcrX1Lm37LtaH9cf6ZJdY6lQIew==
X-Received: by 2002:a63:4383:: with SMTP id q125mr6591975pga.30.1603892139093; 
 Wed, 28 Oct 2020 06:35:39 -0700 (PDT)
Received: from btopel-mobl.ger.intel.com ([192.55.55.43])
 by smtp.gmail.com with ESMTPSA id q14sm5935393pjp.43.2020.10.28.06.35.33
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 28 Oct 2020 06:35:38 -0700 (PDT)
From: =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@gmail.com>
To: netdev@vger.kernel.org,
	bpf@vger.kernel.org
Date: Wed, 28 Oct 2020 14:34:34 +0100
Message-Id: <20201028133437.212503-7-bjorn.topel@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201028133437.212503-1-bjorn.topel@gmail.com>
References: <20201028133437.212503-1-bjorn.topel@gmail.com>
MIME-Version: 1.0
Subject: [Intel-wired-lan] [RFC PATCH bpf-next 6/9] xsk: propagate napi_id
 to XDP socket Rx path
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: daniel@iogearbox.net, jonathan.lemon@gmail.com, ast@kernel.org,
 edumazet@google.com, intel-wired-lan@lists.osuosl.org, qi.z.zhang@intel.com,
 kuba@kernel.org, =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 magnus.karlsson@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RnJvbTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgoKQWRkIG5hcGlfaWQg
dG8gdGhlIHhkcF9yeHFfaW5mbyBzdHJ1Y3R1cmUsIGFuZCBtYWtlIHN1cmUgdGhlIFhEUApzb2Nr
ZXQgcGljayB1cCB0aGUgbmFwaV9pZCBpbiB0aGUgUnggcGF0aC4gVGhlIG5hcGlfaWQgaXMgdXNl
ZCB0byBmaW5kCnRoZSBjb3JyZXNwb25kaW5nIE5BUEkgc3RydWN0dXJlIGZvciBzb2NrZXQgYnVz
eSBwb2xsaW5nLgoKVE9ETzogT25seSB2ZXJpZmllZCBieSBmb3IgdGhlIEludGVsIGRyaXZlcnMu
IEknbGwgcmVhY2ggb3V0IHRvIHRoZQogICAgICBkcml2ZXIgYXV0aG9ycyBmb3IgYSBwb3RlbnRp
YWwgbm9uLVJGQyB2ZXJzaW9uLgoKU2lnbmVkLW9mZi1ieTogQmrDtnJuIFTDtnBlbCA8Ympvcm4u
dG9wZWxAaW50ZWwuY29tPgotLS0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5h
X25ldGRldi5jICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9ibnh0L2Ju
eHQuYyAgICAgfCAgMiArLQogLi4uL2V0aGVybmV0L2Nhdml1bS90aHVuZGVyL25pY3ZmX3F1ZXVl
cy5jICAgIHwgIDIgKy0KIC4uLi9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0
aC5jICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pNDBlL2k0MGVfdHhyeC5j
ICAgfCAgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV9iYXNlLmMgICAg
IHwgIDQgKystLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMgICAg
IHwgIDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4Z2JlL2l4Z2JlX21haW4uYyB8
ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jICAgICAgICAgfCAg
MiArLQogLi4uL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4uYyAgIHwgIDQg
KystLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NC9lbl9yeC5jICAgIHwgIDIg
Ky0KIC4uLi9ldGhlcm5ldC9uZXRyb25vbWUvbmZwL25mcF9uZXRfY29tbW9uLmMgICB8ICAyICst
CiBkcml2ZXJzL25ldC9ldGhlcm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4uYyAgfCAgMiArLQog
ZHJpdmVycy9uZXQvZXRoZXJuZXQvc2ZjL3J4X2NvbW1vbi5jICAgICAgICAgIHwgIDIgKy0KIGRy
aXZlcnMvbmV0L2V0aGVybmV0L3NvY2lvbmV4dC9uZXRzZWMuYyAgICAgICB8ICAyICstCiBkcml2
ZXJzL25ldC9ldGhlcm5ldC90aS9jcHN3X3ByaXYuYyAgICAgICAgICAgfCAgMiArLQogZHJpdmVy
cy9uZXQvaHlwZXJ2L25ldHZzYy5jICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMv
bmV0L3R1bi5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL25l
dC92ZXRoLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9uZXQv
dmlydGlvX25ldC5jICAgICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L3hl
bi1uZXRmcm9udC5jICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBpbmNsdWRlL25ldC9idXN5
X3BvbGwuaCAgICAgICAgICAgICAgICAgICAgICAgfCAxOSArKysrKysrKysrKysrKystLS0tCiBp
bmNsdWRlL25ldC94ZHAuaCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5l
dC9jb3JlL2Rldi5jICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBuZXQv
Y29yZS94ZHAuYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5ldC94
ZHAveHNrLmMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsKIDI2IGZpbGVz
IGNoYW5nZWQsIDQ0IGluc2VydGlvbnMoKyksIDMwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYW1hem9uL2VuYS9lbmFfbmV0ZGV2LmMKaW5kZXggZTgxMzFkYWRjMjJjLi42
YWQ1OWYwMDY4ZjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEv
ZW5hX25ldGRldi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25l
dGRldi5jCkBAIC00MTYsNyArNDE2LDcgQEAgc3RhdGljIGludCBlbmFfeGRwX3JlZ2lzdGVyX3J4
cV9pbmZvKHN0cnVjdCBlbmFfcmluZyAqcnhfcmluZykKIHsKIAlpbnQgcmM7CiAKLQlyYyA9IHhk
cF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIHJ4X3JpbmctPm5ldGRldiwgcnhfcmlu
Zy0+cWlkKTsKKwlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIHJ4X3Jp
bmctPm5ldGRldiwgcnhfcmluZy0+cWlkLCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIo
cnhfcmluZy0+YWRhcHRlciwgaWZ1cCwgcnhfcmluZy0+bmV0ZGV2LApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC9icm9hZGNvbS9ibnh0L2JueHQuYwppbmRleCBmYTE0Nzg2NWUzM2YuLjVkZjEzMzg3YWI3
NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMK
KysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMKQEAgLTI4OTQs
NyArMjg5NCw3IEBAIHN0YXRpYyBpbnQgYm54dF9hbGxvY19yeF9yaW5ncyhzdHJ1Y3QgYm54dCAq
YnApCiAJCWlmIChyYykKIAkJCXJldHVybiByYzsKIAotCQlyYyA9IHhkcF9yeHFfaW5mb19yZWco
JnJ4ci0+eGRwX3J4cSwgYnAtPmRldiwgaSk7CisJCXJjID0geGRwX3J4cV9pbmZvX3JlZygmcnhy
LT54ZHBfcnhxLCBicC0+ZGV2LCBpLCAwKTsKIAkJaWYgKHJjIDwgMCkKIAkJCXJldHVybiByYzsK
IApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvbmljdmZf
cXVldWVzLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vdGh1bmRlci9uaWN2Zl9xdWV1
ZXMuYwppbmRleCA3YTE0MWNlMzJlODYuLmY3ODJlNmFmNDVlOSAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMKQEAgLTc3MCw3ICs3
NzAsNyBAQCBzdGF0aWMgdm9pZCBuaWN2Zl9yY3ZfcXVldWVfY29uZmlnKHN0cnVjdCBuaWN2ZiAq
bmljLCBzdHJ1Y3QgcXVldWVfc2V0ICpxcywKIAlycS0+Y2FjaGluZyA9IDE7CiAKIAkvKiBEcml2
ZXIgaGF2ZSBubyBwcm9wZXIgZXJyb3IgcGF0aCBmb3IgZmFpbGVkIFhEUCBSWC1xdWV1ZSBpbmZv
IHJlZyAqLwotCVdBUk5fT04oeGRwX3J4cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEsIG5pYy0+bmV0
ZGV2LCBxaWR4KSA8IDApOworCVdBUk5fT04oeGRwX3J4cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEs
IG5pYy0+bmV0ZGV2LCBxaWR4LCAwKSA8IDApOwogCiAJLyogU2VuZCBhIG1haWxib3ggbXNnIHRv
IFBGIHRvIGNvbmZpZyBSUSAqLwogCW1ieC5ycS5tc2cgPSBOSUNfTUJPWF9NU0dfUlFfQ0ZHOwpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0
aC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jCmlu
ZGV4IGNmOTQwMGE5ODg2ZC4uNDA5NTM5ODBlODQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9mcmVlc2NhbGUvZHBhYTIvZHBhYTItZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jCkBAIC0zMzM0LDcgKzMzMzQsNyBAQCBz
dGF0aWMgaW50IGRwYWEyX2V0aF9zZXR1cF9yeF9mbG93KHN0cnVjdCBkcGFhMl9ldGhfcHJpdiAq
cHJpdiwKIAkJcmV0dXJuIDA7CiAKIAllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZmcS0+Y2hhbm5l
bC0+eGRwX3J4cSwgcHJpdi0+bmV0X2RldiwKLQkJCSAgICAgICBmcS0+Zmxvd2lkKTsKKwkJCSAg
ICAgICBmcS0+Zmxvd2lkLCAwKTsKIAlpZiAoZXJyKSB7CiAJCWRldl9lcnIoZGV2LCAieGRwX3J4
cV9pbmZvX3JlZyBmYWlsZWRcbiIpOwogCQlyZXR1cm4gZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQwZS9pNDBlX3R4cnguYyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2ludGVsL2k0MGUvaTQwZV90eHJ4LmMKaW5kZXggZDQzY2UxM2E5M2M5Li5hM2Q1YmRhY2Ey
ZjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2k0MGUvaTQwZV90eHJ4
LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQwZS9pNDBlX3R4cnguYwpAQCAt
MTQzNiw3ICsxNDM2LDcgQEAgaW50IGk0MGVfc2V0dXBfcnhfZGVzY3JpcHRvcnMoc3RydWN0IGk0
MGVfcmluZyAqcnhfcmluZykKIAkvKiBYRFAgUlgtcXVldWUgaW5mbyBvbmx5IG5lZWRlZCBmb3Ig
UlggcmluZ3MgZXhwb3NlZCB0byBYRFAgKi8KIAlpZiAocnhfcmluZy0+dnNpLT50eXBlID09IEk0
MEVfVlNJX01BSU4pIHsKIAkJZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnhfcmluZy0+eGRwX3J4
cSwgcnhfcmluZy0+bmV0ZGV2LAotCQkJCSAgICAgICByeF9yaW5nLT5xdWV1ZV9pbmRleCk7CisJ
CQkJICAgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4LCByeF9yaW5nLT5xX3ZlY3Rvci0+bmFwaS5u
YXBpX2lkKTsKIAkJaWYgKGVyciA8IDApCiAJCQlyZXR1cm4gZXJyOwogCX0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV9iYXNlLmMKaW5kZXggZmU0MzIwZTJkMWYyLi4zMTI0YTNi
ZjUxOWEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFz
ZS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jCkBAIC0z
MDYsNyArMzA2LDcgQEAgaW50IGljZV9zZXR1cF9yeF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5n
KQogCQlpZiAoIXhkcF9yeHFfaW5mb19pc19yZWcoJnJpbmctPnhkcF9yeHEpKQogCQkJLyogY292
ZXJpdHlbY2hlY2tfcmV0dXJuXSAqLwogCQkJeGRwX3J4cV9pbmZvX3JlZygmcmluZy0+eGRwX3J4
cSwgcmluZy0+bmV0ZGV2LAotCQkJCQkgcmluZy0+cV9pbmRleCk7CisJCQkJCSByaW5nLT5xX2lu
ZGV4LCByaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAogCQlyaW5nLT54c2tfcG9vbCA9
IGljZV94c2tfcG9vbChyaW5nKTsKIAkJaWYgKHJpbmctPnhza19wb29sKSB7CkBAIC0zMzMsNyAr
MzMzLDcgQEAgaW50IGljZV9zZXR1cF9yeF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5nKQogCQkJ
CS8qIGNvdmVyaXR5W2NoZWNrX3JldHVybl0gKi8KIAkJCQl4ZHBfcnhxX2luZm9fcmVnKCZyaW5n
LT54ZHBfcnhxLAogCQkJCQkJIHJpbmctPm5ldGRldiwKLQkJCQkJCSByaW5nLT5xX2luZGV4KTsK
KwkJCQkJCSByaW5nLT5xX2luZGV4LCByaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAog
CQkJZXJyID0geGRwX3J4cV9pbmZvX3JlZ19tZW1fbW9kZWwoJnJpbmctPnhkcF9yeHEsCiAJCQkJ
CQkJIE1FTV9UWVBFX1BBR0VfU0hBUkVELApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pY2Uv
aWNlX3R4cnguYwppbmRleCBlYWU3NTI2MGZlMjAuLjc3ZDVlYWU2YjRjMiAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMKKysrIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMKQEAgLTQ4Myw3ICs0ODMsNyBAQCBpbnQg
aWNlX3NldHVwX3J4X3Jpbmcoc3RydWN0IGljZV9yaW5nICpyeF9yaW5nKQogCWlmIChyeF9yaW5n
LT52c2ktPnR5cGUgPT0gSUNFX1ZTSV9QRiAmJgogCSAgICAheGRwX3J4cV9pbmZvX2lzX3JlZygm
cnhfcmluZy0+eGRwX3J4cSkpCiAJCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBf
cnhxLCByeF9yaW5nLT5uZXRkZXYsCi0JCQkJICAgICByeF9yaW5nLT5xX2luZGV4KSkKKwkJCQkg
ICAgIHJ4X3JpbmctPnFfaW5kZXgsIHJ4X3JpbmctPnFfdmVjdG9yLT5uYXBpLm5hcGlfaWQpKQog
CQkJZ290byBlcnI7CiAJcmV0dXJuIDA7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L2ludGVsL2l4Z2JlL2l4Z2JlX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVs
L2l4Z2JlL2l4Z2JlX21haW4uYwppbmRleCA0NWFlMzNlMTUzMDMuLjUwZTZiOGI2YmE3YiAxMDA2
NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaXhnYmUvaXhnYmVfbWFpbi5jCisr
KyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4Z2JlL2l4Z2JlX21haW4uYwpAQCAtNjU3
Nyw3ICs2NTc3LDcgQEAgaW50IGl4Z2JlX3NldHVwX3J4X3Jlc291cmNlcyhzdHJ1Y3QgaXhnYmVf
YWRhcHRlciAqYWRhcHRlciwKIAogCS8qIFhEUCBSWC1xdWV1ZSBpbmZvICovCiAJaWYgKHhkcF9y
eHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIGFkYXB0ZXItPm5ldGRldiwKLQkJCSAgICAg
cnhfcmluZy0+cXVldWVfaW5kZXgpIDwgMCkKKwkJCSAgICAgcnhfcmluZy0+cXVldWVfaW5kZXgs
IHJ4X3JpbmctPnFfdmVjdG9yLT5uYXBpLm5hcGlfaWQpIDwgMCkKIAkJZ290byBlcnI7CiAKIAly
eF9yaW5nLT54ZHBfcHJvZyA9IGFkYXB0ZXItPnhkcF9wcm9nOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21h
cnZlbGwvbXZuZXRhLmMKaW5kZXggNTRiMGJmNTc0YzA1Li43ZDAwOThmNGVmOWQgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXZuZXRhLmMKKysrIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYwpAQCAtMzIxOSw3ICszMjE5LDcgQEAgc3RhdGlj
IGludCBtdm5ldGFfY3JlYXRlX3BhZ2VfcG9vbChzdHJ1Y3QgbXZuZXRhX3BvcnQgKnBwLAogCQly
ZXR1cm4gZXJyOwogCX0KIAotCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4cS0+eGRwX3J4cSwg
cHAtPmRldiwgcnhxLT5pZCk7CisJZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnhxLT54ZHBfcnhx
LCBwcC0+ZGV2LCByeHEtPmlkLCAwKTsKIAlpZiAoZXJyIDwgMCkKIAkJZ290byBlcnJfZnJlZV9w
cDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdnBwMi9tdnBw
Ml9tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4u
YwppbmRleCBmNjYxNmM4OTMzY2EuLmZmODcyOWI2YzQxNCAxMDA2NDQKLS0tIGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvbWFydmVsbC9tdnBwMi9tdnBwMl9tYWluLmMKKysrIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvbWFydmVsbC9tdnBwMi9tdnBwMl9tYWluLmMKQEAgLTI2MDYsMTEgKzI2MDYsMTEg
QEAgc3RhdGljIGludCBtdnBwMl9yeHFfaW5pdChzdHJ1Y3QgbXZwcDJfcG9ydCAqcG9ydCwKIAlt
dnBwMl9yeHFfc3RhdHVzX3VwZGF0ZShwb3J0LCByeHEtPmlkLCAwLCByeHEtPnNpemUpOwogCiAJ
aWYgKHByaXYtPnBlcmNwdV9wb29scykgewotCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZyeHEt
PnhkcF9yeHFfc2hvcnQsIHBvcnQtPmRldiwgcnhxLT5pZCk7CisJCWVyciA9IHhkcF9yeHFfaW5m
b19yZWcoJnJ4cS0+eGRwX3J4cV9zaG9ydCwgcG9ydC0+ZGV2LCByeHEtPmlkLCAwKTsKIAkJaWYg
KGVyciA8IDApCiAJCQlnb3RvIGVycl9mcmVlX2RtYTsKIAotCQllcnIgPSB4ZHBfcnhxX2luZm9f
cmVnKCZyeHEtPnhkcF9yeHFfbG9uZywgcG9ydC0+ZGV2LCByeHEtPmlkKTsKKwkJZXJyID0geGRw
X3J4cV9pbmZvX3JlZygmcnhxLT54ZHBfcnhxX2xvbmcsIHBvcnQtPmRldiwgcnhxLT5pZCwgMCk7
CiAJCWlmIChlcnIgPCAwKQogCQkJZ290byBlcnJfdW5yZWdpc3Rlcl9yeHFfc2hvcnQ7CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDQvZW5fcnguYyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDQvZW5fcnguYwppbmRleCA1MDJkMWI5Nzg1
NWMuLmY1NjE5NzllNTczMSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFu
b3gvbWx4NC9lbl9yeC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDQv
ZW5fcnguYwpAQCAtMjgzLDcgKzI4Myw3IEBAIGludCBtbHg0X2VuX2NyZWF0ZV9yeF9yaW5nKHN0
cnVjdCBtbHg0X2VuX3ByaXYgKnByaXYsCiAJcmluZy0+bG9nX3N0cmlkZSA9IGZmcyhyaW5nLT5z
dHJpZGUpIC0gMTsKIAlyaW5nLT5idWZfc2l6ZSA9IHJpbmctPnNpemUgKiByaW5nLT5zdHJpZGUg
KyBUWEJCX1NJWkU7CiAKLQlpZiAoeGRwX3J4cV9pbmZvX3JlZygmcmluZy0+eGRwX3J4cSwgcHJp
di0+ZGV2LCBxdWV1ZV9pbmRleCkgPCAwKQorCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyaW5nLT54
ZHBfcnhxLCBwcml2LT5kZXYsIHF1ZXVlX2luZGV4LCAwKSA8IDApCiAJCWdvdG8gZXJyX3Jpbmc7
CiAKIAl0bXAgPSBzaXplICogcm91bmR1cF9wb3dfb2ZfdHdvKE1MWDRfRU5fTUFYX1JYX0ZSQUdT
ICoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25l
dF9jb21tb24uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9j
b21tb24uYwppbmRleCBiMTUwZGE0M2FkYjIuLmI0YWNmMmY0MWU4NCAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbmV0cm9ub21lL25mcC9uZnBfbmV0X2NvbW1vbi5jCisrKyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9jb21tb24uYwpAQCAtMjUz
Myw3ICsyNTMzLDcgQEAgbmZwX25ldF9yeF9yaW5nX2FsbG9jKHN0cnVjdCBuZnBfbmV0X2RwICpk
cCwgc3RydWN0IG5mcF9uZXRfcnhfcmluZyAqcnhfcmluZykKIAogCWlmIChkcC0+bmV0ZGV2KSB7
CiAJCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIGRwLT5uZXRkZXYs
Ci0JCQkJICAgICAgIHJ4X3JpbmctPmlkeCk7CisJCQkJICAgICAgIHJ4X3JpbmctPmlkeCwgcnhf
cmluZy0+cl92ZWMtPm5hcGkubmFwaV9pZCk7CiAJCWlmIChlcnIgPCAwKQogCQkJcmV0dXJuIGVy
cjsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xbG9naWMvcWVkZS9xZWRl
X21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Fsb2dpYy9xZWRlL3FlZGVfbWFpbi5jCmlu
ZGV4IDA1ZTNhM2I2MDI2OS4uYjczZTk1MzI5YWNkIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9xbG9naWMvcWVkZS9xZWRlX21haW4uYwpAQCAtMTc2Miw3ICsxNzYyLDcgQEAgc3RhdGljIHZv
aWQgcWVkZV9pbml0X2ZwKHN0cnVjdCBxZWRlX2RldiAqZWRldikKIAogCQkJLyogRHJpdmVyIGhh
dmUgbm8gZXJyb3IgcGF0aCBmcm9tIGhlcmUgKi8KIAkJCVdBUk5fT04oeGRwX3J4cV9pbmZvX3Jl
ZygmZnAtPnJ4cS0+eGRwX3J4cSwgZWRldi0+bmRldiwKLQkJCQkJCSBmcC0+cnhxLT5yeHFfaWQp
IDwgMCk7CisJCQkJCQkgZnAtPnJ4cS0+cnhxX2lkLiAwKSA8IDApOwogCiAJCQlpZiAoeGRwX3J4
cV9pbmZvX3JlZ19tZW1fbW9kZWwoJmZwLT5yeHEtPnhkcF9yeHEsCiAJCQkJCQkgICAgICAgTUVN
X1RZUEVfUEFHRV9PUkRFUjAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMv
cnhfY29tbW9uLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29tbW9uLmMKaW5kZXgg
MTljZjdjYWMxZTZlLi42OGZjN2QzMTc2OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L3NmYy9yeF9jb21tb24uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29t
bW9uLmMKQEAgLTI2Miw3ICsyNjIsNyBAQCB2b2lkIGVmeF9pbml0X3J4X3F1ZXVlKHN0cnVjdCBl
ZnhfcnhfcXVldWUgKnJ4X3F1ZXVlKQogCiAJLyogSW5pdGlhbGlzZSBYRFAgcXVldWUgaW5mb3Jt
YXRpb24gKi8KIAlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3F1ZXVlLT54ZHBfcnhxX2luZm8s
IGVmeC0+bmV0X2RldiwKLQkJCSAgICAgIHJ4X3F1ZXVlLT5jb3JlX2luZGV4KTsKKwkJCSAgICAg
IHJ4X3F1ZXVlLT5jb3JlX2luZGV4LCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIoZWZ4
LCByeF9lcnIsIGVmeC0+bmV0X2RldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3NvY2lvbmV4dC9uZXRzZWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lvbmV4dC9uZXRz
ZWMuYwppbmRleCAxNTAzY2M5ZWM2ZTIuLjgwYWIyNDY1OGU4NyAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L25ldHNlYy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L3NvY2lvbmV4dC9uZXRzZWMuYwpAQCAtMTMwNCw3ICsxMzA0LDcgQEAgc3RhdGljIGludCBu
ZXRzZWNfc2V0dXBfcnhfZHJpbmcoc3RydWN0IG5ldHNlY19wcml2ICpwcml2KQogCQlnb3RvIGVy
cl9vdXQ7CiAJfQogCi0JZXJyID0geGRwX3J4cV9pbmZvX3JlZygmZHJpbmctPnhkcF9yeHEsIHBy
aXYtPm5kZXYsIDApOworCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJmRyaW5nLT54ZHBfcnhxLCBw
cml2LT5uZGV2LCAwLCAwKTsKIAlpZiAoZXJyKQogCQlnb3RvIGVycl9vdXQ7CiAKZGlmZiAtLWdp
dCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvdGkvY3Bzd19wcml2LmMKaW5kZXggNTFjYzI5ZjM5MDM4Li5kOGYyODdjODhkNzcgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCisrKyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCkBAIC0xMTg5LDcgKzExODksNyBAQCBzdGF0
aWMgaW50IGNwc3dfbmRldl9jcmVhdGVfeGRwX3J4cShzdHJ1Y3QgY3Bzd19wcml2ICpwcml2LCBp
bnQgY2gpCiAJcG9vbCA9IGNwc3ctPnBhZ2VfcG9vbFtjaF07CiAJcnhxID0gJnByaXYtPnhkcF9y
eHFbY2hdOwogCi0JcmV0ID0geGRwX3J4cV9pbmZvX3JlZyhyeHEsIHByaXYtPm5kZXYsIGNoKTsK
KwlyZXQgPSB4ZHBfcnhxX2luZm9fcmVnKHJ4cSwgcHJpdi0+bmRldiwgY2gsIDApOwogCWlmIChy
ZXQpCiAJCXJldHVybiByZXQ7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2
c2MuYyBiL2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYwppbmRleCAwYzNkZTk0YjUxNzguLmZh
ODM0MWY4MzU5YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvaHlwZXJ2L25ldHZzYy5jCisrKyBi
L2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYwpAQCAtMTQ5OSw3ICsxNDk5LDcgQEAgc3RydWN0
IG5ldHZzY19kZXZpY2UgKm5ldHZzY19kZXZpY2VfYWRkKHN0cnVjdCBodl9kZXZpY2UgKmRldmlj
ZSwKIAkJdTY0X3N0YXRzX2luaXQoJm52Y2hhbi0+dHhfc3RhdHMuc3luY3ApOwogCQl1NjRfc3Rh
dHNfaW5pdCgmbnZjaGFuLT5yeF9zdGF0cy5zeW5jcCk7CiAKLQkJcmV0ID0geGRwX3J4cV9pbmZv
X3JlZygmbnZjaGFuLT54ZHBfcnhxLCBuZGV2LCBpKTsKKwkJcmV0ID0geGRwX3J4cV9pbmZvX3Jl
ZygmbnZjaGFuLT54ZHBfcnhxLCBuZGV2LCBpLCAwKTsKIAogCQlpZiAocmV0KSB7CiAJCQluZXRk
ZXZfZXJyKG5kZXYsICJ4ZHBfcnhxX2luZm9fcmVnIGZhaWw6ICVkXG4iLCByZXQpOwpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvdHVuLmMgYi9kcml2ZXJzL25ldC90dW4uYwppbmRleCBiZTY5ZDI3
MjA1MmYuLmYyNTQxZDY0NTcwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvdHVuLmMKKysrIGIv
ZHJpdmVycy9uZXQvdHVuLmMKQEAgLTc5MSw3ICs3OTEsNyBAQCBzdGF0aWMgaW50IHR1bl9hdHRh
Y2goc3RydWN0IHR1bl9zdHJ1Y3QgKnR1biwgc3RydWN0IGZpbGUgKmZpbGUsCiAJfSBlbHNlIHsK
IAkJLyogU2V0dXAgWERQIFJYLXF1ZXVlIGluZm8sIGZvciBuZXcgdGZpbGUgZ2V0dGluZyBhdHRh
Y2hlZCAqLwogCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZ0ZmlsZS0+eGRwX3J4cSwKLQkJCQkg
ICAgICAgdHVuLT5kZXYsIHRmaWxlLT5xdWV1ZV9pbmRleCk7CisJCQkJICAgICAgIHR1bi0+ZGV2
LCB0ZmlsZS0+cXVldWVfaW5kZXgsIDApOwogCQlpZiAoZXJyIDwgMCkKIAkJCWdvdG8gb3V0Owog
CQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnX21lbV9tb2RlbCgmdGZpbGUtPnhkcF9yeHEsCmRpZmYg
LS1naXQgYS9kcml2ZXJzL25ldC92ZXRoLmMgYi9kcml2ZXJzL25ldC92ZXRoLmMKaW5kZXggOGM3
Mzc2NjgwMDhhLi4wNGQyMGU5ZDg0MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L3ZldGguYwor
KysgYi9kcml2ZXJzL25ldC92ZXRoLmMKQEAgLTkyNiw3ICs5MjYsNyBAQCBzdGF0aWMgaW50IHZl
dGhfZW5hYmxlX3hkcChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQogCQlmb3IgKGkgPSAwOyBpIDwg
ZGV2LT5yZWFsX251bV9yeF9xdWV1ZXM7IGkrKykgewogCQkJc3RydWN0IHZldGhfcnEgKnJxID0g
JnByaXYtPnJxW2ldOwogCi0JCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwg
ZGV2LCBpKTsKKwkJCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJxLT54ZHBfcnhxLCBkZXYsIGks
IDApOwogCQkJaWYgKGVyciA8IDApCiAJCQkJZ290byBlcnJfcnhxX3JlZzsKIApkaWZmIC0tZ2l0
IGEvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jCmlu
ZGV4IDIxYjcxMTQ4YzUzMi4uZDcxZmU0MTU5NWI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC92
aXJ0aW9fbmV0LmMKKysrIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jCkBAIC0xNDg1LDcgKzE0
ODUsNyBAQCBzdGF0aWMgaW50IHZpcnRuZXRfb3BlbihzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQog
CQkJaWYgKCF0cnlfZmlsbF9yZWN2KHZpLCAmdmktPnJxW2ldLCBHRlBfS0VSTkVMKSkKIAkJCQlz
Y2hlZHVsZV9kZWxheWVkX3dvcmsoJnZpLT5yZWZpbGwsIDApOwogCi0JCWVyciA9IHhkcF9yeHFf
aW5mb19yZWcoJnZpLT5ycVtpXS54ZHBfcnhxLCBkZXYsIGkpOworCQllcnIgPSB4ZHBfcnhxX2lu
Zm9fcmVnKCZ2aS0+cnFbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJ
CQlyZXR1cm4gZXJyOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYyBi
L2RyaXZlcnMvbmV0L3hlbi1uZXRmcm9udC5jCmluZGV4IDNlOTg5NWJlYzE1Zi4uMjg3MTRhNDhm
NWQwIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYworKysgYi9kcml2ZXJz
L25ldC94ZW4tbmV0ZnJvbnQuYwpAQCAtMjAxNCw3ICsyMDE0LDcgQEAgc3RhdGljIGludCB4ZW5u
ZXRfY3JlYXRlX3BhZ2VfcG9vbChzdHJ1Y3QgbmV0ZnJvbnRfcXVldWUgKnF1ZXVlKQogCX0KIAog
CWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnF1ZXVlLT54ZHBfcnhxLCBxdWV1ZS0+aW5mby0+bmV0
ZGV2LAotCQkJICAgICAgIHF1ZXVlLT5pZCk7CisJCQkgICAgICAgcXVldWUtPmlkLCAwKTsKIAlp
ZiAoZXJyKSB7CiAJCW5ldGRldl9lcnIocXVldWUtPmluZm8tPm5ldGRldiwgInhkcF9yeHFfaW5m
b19yZWcgZmFpbGVkXG4iKTsKIAkJZ290byBlcnJfZnJlZV9wcDsKZGlmZiAtLWdpdCBhL2luY2x1
ZGUvbmV0L2J1c3lfcG9sbC5oIGIvaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmgKaW5kZXggYzZjNDEz
ZDM4MjRkLi4yNjJmNjAwNjUzNTUgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5o
CisrKyBiL2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5oCkBAIC0xNDgsMTQgKzE0OCwyNSBAQCBzdGF0
aWMgaW5saW5lIHZvaWQgc2tfbWFya19uYXBpX2lkKHN0cnVjdCBzb2NrICpzaywgY29uc3Qgc3Ry
dWN0IHNrX2J1ZmYgKnNrYikKIAlza19yeF9xdWV1ZV9zZXQoc2ssIHNrYik7CiB9CiAKLS8qIHZh
cmlhbnQgdXNlZCBmb3IgdW5jb25uZWN0ZWQgc29ja2V0cyAqLwotc3RhdGljIGlubGluZSB2b2lk
IHNrX21hcmtfbmFwaV9pZF9vbmNlKHN0cnVjdCBzb2NrICpzaywKLQkJCQkJY29uc3Qgc3RydWN0
IHNrX2J1ZmYgKnNrYikKK3N0YXRpYyBpbmxpbmUgdm9pZCBfX3NrX21hcmtfbmFwaV9pZF9vbmNl
X3hkcChzdHJ1Y3Qgc29jayAqc2ssIHVuc2lnbmVkIGludCBuYXBpX2lkKQogewogI2lmZGVmIENP
TkZJR19ORVRfUlhfQlVTWV9QT0xMCiAJaWYgKCFSRUFEX09OQ0Uoc2stPnNrX25hcGlfaWQpKQot
CQlXUklURV9PTkNFKHNrLT5za19uYXBpX2lkLCBza2ItPm5hcGlfaWQpOworCQlXUklURV9PTkNF
KHNrLT5za19uYXBpX2lkLCBuYXBpX2lkKTsKICNlbmRpZgogfQogCisvKiB2YXJpYW50IHVzZWQg
Zm9yIHVuY29ubmVjdGVkIHNvY2tldHMgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZCBza19tYXJrX25h
cGlfaWRfb25jZShzdHJ1Y3Qgc29jayAqc2ssCisJCQkJCWNvbnN0IHN0cnVjdCBza19idWZmICpz
a2IpCit7CisJX19za19tYXJrX25hcGlfaWRfb25jZV94ZHAoc2ssIHNrYi0+bmFwaV9pZCk7Cit9
CisKK3N0YXRpYyBpbmxpbmUgdm9pZCBza19tYXJrX25hcGlfaWRfb25jZV94ZHAoc3RydWN0IHNv
Y2sgKnNrLAorCQkJCQkgICAgY29uc3Qgc3RydWN0IHhkcF9idWZmICp4ZHApCit7CisJX19za19t
YXJrX25hcGlfaWRfb25jZV94ZHAoc2ssIHhkcC0+cnhxLT5uYXBpX2lkKTsKK30KKwogI2VuZGlm
IC8qIF9MSU5VWF9ORVRfQlVTWV9QT0xMX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0L3hk
cC5oIGIvaW5jbHVkZS9uZXQveGRwLmgKaW5kZXggMzgxNGZiNjMxZDUyLi40ZDQyNTVhOTQ3NzMg
MTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbmV0L3hkcC5oCisrKyBiL2luY2x1ZGUvbmV0L3hkcC5oCkBA
IC01OSw2ICs1OSw3IEBAIHN0cnVjdCB4ZHBfcnhxX2luZm8gewogCXUzMiBxdWV1ZV9pbmRleDsK
IAl1MzIgcmVnX3N0YXRlOwogCXN0cnVjdCB4ZHBfbWVtX2luZm8gbWVtOworCXVuc2lnbmVkIGlu
dCBuYXBpX2lkOwogfSBfX19fY2FjaGVsaW5lX2FsaWduZWQ7IC8qIHBlcmYgY3JpdGljYWwsIGF2
b2lkIGZhbHNlLXNoYXJpbmcgKi8KIAogc3RydWN0IHhkcF90eHFfaW5mbyB7CkBAIC0yMTEsNyAr
MjEyLDcgQEAgc3RhdGljIGlubGluZSB2b2lkIHhkcF9yZWxlYXNlX2ZyYW1lKHN0cnVjdCB4ZHBf
ZnJhbWUgKnhkcGYpCiB9CiAKIGludCB4ZHBfcnhxX2luZm9fcmVnKHN0cnVjdCB4ZHBfcnhxX2lu
Zm8gKnhkcF9yeHEsCi0JCSAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgdTMyIHF1ZXVlX2lu
ZGV4KTsKKwkJICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgsIHVu
c2lnbmVkIGludCBuYXBpX2lkKTsKIHZvaWQgeGRwX3J4cV9pbmZvX3VucmVnKHN0cnVjdCB4ZHBf
cnhxX2luZm8gKnhkcF9yeHEpOwogdm9pZCB4ZHBfcnhxX2luZm9fdW51c2VkKHN0cnVjdCB4ZHBf
cnhxX2luZm8gKnhkcF9yeHEpOwogYm9vbCB4ZHBfcnhxX2luZm9faXNfcmVnKHN0cnVjdCB4ZHBf
cnhxX2luZm8gKnhkcF9yeHEpOwpkaWZmIC0tZ2l0IGEvbmV0L2NvcmUvZGV2LmMgYi9uZXQvY29y
ZS9kZXYuYwppbmRleCBiMzQ1MjBhY2FhN2YuLmFkMzI2MWJlNWUyMSAxMDA2NDQKLS0tIGEvbmV0
L2NvcmUvZGV2LmMKKysrIGIvbmV0L2NvcmUvZGV2LmMKQEAgLTk4MzQsNyArOTgzNCw3IEBAIHN0
YXRpYyBpbnQgbmV0aWZfYWxsb2NfcnhfcXVldWVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCiAJ
CXJ4W2ldLmRldiA9IGRldjsKIAogCQkvKiBYRFAgUlgtcXVldWUgc2V0dXAgKi8KLQkJZXJyID0g
eGRwX3J4cV9pbmZvX3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpKTsKKwkJZXJyID0geGRwX3J4
cV9pbmZvX3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJ
CQlnb3RvIGVycl9yeHFfaW5mbzsKIAl9CmRpZmYgLS1naXQgYS9uZXQvY29yZS94ZHAuYyBiL25l
dC9jb3JlL3hkcC5jCmluZGV4IDQ4YWJhOTMzYTVhOC4uN2NjYTdjYjViNjVmIDEwMDY0NAotLS0g
YS9uZXQvY29yZS94ZHAuYworKysgYi9uZXQvY29yZS94ZHAuYwpAQCAtMTU4LDcgKzE1OCw3IEBA
IHN0YXRpYyB2b2lkIHhkcF9yeHFfaW5mb19pbml0KHN0cnVjdCB4ZHBfcnhxX2luZm8gKnhkcF9y
eHEpCiAKIC8qIFJldHVybnMgMCBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBvbiBmYWlsdXJlICovCiBp
bnQgeGRwX3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBfcnhxLAotCQkgICAg
IHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsIHUzMiBxdWV1ZV9pbmRleCkKKwkJICAgICBzdHJ1Y3Qg
bmV0X2RldmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgsIHVuc2lnbmVkIGludCBuYXBpX2lkKQog
ewogCWlmICh4ZHBfcnhxLT5yZWdfc3RhdGUgPT0gUkVHX1NUQVRFX1VOVVNFRCkgewogCQlXQVJO
KDEsICJEcml2ZXIgcHJvbWlzZWQgbm90IHRvIHJlZ2lzdGVyIHRoaXMiKTsKQEAgLTE3OSw2ICsx
NzksNyBAQCBpbnQgeGRwX3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBfcnhx
LAogCXhkcF9yeHFfaW5mb19pbml0KHhkcF9yeHEpOwogCXhkcF9yeHEtPmRldiA9IGRldjsKIAl4
ZHBfcnhxLT5xdWV1ZV9pbmRleCA9IHF1ZXVlX2luZGV4OworCXhkcF9yeHEtPm5hcGlfaWQgPSBu
YXBpX2lkOwogCiAJeGRwX3J4cS0+cmVnX3N0YXRlID0gUkVHX1NUQVRFX1JFR0lTVEVSRUQ7CiAJ
cmV0dXJuIDA7CmRpZmYgLS1naXQgYS9uZXQveGRwL3hzay5jIGIvbmV0L3hkcC94c2suYwppbmRl
eCBkYTY0OWI0ZjM3N2MuLjBiODI1NjEyZDg5NSAxMDA2NDQKLS0tIGEvbmV0L3hkcC94c2suYwor
KysgYi9uZXQveGRwL3hzay5jCkBAIC0yMzMsNiArMjMzLDcgQEAgc3RhdGljIGludCB4c2tfcmN2
KHN0cnVjdCB4ZHBfc29jayAqeHMsIHN0cnVjdCB4ZHBfYnVmZiAqeGRwLAogCWlmICh4cy0+ZGV2
ICE9IHhkcC0+cnhxLT5kZXYgfHwgeHMtPnF1ZXVlX2lkICE9IHhkcC0+cnhxLT5xdWV1ZV9pbmRl
eCkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKKwlza19tYXJrX25hcGlfaWRfb25jZV94ZHAoJnhzLT5z
aywgeGRwKTsKIAlsZW4gPSB4ZHAtPmRhdGFfZW5kIC0geGRwLT5kYXRhOwogCiAJcmV0dXJuIHhk
cC0+cnhxLT5tZW0udHlwZSA9PSBNRU1fVFlQRV9YU0tfQlVGRl9QT09MID8KLS0gCjIuMjcuMAoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtd2ly
ZWQtbGFuIG1haWxpbmcgbGlzdApJbnRlbC13aXJlZC1sYW5Ab3N1b3NsLm9yZwpodHRwczovL2xp
c3RzLm9zdW9zbC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC13aXJlZC1sYW4K
