Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from silver.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id 12F872FA481
	for <lists+intel-wired-lan@lfdr.de>; Mon, 18 Jan 2021 16:23:31 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by silver.osuosl.org (Postfix) with ESMTP id 7EBF7204BC;
	Mon, 18 Jan 2021 15:23:29 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from silver.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EzLWSf6hVyxj; Mon, 18 Jan 2021 15:23:29 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by silver.osuosl.org (Postfix) with ESMTP id 15B2D2049E;
	Mon, 18 Jan 2021 15:23:29 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by ash.osuosl.org (Postfix) with ESMTP id E76EF1BF33E
 for <intel-wired-lan@lists.osuosl.org>; Mon, 18 Jan 2021 15:23:17 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id E346685A00
 for <intel-wired-lan@lists.osuosl.org>; Mon, 18 Jan 2021 15:23:17 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id jCDsmvHh1lDH for <intel-wired-lan@lists.osuosl.org>;
 Mon, 18 Jan 2021 15:23:17 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mga06.intel.com (mga06.intel.com [134.134.136.31])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id 255C88577C
 for <intel-wired-lan@lists.osuosl.org>; Mon, 18 Jan 2021 15:23:17 +0000 (UTC)
IronPort-SDR: w/zlm3nsVWKObV9bjR6OCxyP2FBwyHZPgntKSeZhB8ggI6zvPN16j/Onlb2apjoQe+9yUNhGA+
 C193z1+78i/Q==
X-IronPort-AV: E=McAfee;i="6000,8403,9867"; a="240358054"
X-IronPort-AV: E=Sophos;i="5.79,356,1602572400"; d="scan'208";a="240358054"
Received: from orsmga004.jf.intel.com ([10.7.209.38])
 by orsmga104.jf.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 18 Jan 2021 07:23:17 -0800
IronPort-SDR: WpbDM4yLvCumj55b1pe2r5iLRHuqjefTXbefL7emJACY/KTBZclgIz6RnHohNFKqqmhmPXoseD
 SyV1SBcOP1GA==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.79,356,1602572400"; d="scan'208";a="500676397"
Received: from ranger.igk.intel.com ([10.102.21.164])
 by orsmga004.jf.intel.com with ESMTP; 18 Jan 2021 07:23:14 -0800
From: Maciej Fijalkowski <maciej.fijalkowski@intel.com>
To: intel-wired-lan@lists.osuosl.org
Date: Mon, 18 Jan 2021 16:13:17 +0100
Message-Id: <20210118151318.12324-11-maciej.fijalkowski@intel.com>
X-Mailer: git-send-email 2.20.1
In-Reply-To: <20210118151318.12324-1-maciej.fijalkowski@intel.com>
References: <20210118151318.12324-1-maciej.fijalkowski@intel.com>
MIME-Version: 1.0
Subject: [Intel-wired-lan] [PATCH v3 net-next 10/11] ice: store the result
 of ice_rx_offset() onto ice_ring
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: netdev@vger.kernel.org, kuba@kernel.org, bpf@vger.kernel.org,
 bjorn.topel@intel.com, magnus.karlsson@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

T3V0cHV0IG9mIGljZV9yeF9vZmZzZXQoKSBpcyBiYXNlZCBvbiBldGh0b29sJ3MgcHJpdiBmbGFn
IHNldHRpbmcsIHdoaWNoCndoZW4gY2hhbmdlZCwgY2F1c2VzIFBGIHJlc2V0IChkaXNhYmxlcyBu
YXBpLCBmcmVlcyBpcnFzLCBsb2FkcwpkaWZmZXJlbnQgUnggbWVtIG1vZGVsLCBldGMuKS4gVGhp
cyBtZWFucyB0aGF0IHdpdGhpbiBuYXBpIGl0cyByZXN1bHQgaXMKY29uc3RhbnQgYW5kIHRoZXJl
IGlzIG5vIHJlYXNvbiB0byBjYWxsIGl0IHBlciBlYWNoIHByb2Nlc3NlZCBmcmFtZS4KCkFkZCBu
ZXcgJ3J4X29mZnNldCcgZmllbGQgdG8gaWNlX3JpbmcgdGhhdCBpcyBtZWFudCB0byBob2xkIHRo
ZQppY2Vfcnhfb2Zmc2V0KCkgcmVzdWx0IGFuZCB1c2UgaXQgd2l0aGluIGljZV9jbGVhbl9yeF9p
cnEoKS4KRnVydGhlcm1vcmUsIHVzZSBpdCB3aXRoaW4gaWNlX2FsbG9jX21hcHBlZF9wYWdlKCku
CgpSZXZpZXdlZC1ieTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBNYWNpZWogRmlqYWxrb3dza2kgPG1hY2llai5maWphbGtvd3NraUBpbnRlbC5j
b20+Ci0tLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMgfCA0MyAr
KysrKysrKysrKystLS0tLS0tLS0tLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2lj
ZV90eHJ4LmggfCAgMSArCiAyIGZpbGVzIGNoYW5nZWQsIDIzIGluc2VydGlvbnMoKyksIDIxIGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9p
Y2VfdHhyeC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMKaW5k
ZXggNTBmYmI3N2JhYjcwLi5mZGQwZDhiMzI2ZmYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2ludGVsL2ljZS9pY2VfdHhyeC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2lu
dGVsL2ljZS9pY2VfdHhyeC5jCkBAIC00NDMsNiArNDQzLDIyIEBAIHZvaWQgaWNlX2ZyZWVfcnhf
cmluZyhzdHJ1Y3QgaWNlX3JpbmcgKnJ4X3JpbmcpCiAJfQogfQogCisvKioKKyAqIGljZV9yeF9v
ZmZzZXQgLSBSZXR1cm4gZXhwZWN0ZWQgb2Zmc2V0IGludG8gcGFnZSB0byBhY2Nlc3MgZGF0YQor
ICogQHJ4X3Jpbmc6IFJpbmcgd2UgYXJlIHJlcXVlc3Rpbmcgb2Zmc2V0IG9mCisgKgorICogUmV0
dXJucyB0aGUgb2Zmc2V0IHZhbHVlIGZvciByaW5nIGludG8gdGhlIGRhdGEgYnVmZmVyLgorICov
CitzdGF0aWMgdW5zaWduZWQgaW50IGljZV9yeF9vZmZzZXQoc3RydWN0IGljZV9yaW5nICpyeF9y
aW5nKQoreworCWlmIChpY2VfcmluZ191c2VzX2J1aWxkX3NrYihyeF9yaW5nKSkKKwkJcmV0dXJu
IElDRV9TS0JfUEFEOworCWVsc2UgaWYgKGljZV9pc194ZHBfZW5hX3ZzaShyeF9yaW5nLT52c2kp
KQorCQlyZXR1cm4gWERQX1BBQ0tFVF9IRUFEUk9PTTsKKworCXJldHVybiAwOworfQorCiAvKioK
ICAqIGljZV9zZXR1cF9yeF9yaW5nIC0gQWxsb2NhdGUgdGhlIFJ4IGRlc2NyaXB0b3JzCiAgKiBA
cnhfcmluZzogdGhlIFJ4IHJpbmcgdG8gc2V0IHVwCkBAIC00NzcsNiArNDkzLDcgQEAgaW50IGlj
ZV9zZXR1cF9yeF9yaW5nKHN0cnVjdCBpY2VfcmluZyAqcnhfcmluZykKIAogCXJ4X3JpbmctPm5l
eHRfdG9fdXNlID0gMDsKIAlyeF9yaW5nLT5uZXh0X3RvX2NsZWFuID0gMDsKKwlyeF9yaW5nLT5y
eF9vZmZzZXQgPSBpY2Vfcnhfb2Zmc2V0KHJ4X3JpbmcpOwogCiAJaWYgKGljZV9pc194ZHBfZW5h
X3ZzaShyeF9yaW5nLT52c2kpKQogCQlXUklURV9PTkNFKHJ4X3JpbmctPnhkcF9wcm9nLCByeF9y
aW5nLT52c2ktPnhkcF9wcm9nKTsKQEAgLTQ5NCwyMiArNTExLDYgQEAgaW50IGljZV9zZXR1cF9y
eF9yaW5nKHN0cnVjdCBpY2VfcmluZyAqcnhfcmluZykKIAlyZXR1cm4gLUVOT01FTTsKIH0KIAot
LyoqCi0gKiBpY2Vfcnhfb2Zmc2V0IC0gUmV0dXJuIGV4cGVjdGVkIG9mZnNldCBpbnRvIHBhZ2Ug
dG8gYWNjZXNzIGRhdGEKLSAqIEByeF9yaW5nOiBSaW5nIHdlIGFyZSByZXF1ZXN0aW5nIG9mZnNl
dCBvZgotICoKLSAqIFJldHVybnMgdGhlIG9mZnNldCB2YWx1ZSBmb3IgcmluZyBpbnRvIHRoZSBk
YXRhIGJ1ZmZlci4KLSAqLwotc3RhdGljIHVuc2lnbmVkIGludCBpY2Vfcnhfb2Zmc2V0KHN0cnVj
dCBpY2VfcmluZyAqcnhfcmluZykKLXsKLQlpZiAoaWNlX3JpbmdfdXNlc19idWlsZF9za2Iocnhf
cmluZykpCi0JCXJldHVybiBJQ0VfU0tCX1BBRDsKLQllbHNlIGlmIChpY2VfaXNfeGRwX2VuYV92
c2kocnhfcmluZy0+dnNpKSkKLQkJcmV0dXJuIFhEUF9QQUNLRVRfSEVBRFJPT007Ci0KLQlyZXR1
cm4gMDsKLX0KLQogc3RhdGljIHVuc2lnbmVkIGludAogaWNlX3J4X2ZyYW1lX3RydWVzaXplKHN0
cnVjdCBpY2VfcmluZyAqcnhfcmluZywgdW5zaWduZWQgaW50IF9fbWF5YmVfdW51c2VkIHNpemUp
CiB7CkBAIC01MTgsOCArNTE5LDggQEAgaWNlX3J4X2ZyYW1lX3RydWVzaXplKHN0cnVjdCBpY2Vf
cmluZyAqcnhfcmluZywgdW5zaWduZWQgaW50IF9fbWF5YmVfdW51c2VkIHNpemUKICNpZiAoUEFH
RV9TSVpFIDwgODE5MikKIAl0cnVlc2l6ZSA9IGljZV9yeF9wZ19zaXplKHJ4X3JpbmcpIC8gMjsg
LyogTXVzdCBiZSBwb3dlci1vZi0yICovCiAjZWxzZQotCXRydWVzaXplID0gaWNlX3J4X29mZnNl
dChyeF9yaW5nKSA/Ci0JCVNLQl9EQVRBX0FMSUdOKGljZV9yeF9vZmZzZXQocnhfcmluZykgKyBz
aXplKSArCisJdHJ1ZXNpemUgPSByeF9yaW5nLT5yeF9vZmZzZXQgPworCQlTS0JfREFUQV9BTElH
TihyeF9yaW5nLT5yeF9vZmZzZXQgKyBzaXplKSArCiAJCVNLQl9EQVRBX0FMSUdOKHNpemVvZihz
dHJ1Y3Qgc2tiX3NoYXJlZF9pbmZvKSkgOgogCQlTS0JfREFUQV9BTElHTihzaXplKTsKICNlbmRp
ZgpAQCAtNjUyLDcgKzY1Myw3IEBAIGljZV9hbGxvY19tYXBwZWRfcGFnZShzdHJ1Y3QgaWNlX3Jp
bmcgKnJ4X3JpbmcsIHN0cnVjdCBpY2VfcnhfYnVmICpiaSkKIAogCWJpLT5kbWEgPSBkbWE7CiAJ
YmktPnBhZ2UgPSBwYWdlOwotCWJpLT5wYWdlX29mZnNldCA9IGljZV9yeF9vZmZzZXQocnhfcmlu
Zyk7CisJYmktPnBhZ2Vfb2Zmc2V0ID0gcnhfcmluZy0+cnhfb2Zmc2V0OwogCXBhZ2VfcmVmX2Fk
ZChwYWdlLCBVU0hSVF9NQVggLSAxKTsKIAliaS0+cGFnZWNudF9iaWFzID0gVVNIUlRfTUFYOwog
CkBAIC04MTQsNyArODE1LDcgQEAgaWNlX2FkZF9yeF9mcmFnKHN0cnVjdCBpY2VfcmluZyAqcnhf
cmluZywgc3RydWN0IGljZV9yeF9idWYgKnJ4X2J1ZiwKIAkJc3RydWN0IHNrX2J1ZmYgKnNrYiwg
dW5zaWduZWQgaW50IHNpemUpCiB7CiAjaWYgKFBBR0VfU0laRSA+PSA4MTkyKQotCXVuc2lnbmVk
IGludCB0cnVlc2l6ZSA9IFNLQl9EQVRBX0FMSUdOKHNpemUgKyBpY2Vfcnhfb2Zmc2V0KHJ4X3Jp
bmcpKTsKKwl1bnNpZ25lZCBpbnQgdHJ1ZXNpemUgPSBTS0JfREFUQV9BTElHTihzaXplICsgcnhf
cmluZy0+cnhfb2Zmc2V0KTsKICNlbHNlCiAJdW5zaWduZWQgaW50IHRydWVzaXplID0gaWNlX3J4
X3BnX3NpemUocnhfcmluZykgLyAyOwogI2VuZGlmCkBAIC0xMDgwLDYgKzEwODEsNyBAQCBpbnQg
aWNlX2NsZWFuX3J4X2lycShzdHJ1Y3QgaWNlX3JpbmcgKnJ4X3JpbmcsIGludCBidWRnZXQpCiB7
CiAJdW5zaWduZWQgaW50IHRvdGFsX3J4X2J5dGVzID0gMCwgdG90YWxfcnhfcGt0cyA9IDAsIGZy
YW1lX3N6ID0gMDsKIAl1MTYgY2xlYW5lZF9jb3VudCA9IElDRV9ERVNDX1VOVVNFRChyeF9yaW5n
KTsKKwl1bnNpZ25lZCBpbnQgb2Zmc2V0ID0gcnhfcmluZy0+cnhfb2Zmc2V0OwogCXVuc2lnbmVk
IGludCB4ZHBfcmVzLCB4ZHBfeG1pdCA9IDA7CiAJc3RydWN0IHNrX2J1ZmYgKnNrYiA9IHJ4X3Jp
bmctPnNrYjsKIAlzdHJ1Y3QgYnBmX3Byb2cgKnhkcF9wcm9nID0gTlVMTDsKQEAgLTEwOTQsNyAr
MTA5Niw2IEBAIGludCBpY2VfY2xlYW5fcnhfaXJxKHN0cnVjdCBpY2VfcmluZyAqcnhfcmluZywg
aW50IGJ1ZGdldCkKIAogCS8qIHN0YXJ0IHRoZSBsb29wIHRvIHByb2Nlc3MgUnggcGFja2V0cyBi
b3VuZGVkIGJ5ICdidWRnZXQnICovCiAJd2hpbGUgKGxpa2VseSh0b3RhbF9yeF9wa3RzIDwgKHVu
c2lnbmVkIGludClidWRnZXQpKSB7Ci0JCXVuc2lnbmVkIGludCBvZmZzZXQgPSBpY2Vfcnhfb2Zm
c2V0KHJ4X3JpbmcpOwogCQl1bmlvbiBpY2VfMzJiX3J4X2ZsZXhfZGVzYyAqcnhfZGVzYzsKIAkJ
c3RydWN0IGljZV9yeF9idWYgKnJ4X2J1ZjsKIAkJdW5zaWduZWQgY2hhciAqaGFyZF9zdGFydDsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfdHhyeC5oIGIv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmgKaW5kZXggYzc3ZGJiYjc2
MGNkLi5kNWY2MDkwNTZhYjkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVs
L2ljZS9pY2VfdHhyeC5oCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2Vf
dHhyeC5oCkBAIC0yOTUsNiArMjk1LDcgQEAgc3RydWN0IGljZV9yaW5nIHsKIAlzdHJ1Y3QgcmN1
X2hlYWQgcmN1OwkJLyogdG8gYXZvaWQgcmFjZSBvbiBmcmVlICovCiAJc3RydWN0IGJwZl9wcm9n
ICp4ZHBfcHJvZzsKIAlzdHJ1Y3QgeHNrX2J1ZmZfcG9vbCAqeHNrX3Bvb2w7CisJdTE2IHJ4X29m
ZnNldDsKIAkvKiBDTDMgLSAzcmQgY2FjaGVsaW5lIHN0YXJ0cyBoZXJlICovCiAJc3RydWN0IHhk
cF9yeHFfaW5mbyB4ZHBfcnhxOwogCXN0cnVjdCBza19idWZmICpza2I7Ci0tIAoyLjIwLjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkludGVsLXdpcmVk
LWxhbiBtYWlsaW5nIGxpc3QKSW50ZWwtd2lyZWQtbGFuQG9zdW9zbC5vcmcKaHR0cHM6Ly9saXN0
cy5vc3Vvc2wub3JnL21haWxtYW4vbGlzdGluZm8vaW50ZWwtd2lyZWQtbGFuCg==
