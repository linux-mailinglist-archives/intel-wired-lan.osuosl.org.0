Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
	by mail.lfdr.de (Postfix) with ESMTPS id 819562A7BC8
	for <lists+intel-wired-lan@lfdr.de>; Thu,  5 Nov 2020 11:29:18 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by whitealder.osuosl.org (Postfix) with ESMTP id 3FB9385620;
	Thu,  5 Nov 2020 10:29:17 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vU-z9BrmC6xJ; Thu,  5 Nov 2020 10:29:17 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by whitealder.osuosl.org (Postfix) with ESMTP id DF970855E1;
	Thu,  5 Nov 2020 10:29:13 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from whitealder.osuosl.org (smtp1.osuosl.org [140.211.166.138])
 by ash.osuosl.org (Postfix) with ESMTP id 0601E1BF59A
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:29:12 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by whitealder.osuosl.org (Postfix) with ESMTP id 012EE81AED
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:29:12 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from whitealder.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id j-XwQVnKfLp9 for <intel-wired-lan@lists.osuosl.org>;
 Thu,  5 Nov 2020 10:29:10 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pl1-f193.google.com (mail-pl1-f193.google.com
 [209.85.214.193])
 by whitealder.osuosl.org (Postfix) with ESMTPS id 373D181AE4
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:29:10 +0000 (UTC)
Received: by mail-pl1-f193.google.com with SMTP id 1so583926ple.2
 for <intel-wired-lan@lists.osuosl.org>; Thu, 05 Nov 2020 02:29:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=PdMY6BpDTQUzCR42aVrN9mVZFQcGCfw0cn1tuEGqsPg=;
 b=AqP9QmyXOVJau0F6KTUA+01eFGRdJWyv0ui4NaQ/clrhDQHlSV+70OSoHAT48uVJsO
 KIYibIPE0/kwhg2vj2eKupgg/i2GvmnaVYGRvZtTPUTXbP4YbSIIY1s2SGA0hupmK+7f
 DTPd2oVpXVQfXEHhVUDaT0RsKVDd2XN1kGsYcX6L73UdtAMsGNJ4NuMdMRH3zG2Ybhop
 +dBh/sPYSbJsuGup4gI2Z3xVp5qPrRsbUSjeWX5/ZdlW/2Q2lDgMNBJpN+18ZlkfRXrc
 YShl4JMoGkSdpxFwn+RVb5PmmAxDkV+7AtBf7OdNXu4xqKieAOhN4VAOC6CnZ3pgJztm
 7N9A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=PdMY6BpDTQUzCR42aVrN9mVZFQcGCfw0cn1tuEGqsPg=;
 b=juSaf6ZjAvTbvOWGO2zZI31leYfTlGdvil8iCV1Cgj9GqClxS4RRCDdBDe16ndBYPn
 VH29swCNyVYvNHQmg6T/UO9FTbXEmZ+/IqxEnl2TxiFtZWp1kqjR4UFJiQzNBvaOWZUy
 Wj2v8/3R9HNdyGN3ZUxcFyWtJOizAi1CGP4yNtllTJOwdOOF7iUBOvhC7WOd0hEfv6b3
 EVlTZeKoeAXr0986oEr8ylH+ji9SEc4MO9jSSXzU3m/6dCx2VlWqu4qfcV7/Saoduips
 IOHLGDBnrlSFWisEXw4/UWg7hxpvLThenkcwrWXp9N3+7E9NteHLxiuQgOywyuFaLAnk
 FH/Q==
X-Gm-Message-State: AOAM533oFhJm0CTg5GWego/bkZLw17t1UPwloq9BUB/iHT59SnQS9r5h
 BVZE3P5CLLoCeeHoC8qJuJA=
X-Google-Smtp-Source: ABdhPJzPGDhJdDKMqgm+QqUhqKsqe0HXQilQR4MFMybPqDyzWfAP6cY2xrJ8vYwYTzz2LN46Tt0vPw==
X-Received: by 2002:a17:902:8d86:b029:d1:9237:6dfd with SMTP id
 v6-20020a1709028d86b02900d192376dfdmr1722042plo.22.1604572149722; 
 Thu, 05 Nov 2020 02:29:09 -0800 (PST)
Received: from btopel-mobl.ger.intel.com (fmdmzpr03-ext.fm.intel.com.
 [192.55.54.38])
 by smtp.gmail.com with ESMTPSA id 192sm2050117pfz.200.2020.11.05.02.29.03
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 05 Nov 2020 02:29:08 -0800 (PST)
From: =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@gmail.com>
To: netdev@vger.kernel.org,
	bpf@vger.kernel.org
Date: Thu,  5 Nov 2020 11:28:09 +0100
Message-Id: <20201105102812.152836-7-bjorn.topel@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201105102812.152836-1-bjorn.topel@gmail.com>
References: <20201105102812.152836-1-bjorn.topel@gmail.com>
MIME-Version: 1.0
Subject: [Intel-wired-lan] [RFC PATCH bpf-next v2 6/9] xsk: propagate
 napi_id to XDP socket Rx path
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: daniel@iogearbox.net, jonathan.lemon@gmail.com, ast@kernel.org,
 edumazet@google.com, intel-wired-lan@lists.osuosl.org, qi.z.zhang@intel.com,
 kuba@kernel.org, =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 magnus.karlsson@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RnJvbTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgoKQWRkIG5hcGlfaWQg
dG8gdGhlIHhkcF9yeHFfaW5mbyBzdHJ1Y3R1cmUsIGFuZCBtYWtlIHN1cmUgdGhlIFhEUApzb2Nr
ZXQgcGljayB1cCB0aGUgbmFwaV9pZCBpbiB0aGUgUnggcGF0aC4gVGhlIG5hcGlfaWQgaXMgdXNl
ZCB0byBmaW5kCnRoZSBjb3JyZXNwb25kaW5nIE5BUEkgc3RydWN0dXJlIGZvciBzb2NrZXQgYnVz
eSBwb2xsaW5nLgoKVE9ETzogVGVzdGVkIHdpdGggaTQwZS9pY2UuIEknbGwgcmVhY2ggb3V0IHRv
IHRoZSBkcml2ZXIgYXV0aG9ycyBmb3IgYQogICAgICBwb3RlbnRpYWwgbm9uLVJGQyB2ZXJzaW9u
LgoKU2lnbmVkLW9mZi1ieTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgot
LS0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jICB8ICAyICst
CiBkcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9ibnh0L2JueHQuYyAgICAgfCAgMiArLQog
Li4uL2V0aGVybmV0L2Nhdml1bS90aHVuZGVyL25pY3ZmX3F1ZXVlcy5jICAgIHwgIDIgKy0KIC4u
Li9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jICB8ICAyICstCiBkcml2
ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pNDBlL2k0MGVfdHhyeC5jICAgfCAgMiArLQogZHJpdmVy
cy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV9iYXNlLmMgICAgIHwgIDQgKystLQogZHJpdmVy
cy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMgICAgIHwgIDIgKy0KIGRyaXZlcnMv
bmV0L2V0aGVybmV0L2ludGVsL2lnYi9pZ2JfbWFpbi5jICAgICB8ICAyICstCiBkcml2ZXJzL25l
dC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMgfCAgMiArLQogLi4uL25ldC9ldGhl
cm5ldC9pbnRlbC9peGdiZXZmL2l4Z2JldmZfbWFpbi5jIHwgIDIgKy0KIGRyaXZlcnMvbmV0L2V0
aGVybmV0L21hcnZlbGwvbXZuZXRhLmMgICAgICAgICB8ICAyICstCiAuLi4vbmV0L2V0aGVybmV0
L21hcnZlbGwvbXZwcDIvbXZwcDJfbWFpbi5jICAgfCAgNCArKy0tCiBkcml2ZXJzL25ldC9ldGhl
cm5ldC9tZWxsYW5veC9tbHg0L2VuX3J4LmMgICAgfCAgMiArLQogLi4uL25ldC9ldGhlcm5ldC9t
ZWxsYW5veC9tbHg1L2NvcmUvZW5fbWFpbi5jIHwgIDIgKy0KIC4uLi9ldGhlcm5ldC9uZXRyb25v
bWUvbmZwL25mcF9uZXRfY29tbW9uLmMgICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9x
bG9naWMvcWVkZS9xZWRlX21haW4uYyAgfCAgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvc2Zj
L3J4X2NvbW1vbi5jICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lv
bmV4dC9uZXRzZWMuYyAgICAgICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC90aS9jcHN3
X3ByaXYuYyAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9uZXQvaHlwZXJ2L25ldHZzYy5jICAg
ICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L3R1bi5jICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL25ldC92ZXRoLmMgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9uZXQvdmlydGlvX25ldC5jICAgICAgICAgICAg
ICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L3hlbi1uZXRmcm9udC5jICAgICAgICAgICAg
ICAgICAgICB8ICAyICstCiBpbmNsdWRlL25ldC9idXN5X3BvbGwuaCAgICAgICAgICAgICAgICAg
ICAgICAgfCAxOSArKysrKysrKysrKysrKystLS0tCiBpbmNsdWRlL25ldC94ZHAuaCAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5ldC9jb3JlL2Rldi5jICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBuZXQvY29yZS94ZHAuYyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5ldC94ZHAveHNrLmMgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB8ICAxICsKIDI5IGZpbGVzIGNoYW5nZWQsIDQ3IGluc2VydGlvbnMo
KyksIDMzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Ft
YXpvbi9lbmEvZW5hX25ldGRldi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYW1hem9uL2VuYS9l
bmFfbmV0ZGV2LmMKaW5kZXggZTgxMzFkYWRjMjJjLi42YWQ1OWYwMDY4ZjYgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jCisrKyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jCkBAIC00MTYsNyArNDE2LDcg
QEAgc3RhdGljIGludCBlbmFfeGRwX3JlZ2lzdGVyX3J4cV9pbmZvKHN0cnVjdCBlbmFfcmluZyAq
cnhfcmluZykKIHsKIAlpbnQgcmM7CiAKLQlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3Jpbmct
PnhkcF9yeHEsIHJ4X3JpbmctPm5ldGRldiwgcnhfcmluZy0+cWlkKTsKKwlyYyA9IHhkcF9yeHFf
aW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIHJ4X3JpbmctPm5ldGRldiwgcnhfcmluZy0+cWlk
LCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIocnhfcmluZy0+YWRhcHRlciwgaWZ1cCwg
cnhfcmluZy0+bmV0ZGV2LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRj
b20vYm54dC9ibnh0LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9ibnh0L2JueHQu
YwppbmRleCBmYTE0Nzg2NWUzM2YuLjVkZjEzMzg3YWI3NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvYnJvYWRjb20vYm54dC9ibnh0LmMKQEAgLTI4OTQsNyArMjg5NCw3IEBAIHN0YXRpYyBpbnQg
Ym54dF9hbGxvY19yeF9yaW5ncyhzdHJ1Y3QgYm54dCAqYnApCiAJCWlmIChyYykKIAkJCXJldHVy
biByYzsKIAotCQlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4ci0+eGRwX3J4cSwgYnAtPmRldiwg
aSk7CisJCXJjID0geGRwX3J4cV9pbmZvX3JlZygmcnhyLT54ZHBfcnhxLCBicC0+ZGV2LCBpLCAw
KTsKIAkJaWYgKHJjIDwgMCkKIAkJCXJldHVybiByYzsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMgYi9kcml2ZXJzL25ldC9l
dGhlcm5ldC9jYXZpdW0vdGh1bmRlci9uaWN2Zl9xdWV1ZXMuYwppbmRleCA3YTE0MWNlMzJlODYu
LmY3ODJlNmFmNDVlOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3Ro
dW5kZXIvbmljdmZfcXVldWVzLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3Ro
dW5kZXIvbmljdmZfcXVldWVzLmMKQEAgLTc3MCw3ICs3NzAsNyBAQCBzdGF0aWMgdm9pZCBuaWN2
Zl9yY3ZfcXVldWVfY29uZmlnKHN0cnVjdCBuaWN2ZiAqbmljLCBzdHJ1Y3QgcXVldWVfc2V0ICpx
cywKIAlycS0+Y2FjaGluZyA9IDE7CiAKIAkvKiBEcml2ZXIgaGF2ZSBubyBwcm9wZXIgZXJyb3Ig
cGF0aCBmb3IgZmFpbGVkIFhEUCBSWC1xdWV1ZSBpbmZvIHJlZyAqLwotCVdBUk5fT04oeGRwX3J4
cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEsIG5pYy0+bmV0ZGV2LCBxaWR4KSA8IDApOworCVdBUk5f
T04oeGRwX3J4cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEsIG5pYy0+bmV0ZGV2LCBxaWR4LCAwKSA8
IDApOwogCiAJLyogU2VuZCBhIG1haWxib3ggbXNnIHRvIFBGIHRvIGNvbmZpZyBSUSAqLwogCW1i
eC5ycS5tc2cgPSBOSUNfTUJPWF9NU0dfUlFfQ0ZHOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jCmluZGV4IGNmOTQwMGE5ODg2ZC4uNDA5NTM5
ODBlODQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZHBhYTIv
ZHBhYTItZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2Rw
YWEyLWV0aC5jCkBAIC0zMzM0LDcgKzMzMzQsNyBAQCBzdGF0aWMgaW50IGRwYWEyX2V0aF9zZXR1
cF9yeF9mbG93KHN0cnVjdCBkcGFhMl9ldGhfcHJpdiAqcHJpdiwKIAkJcmV0dXJuIDA7CiAKIAll
cnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZmcS0+Y2hhbm5lbC0+eGRwX3J4cSwgcHJpdi0+bmV0X2Rl
diwKLQkJCSAgICAgICBmcS0+Zmxvd2lkKTsKKwkJCSAgICAgICBmcS0+Zmxvd2lkLCAwKTsKIAlp
ZiAoZXJyKSB7CiAJCWRldl9lcnIoZGV2LCAieGRwX3J4cV9pbmZvX3JlZyBmYWlsZWRcbiIpOwog
CQlyZXR1cm4gZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQw
ZS9pNDBlX3R4cnguYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2k0MGUvaTQwZV90eHJ4
LmMKaW5kZXggZDQzY2UxM2E5M2M5Li5hM2Q1YmRhY2EyZjUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
bmV0L2V0aGVybmV0L2ludGVsL2k0MGUvaTQwZV90eHJ4LmMKKysrIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvaW50ZWwvaTQwZS9pNDBlX3R4cnguYwpAQCAtMTQzNiw3ICsxNDM2LDcgQEAgaW50IGk0
MGVfc2V0dXBfcnhfZGVzY3JpcHRvcnMoc3RydWN0IGk0MGVfcmluZyAqcnhfcmluZykKIAkvKiBY
RFAgUlgtcXVldWUgaW5mbyBvbmx5IG5lZWRlZCBmb3IgUlggcmluZ3MgZXhwb3NlZCB0byBYRFAg
Ki8KIAlpZiAocnhfcmluZy0+dnNpLT50eXBlID09IEk0MEVfVlNJX01BSU4pIHsKIAkJZXJyID0g
eGRwX3J4cV9pbmZvX3JlZygmcnhfcmluZy0+eGRwX3J4cSwgcnhfcmluZy0+bmV0ZGV2LAotCQkJ
CSAgICAgICByeF9yaW5nLT5xdWV1ZV9pbmRleCk7CisJCQkJICAgICAgIHJ4X3JpbmctPnF1ZXVl
X2luZGV4LCByeF9yaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAkJaWYgKGVyciA8IDAp
CiAJCQlyZXR1cm4gZXJyOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2lu
dGVsL2ljZS9pY2VfYmFzZS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV9i
YXNlLmMKaW5kZXggZmU0MzIwZTJkMWYyLi4zMTI0YTNiZjUxOWEgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jCkBAIC0zMDYsNyArMzA2LDcgQEAgaW50IGljZV9z
ZXR1cF9yeF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5nKQogCQlpZiAoIXhkcF9yeHFfaW5mb19p
c19yZWcoJnJpbmctPnhkcF9yeHEpKQogCQkJLyogY292ZXJpdHlbY2hlY2tfcmV0dXJuXSAqLwog
CQkJeGRwX3J4cV9pbmZvX3JlZygmcmluZy0+eGRwX3J4cSwgcmluZy0+bmV0ZGV2LAotCQkJCQkg
cmluZy0+cV9pbmRleCk7CisJCQkJCSByaW5nLT5xX2luZGV4LCByaW5nLT5xX3ZlY3Rvci0+bmFw
aS5uYXBpX2lkKTsKIAogCQlyaW5nLT54c2tfcG9vbCA9IGljZV94c2tfcG9vbChyaW5nKTsKIAkJ
aWYgKHJpbmctPnhza19wb29sKSB7CkBAIC0zMzMsNyArMzMzLDcgQEAgaW50IGljZV9zZXR1cF9y
eF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5nKQogCQkJCS8qIGNvdmVyaXR5W2NoZWNrX3JldHVy
bl0gKi8KIAkJCQl4ZHBfcnhxX2luZm9fcmVnKCZyaW5nLT54ZHBfcnhxLAogCQkJCQkJIHJpbmct
Pm5ldGRldiwKLQkJCQkJCSByaW5nLT5xX2luZGV4KTsKKwkJCQkJCSByaW5nLT5xX2luZGV4LCBy
aW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAogCQkJZXJyID0geGRwX3J4cV9pbmZvX3Jl
Z19tZW1fbW9kZWwoJnJpbmctPnhkcF9yeHEsCiAJCQkJCQkJIE1FTV9UWVBFX1BBR0VfU0hBUkVE
LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pY2UvaWNlX3R4cnguYwppbmRleCBlYWU3NTI2
MGZlMjAuLjc3ZDVlYWU2YjRjMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50
ZWwvaWNlL2ljZV90eHJ4LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2lj
ZV90eHJ4LmMKQEAgLTQ4Myw3ICs0ODMsNyBAQCBpbnQgaWNlX3NldHVwX3J4X3Jpbmcoc3RydWN0
IGljZV9yaW5nICpyeF9yaW5nKQogCWlmIChyeF9yaW5nLT52c2ktPnR5cGUgPT0gSUNFX1ZTSV9Q
RiAmJgogCSAgICAheGRwX3J4cV9pbmZvX2lzX3JlZygmcnhfcmluZy0+eGRwX3J4cSkpCiAJCWlm
ICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhxLCByeF9yaW5nLT5uZXRkZXYsCi0J
CQkJICAgICByeF9yaW5nLT5xX2luZGV4KSkKKwkJCQkgICAgIHJ4X3JpbmctPnFfaW5kZXgsIHJ4
X3JpbmctPnFfdmVjdG9yLT5uYXBpLm5hcGlfaWQpKQogCQkJZ290byBlcnI7CiAJcmV0dXJuIDA7
CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2lnYi9pZ2JfbWFpbi5j
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWdiL2lnYl9tYWluLmMKaW5kZXggNWZjMmMz
ODFkYTU1Li42YTRlZjQ5MzRmY2YgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2lu
dGVsL2lnYi9pZ2JfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2lnYi9p
Z2JfbWFpbi5jCkBAIC00MzUyLDcgKzQzNTIsNyBAQCBpbnQgaWdiX3NldHVwX3J4X3Jlc291cmNl
cyhzdHJ1Y3QgaWdiX3JpbmcgKnJ4X3JpbmcpCiAKIAkvKiBYRFAgUlgtcXVldWUgaW5mbyAqLwog
CWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhxLCByeF9yaW5nLT5uZXRkZXYs
Ci0JCQkgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4KSA8IDApCisJCQkgICAgIHJ4X3JpbmctPnF1
ZXVlX2luZGV4LCAwKSA8IDApCiAJCWdvdG8gZXJyOwogCiAJcmV0dXJuIDA7CmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMgYi9kcml2ZXJz
L25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMKaW5kZXggNDVhZTMzZTE1MzAz
Li41MGU2YjhiNmJhN2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4
Z2JlL2l4Z2JlX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9p
eGdiZV9tYWluLmMKQEAgLTY1NzcsNyArNjU3Nyw3IEBAIGludCBpeGdiZV9zZXR1cF9yeF9yZXNv
dXJjZXMoc3RydWN0IGl4Z2JlX2FkYXB0ZXIgKmFkYXB0ZXIsCiAKIAkvKiBYRFAgUlgtcXVldWUg
aW5mbyAqLwogCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhxLCBhZGFwdGVy
LT5uZXRkZXYsCi0JCQkgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4KSA8IDApCisJCQkgICAgIHJ4
X3JpbmctPnF1ZXVlX2luZGV4LCByeF9yaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKSA8IDAp
CiAJCWdvdG8gZXJyOwogCiAJcnhfcmluZy0+eGRwX3Byb2cgPSBhZGFwdGVyLT54ZHBfcHJvZzsK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4Z2JldmYvaXhnYmV2Zl9t
YWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZXZmL2l4Z2JldmZfbWFpbi5j
CmluZGV4IDgyZmNlMjdmNjgyYi4uNDA2MWNkN2RiNWRkIDEwMDY0NAotLS0gYS9kcml2ZXJzL25l
dC9ldGhlcm5ldC9pbnRlbC9peGdiZXZmL2l4Z2JldmZfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2ludGVsL2l4Z2JldmYvaXhnYmV2Zl9tYWluLmMKQEAgLTM0OTMsNyArMzQ5Myw3
IEBAIGludCBpeGdiZXZmX3NldHVwX3J4X3Jlc291cmNlcyhzdHJ1Y3QgaXhnYmV2Zl9hZGFwdGVy
ICphZGFwdGVyLAogCiAJLyogWERQIFJYLXF1ZXVlIGluZm8gKi8KIAlpZiAoeGRwX3J4cV9pbmZv
X3JlZygmcnhfcmluZy0+eGRwX3J4cSwgYWRhcHRlci0+bmV0ZGV2LAotCQkJICAgICByeF9yaW5n
LT5xdWV1ZV9pbmRleCkgPCAwKQorCQkJICAgICByeF9yaW5nLT5xdWV1ZV9pbmRleCwgMCkgPCAw
KQogCQlnb3RvIGVycjsKIAogCXJ4X3JpbmctPnhkcF9wcm9nID0gYWRhcHRlci0+eGRwX3Byb2c7
CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYwppbmRleCA1NGIwYmY1NzRjMDUuLjdk
MDA5OGY0ZWY5ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5l
dGEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5jCkBAIC0zMjE5
LDcgKzMyMTksNyBAQCBzdGF0aWMgaW50IG12bmV0YV9jcmVhdGVfcGFnZV9wb29sKHN0cnVjdCBt
dm5ldGFfcG9ydCAqcHAsCiAJCXJldHVybiBlcnI7CiAJfQogCi0JZXJyID0geGRwX3J4cV9pbmZv
X3JlZygmcnhxLT54ZHBfcnhxLCBwcC0+ZGV2LCByeHEtPmlkKTsKKwllcnIgPSB4ZHBfcnhxX2lu
Zm9fcmVnKCZyeHEtPnhkcF9yeHEsIHBwLT5kZXYsIHJ4cS0+aWQsIDApOwogCWlmIChlcnIgPCAw
KQogCQlnb3RvIGVycl9mcmVlX3BwOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZl
bGwvbXZwcDIvbXZwcDJfbWFpbi5jCmluZGV4IGY2NjE2Yzg5MzNjYS4uZmY4NzI5YjZjNDE0IDEw
MDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4u
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4uYwpA
QCAtMjYwNiwxMSArMjYwNiwxMSBAQCBzdGF0aWMgaW50IG12cHAyX3J4cV9pbml0KHN0cnVjdCBt
dnBwMl9wb3J0ICpwb3J0LAogCW12cHAyX3J4cV9zdGF0dXNfdXBkYXRlKHBvcnQsIHJ4cS0+aWQs
IDAsIHJ4cS0+c2l6ZSk7CiAKIAlpZiAocHJpdi0+cGVyY3B1X3Bvb2xzKSB7Ci0JCWVyciA9IHhk
cF9yeHFfaW5mb19yZWcoJnJ4cS0+eGRwX3J4cV9zaG9ydCwgcG9ydC0+ZGV2LCByeHEtPmlkKTsK
KwkJZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnhxLT54ZHBfcnhxX3Nob3J0LCBwb3J0LT5kZXYs
IHJ4cS0+aWQsIDApOwogCQlpZiAoZXJyIDwgMCkKIAkJCWdvdG8gZXJyX2ZyZWVfZG1hOwogCi0J
CWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4cS0+eGRwX3J4cV9sb25nLCBwb3J0LT5kZXYsIHJ4
cS0+aWQpOworCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZyeHEtPnhkcF9yeHFfbG9uZywgcG9y
dC0+ZGV2LCByeHEtPmlkLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJCQlnb3RvIGVycl91bnJlZ2lz
dGVyX3J4cV9zaG9ydDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFu
b3gvbWx4NC9lbl9yeC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NC9lbl9y
eC5jCmluZGV4IDUwMmQxYjk3ODU1Yy4uZjU2MTk3OWU1NzMxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg0L2VuX3J4LmMKKysrIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvbWVsbGFub3gvbWx4NC9lbl9yeC5jCkBAIC0yODMsNyArMjgzLDcgQEAgaW50IG1seDRf
ZW5fY3JlYXRlX3J4X3Jpbmcoc3RydWN0IG1seDRfZW5fcHJpdiAqcHJpdiwKIAlyaW5nLT5sb2df
c3RyaWRlID0gZmZzKHJpbmctPnN0cmlkZSkgLSAxOwogCXJpbmctPmJ1Zl9zaXplID0gcmluZy0+
c2l6ZSAqIHJpbmctPnN0cmlkZSArIFRYQkJfU0laRTsKIAotCWlmICh4ZHBfcnhxX2luZm9fcmVn
KCZyaW5nLT54ZHBfcnhxLCBwcml2LT5kZXYsIHF1ZXVlX2luZGV4KSA8IDApCisJaWYgKHhkcF9y
eHFfaW5mb19yZWcoJnJpbmctPnhkcF9yeHEsIHByaXYtPmRldiwgcXVldWVfaW5kZXgsIDApIDwg
MCkKIAkJZ290byBlcnJfcmluZzsKIAogCXRtcCA9IHNpemUgKiByb3VuZHVwX3Bvd19vZl90d28o
TUxYNF9FTl9NQVhfUlhfRlJBR1MgKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
bWVsbGFub3gvbWx4NS9jb3JlL2VuX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxh
bm94L21seDUvY29yZS9lbl9tYWluLmMKaW5kZXggYjNmMDJhYWM3ZjI2Li4zZTdlY2Q3ZjAyOTAg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDUvY29yZS9lbl9t
YWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NS9jb3JlL2VuX21h
aW4uYwpAQCAtNDM0LDcgKzQzNCw3IEBAIHN0YXRpYyBpbnQgbWx4NWVfYWxsb2NfcnEoc3RydWN0
IG1seDVlX2NoYW5uZWwgKmMsCiAJcnFfeGRwX2l4ID0gcnEtPml4OwogCWlmICh4c2spCiAJCXJx
X3hkcF9peCArPSBwYXJhbXMtPm51bV9jaGFubmVscyAqIE1MWDVFX1JRX0dST1VQX1hTSzsKLQll
cnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwgcnEtPm5ldGRldiwgcnFfeGRwX2l4
KTsKKwllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwgcnEtPm5ldGRldiwgcnFf
eGRwX2l4LCAwKTsKIAlpZiAoZXJyIDwgMCkKIAkJZ290byBlcnJfcnFfeGRwX3Byb2c7CiAKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9jb21t
b24uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9jb21tb24u
YwppbmRleCBiMTUwZGE0M2FkYjIuLmI0YWNmMmY0MWU4NCAxMDA2NDQKLS0tIGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvbmV0cm9ub21lL25mcC9uZnBfbmV0X2NvbW1vbi5jCisrKyBiL2RyaXZlcnMv
bmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9jb21tb24uYwpAQCAtMjUzMyw3ICsy
NTMzLDcgQEAgbmZwX25ldF9yeF9yaW5nX2FsbG9jKHN0cnVjdCBuZnBfbmV0X2RwICpkcCwgc3Ry
dWN0IG5mcF9uZXRfcnhfcmluZyAqcnhfcmluZykKIAogCWlmIChkcC0+bmV0ZGV2KSB7CiAJCWVy
ciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIGRwLT5uZXRkZXYsCi0JCQkJ
ICAgICAgIHJ4X3JpbmctPmlkeCk7CisJCQkJICAgICAgIHJ4X3JpbmctPmlkeCwgcnhfcmluZy0+
cl92ZWMtPm5hcGkubmFwaV9pZCk7CiAJCWlmIChlcnIgPCAwKQogCQkJcmV0dXJuIGVycjsKIAl9
CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4u
YyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Fsb2dpYy9xZWRlL3FlZGVfbWFpbi5jCmluZGV4IDA1
ZTNhM2I2MDI2OS4uYjczZTk1MzI5YWNkIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9xbG9naWMvcWVkZS9xZWRlX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9xbG9n
aWMvcWVkZS9xZWRlX21haW4uYwpAQCAtMTc2Miw3ICsxNzYyLDcgQEAgc3RhdGljIHZvaWQgcWVk
ZV9pbml0X2ZwKHN0cnVjdCBxZWRlX2RldiAqZWRldikKIAogCQkJLyogRHJpdmVyIGhhdmUgbm8g
ZXJyb3IgcGF0aCBmcm9tIGhlcmUgKi8KIAkJCVdBUk5fT04oeGRwX3J4cV9pbmZvX3JlZygmZnAt
PnJ4cS0+eGRwX3J4cSwgZWRldi0+bmRldiwKLQkJCQkJCSBmcC0+cnhxLT5yeHFfaWQpIDwgMCk7
CisJCQkJCQkgZnAtPnJ4cS0+cnhxX2lkLiAwKSA8IDApOwogCiAJCQlpZiAoeGRwX3J4cV9pbmZv
X3JlZ19tZW1fbW9kZWwoJmZwLT5yeHEtPnhkcF9yeHEsCiAJCQkJCQkgICAgICAgTUVNX1RZUEVf
UEFHRV9PUkRFUjAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29t
bW9uLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29tbW9uLmMKaW5kZXggMTljZjdj
YWMxZTZlLi42OGZjN2QzMTc2OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Nm
Yy9yeF9jb21tb24uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29tbW9uLmMK
QEAgLTI2Miw3ICsyNjIsNyBAQCB2b2lkIGVmeF9pbml0X3J4X3F1ZXVlKHN0cnVjdCBlZnhfcnhf
cXVldWUgKnJ4X3F1ZXVlKQogCiAJLyogSW5pdGlhbGlzZSBYRFAgcXVldWUgaW5mb3JtYXRpb24g
Ki8KIAlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3F1ZXVlLT54ZHBfcnhxX2luZm8sIGVmeC0+
bmV0X2RldiwKLQkJCSAgICAgIHJ4X3F1ZXVlLT5jb3JlX2luZGV4KTsKKwkJCSAgICAgIHJ4X3F1
ZXVlLT5jb3JlX2luZGV4LCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIoZWZ4LCByeF9l
cnIsIGVmeC0+bmV0X2RldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lv
bmV4dC9uZXRzZWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lvbmV4dC9uZXRzZWMuYwpp
bmRleCAxNTAzY2M5ZWM2ZTIuLjgwYWIyNDY1OGU4NyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvc29jaW9uZXh0L25ldHNlYy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Nv
Y2lvbmV4dC9uZXRzZWMuYwpAQCAtMTMwNCw3ICsxMzA0LDcgQEAgc3RhdGljIGludCBuZXRzZWNf
c2V0dXBfcnhfZHJpbmcoc3RydWN0IG5ldHNlY19wcml2ICpwcml2KQogCQlnb3RvIGVycl9vdXQ7
CiAJfQogCi0JZXJyID0geGRwX3J4cV9pbmZvX3JlZygmZHJpbmctPnhkcF9yeHEsIHByaXYtPm5k
ZXYsIDApOworCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJmRyaW5nLT54ZHBfcnhxLCBwcml2LT5u
ZGV2LCAwLCAwKTsKIAlpZiAoZXJyKQogCQlnb3RvIGVycl9vdXQ7CiAKZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
dGkvY3Bzd19wcml2LmMKaW5kZXggNTFjYzI5ZjM5MDM4Li5kOGYyODdjODhkNzcgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCisrKyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCkBAIC0xMTg5LDcgKzExODksNyBAQCBzdGF0aWMgaW50
IGNwc3dfbmRldl9jcmVhdGVfeGRwX3J4cShzdHJ1Y3QgY3Bzd19wcml2ICpwcml2LCBpbnQgY2gp
CiAJcG9vbCA9IGNwc3ctPnBhZ2VfcG9vbFtjaF07CiAJcnhxID0gJnByaXYtPnhkcF9yeHFbY2hd
OwogCi0JcmV0ID0geGRwX3J4cV9pbmZvX3JlZyhyeHEsIHByaXYtPm5kZXYsIGNoKTsKKwlyZXQg
PSB4ZHBfcnhxX2luZm9fcmVnKHJ4cSwgcHJpdi0+bmRldiwgY2gsIDApOwogCWlmIChyZXQpCiAJ
CXJldHVybiByZXQ7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYyBi
L2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYwppbmRleCAwYzNkZTk0YjUxNzguLmZhODM0MWY4
MzU5YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvaHlwZXJ2L25ldHZzYy5jCisrKyBiL2RyaXZl
cnMvbmV0L2h5cGVydi9uZXR2c2MuYwpAQCAtMTQ5OSw3ICsxNDk5LDcgQEAgc3RydWN0IG5ldHZz
Y19kZXZpY2UgKm5ldHZzY19kZXZpY2VfYWRkKHN0cnVjdCBodl9kZXZpY2UgKmRldmljZSwKIAkJ
dTY0X3N0YXRzX2luaXQoJm52Y2hhbi0+dHhfc3RhdHMuc3luY3ApOwogCQl1NjRfc3RhdHNfaW5p
dCgmbnZjaGFuLT5yeF9zdGF0cy5zeW5jcCk7CiAKLQkJcmV0ID0geGRwX3J4cV9pbmZvX3JlZygm
bnZjaGFuLT54ZHBfcnhxLCBuZGV2LCBpKTsKKwkJcmV0ID0geGRwX3J4cV9pbmZvX3JlZygmbnZj
aGFuLT54ZHBfcnhxLCBuZGV2LCBpLCAwKTsKIAogCQlpZiAocmV0KSB7CiAJCQluZXRkZXZfZXJy
KG5kZXYsICJ4ZHBfcnhxX2luZm9fcmVnIGZhaWw6ICVkXG4iLCByZXQpOwpkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvdHVuLmMgYi9kcml2ZXJzL25ldC90dW4uYwppbmRleCBiZTY5ZDI3MjA1MmYu
LmYyNTQxZDY0NTcwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvdHVuLmMKKysrIGIvZHJpdmVy
cy9uZXQvdHVuLmMKQEAgLTc5MSw3ICs3OTEsNyBAQCBzdGF0aWMgaW50IHR1bl9hdHRhY2goc3Ry
dWN0IHR1bl9zdHJ1Y3QgKnR1biwgc3RydWN0IGZpbGUgKmZpbGUsCiAJfSBlbHNlIHsKIAkJLyog
U2V0dXAgWERQIFJYLXF1ZXVlIGluZm8sIGZvciBuZXcgdGZpbGUgZ2V0dGluZyBhdHRhY2hlZCAq
LwogCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZ0ZmlsZS0+eGRwX3J4cSwKLQkJCQkgICAgICAg
dHVuLT5kZXYsIHRmaWxlLT5xdWV1ZV9pbmRleCk7CisJCQkJICAgICAgIHR1bi0+ZGV2LCB0Zmls
ZS0+cXVldWVfaW5kZXgsIDApOwogCQlpZiAoZXJyIDwgMCkKIAkJCWdvdG8gb3V0OwogCQllcnIg
PSB4ZHBfcnhxX2luZm9fcmVnX21lbV9tb2RlbCgmdGZpbGUtPnhkcF9yeHEsCmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC92ZXRoLmMgYi9kcml2ZXJzL25ldC92ZXRoLmMKaW5kZXggOGM3Mzc2Njgw
MDhhLi4wNGQyMGU5ZDg0MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L3ZldGguYworKysgYi9k
cml2ZXJzL25ldC92ZXRoLmMKQEAgLTkyNiw3ICs5MjYsNyBAQCBzdGF0aWMgaW50IHZldGhfZW5h
YmxlX3hkcChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQogCQlmb3IgKGkgPSAwOyBpIDwgZGV2LT5y
ZWFsX251bV9yeF9xdWV1ZXM7IGkrKykgewogCQkJc3RydWN0IHZldGhfcnEgKnJxID0gJnByaXYt
PnJxW2ldOwogCi0JCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwgZGV2LCBp
KTsKKwkJCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJxLT54ZHBfcnhxLCBkZXYsIGksIDApOwog
CQkJaWYgKGVyciA8IDApCiAJCQkJZ290byBlcnJfcnhxX3JlZzsKIApkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvdmlydGlvX25ldC5jIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jCmluZGV4IDIx
YjcxMTQ4YzUzMi4uZDcxZmU0MTU5NWI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC92aXJ0aW9f
bmV0LmMKKysrIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jCkBAIC0xNDg1LDcgKzE0ODUsNyBA
QCBzdGF0aWMgaW50IHZpcnRuZXRfb3BlbihzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQogCQkJaWYg
KCF0cnlfZmlsbF9yZWN2KHZpLCAmdmktPnJxW2ldLCBHRlBfS0VSTkVMKSkKIAkJCQlzY2hlZHVs
ZV9kZWxheWVkX3dvcmsoJnZpLT5yZWZpbGwsIDApOwogCi0JCWVyciA9IHhkcF9yeHFfaW5mb19y
ZWcoJnZpLT5ycVtpXS54ZHBfcnhxLCBkZXYsIGkpOworCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVn
KCZ2aS0+cnFbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJCQlyZXR1
cm4gZXJyOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYyBiL2RyaXZl
cnMvbmV0L3hlbi1uZXRmcm9udC5jCmluZGV4IDNlOTg5NWJlYzE1Zi4uMjg3MTRhNDhmNWQwIDEw
MDY0NAotLS0gYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYworKysgYi9kcml2ZXJzL25ldC94
ZW4tbmV0ZnJvbnQuYwpAQCAtMjAxNCw3ICsyMDE0LDcgQEAgc3RhdGljIGludCB4ZW5uZXRfY3Jl
YXRlX3BhZ2VfcG9vbChzdHJ1Y3QgbmV0ZnJvbnRfcXVldWUgKnF1ZXVlKQogCX0KIAogCWVyciA9
IHhkcF9yeHFfaW5mb19yZWcoJnF1ZXVlLT54ZHBfcnhxLCBxdWV1ZS0+aW5mby0+bmV0ZGV2LAot
CQkJICAgICAgIHF1ZXVlLT5pZCk7CisJCQkgICAgICAgcXVldWUtPmlkLCAwKTsKIAlpZiAoZXJy
KSB7CiAJCW5ldGRldl9lcnIocXVldWUtPmluZm8tPm5ldGRldiwgInhkcF9yeHFfaW5mb19yZWcg
ZmFpbGVkXG4iKTsKIAkJZ290byBlcnJfZnJlZV9wcDsKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0
L2J1c3lfcG9sbC5oIGIvaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmgKaW5kZXggYjRmNjUzY2MxNWE3
Li4yZGQ4YzJjOTBjMGMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5oCisrKyBi
L2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5oCkBAIC0xMzUsMTQgKzEzNSwyNSBAQCBzdGF0aWMgaW5s
aW5lIHZvaWQgc2tfbWFya19uYXBpX2lkKHN0cnVjdCBzb2NrICpzaywgY29uc3Qgc3RydWN0IHNr
X2J1ZmYgKnNrYikKIAlza19yeF9xdWV1ZV9zZXQoc2ssIHNrYik7CiB9CiAKLS8qIHZhcmlhbnQg
dXNlZCBmb3IgdW5jb25uZWN0ZWQgc29ja2V0cyAqLwotc3RhdGljIGlubGluZSB2b2lkIHNrX21h
cmtfbmFwaV9pZF9vbmNlKHN0cnVjdCBzb2NrICpzaywKLQkJCQkJY29uc3Qgc3RydWN0IHNrX2J1
ZmYgKnNrYikKK3N0YXRpYyBpbmxpbmUgdm9pZCBfX3NrX21hcmtfbmFwaV9pZF9vbmNlX3hkcChz
dHJ1Y3Qgc29jayAqc2ssIHVuc2lnbmVkIGludCBuYXBpX2lkKQogewogI2lmZGVmIENPTkZJR19O
RVRfUlhfQlVTWV9QT0xMCiAJaWYgKCFSRUFEX09OQ0Uoc2stPnNrX25hcGlfaWQpKQotCQlXUklU
RV9PTkNFKHNrLT5za19uYXBpX2lkLCBza2ItPm5hcGlfaWQpOworCQlXUklURV9PTkNFKHNrLT5z
a19uYXBpX2lkLCBuYXBpX2lkKTsKICNlbmRpZgogfQogCisvKiB2YXJpYW50IHVzZWQgZm9yIHVu
Y29ubmVjdGVkIHNvY2tldHMgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZCBza19tYXJrX25hcGlfaWRf
b25jZShzdHJ1Y3Qgc29jayAqc2ssCisJCQkJCWNvbnN0IHN0cnVjdCBza19idWZmICpza2IpCit7
CisJX19za19tYXJrX25hcGlfaWRfb25jZV94ZHAoc2ssIHNrYi0+bmFwaV9pZCk7Cit9CisKK3N0
YXRpYyBpbmxpbmUgdm9pZCBza19tYXJrX25hcGlfaWRfb25jZV94ZHAoc3RydWN0IHNvY2sgKnNr
LAorCQkJCQkgICAgY29uc3Qgc3RydWN0IHhkcF9idWZmICp4ZHApCit7CisJX19za19tYXJrX25h
cGlfaWRfb25jZV94ZHAoc2ssIHhkcC0+cnhxLT5uYXBpX2lkKTsKK30KKwogI2VuZGlmIC8qIF9M
SU5VWF9ORVRfQlVTWV9QT0xMX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0L3hkcC5oIGIv
aW5jbHVkZS9uZXQveGRwLmgKaW5kZXggMzgxNGZiNjMxZDUyLi40ZDQyNTVhOTQ3NzMgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUvbmV0L3hkcC5oCisrKyBiL2luY2x1ZGUvbmV0L3hkcC5oCkBAIC01OSw2
ICs1OSw3IEBAIHN0cnVjdCB4ZHBfcnhxX2luZm8gewogCXUzMiBxdWV1ZV9pbmRleDsKIAl1MzIg
cmVnX3N0YXRlOwogCXN0cnVjdCB4ZHBfbWVtX2luZm8gbWVtOworCXVuc2lnbmVkIGludCBuYXBp
X2lkOwogfSBfX19fY2FjaGVsaW5lX2FsaWduZWQ7IC8qIHBlcmYgY3JpdGljYWwsIGF2b2lkIGZh
bHNlLXNoYXJpbmcgKi8KIAogc3RydWN0IHhkcF90eHFfaW5mbyB7CkBAIC0yMTEsNyArMjEyLDcg
QEAgc3RhdGljIGlubGluZSB2b2lkIHhkcF9yZWxlYXNlX2ZyYW1lKHN0cnVjdCB4ZHBfZnJhbWUg
KnhkcGYpCiB9CiAKIGludCB4ZHBfcnhxX2luZm9fcmVnKHN0cnVjdCB4ZHBfcnhxX2luZm8gKnhk
cF9yeHEsCi0JCSAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgdTMyIHF1ZXVlX2luZGV4KTsK
KwkJICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgsIHVuc2lnbmVk
IGludCBuYXBpX2lkKTsKIHZvaWQgeGRwX3J4cV9pbmZvX3VucmVnKHN0cnVjdCB4ZHBfcnhxX2lu
Zm8gKnhkcF9yeHEpOwogdm9pZCB4ZHBfcnhxX2luZm9fdW51c2VkKHN0cnVjdCB4ZHBfcnhxX2lu
Zm8gKnhkcF9yeHEpOwogYm9vbCB4ZHBfcnhxX2luZm9faXNfcmVnKHN0cnVjdCB4ZHBfcnhxX2lu
Zm8gKnhkcF9yeHEpOwpkaWZmIC0tZ2l0IGEvbmV0L2NvcmUvZGV2LmMgYi9uZXQvY29yZS9kZXYu
YwppbmRleCAzM2M2NzAwNGYyYWQuLjY2MzVjOTI5MzViYyAxMDA2NDQKLS0tIGEvbmV0L2NvcmUv
ZGV2LmMKKysrIGIvbmV0L2NvcmUvZGV2LmMKQEAgLTk4MDYsNyArOTgwNiw3IEBAIHN0YXRpYyBp
bnQgbmV0aWZfYWxsb2NfcnhfcXVldWVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpCiAJCXJ4W2ld
LmRldiA9IGRldjsKIAogCQkvKiBYRFAgUlgtcXVldWUgc2V0dXAgKi8KLQkJZXJyID0geGRwX3J4
cV9pbmZvX3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpKTsKKwkJZXJyID0geGRwX3J4cV9pbmZv
X3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJCQlnb3Rv
IGVycl9yeHFfaW5mbzsKIAl9CmRpZmYgLS1naXQgYS9uZXQvY29yZS94ZHAuYyBiL25ldC9jb3Jl
L3hkcC5jCmluZGV4IDQ4YWJhOTMzYTVhOC4uN2NjYTdjYjViNjVmIDEwMDY0NAotLS0gYS9uZXQv
Y29yZS94ZHAuYworKysgYi9uZXQvY29yZS94ZHAuYwpAQCAtMTU4LDcgKzE1OCw3IEBAIHN0YXRp
YyB2b2lkIHhkcF9yeHFfaW5mb19pbml0KHN0cnVjdCB4ZHBfcnhxX2luZm8gKnhkcF9yeHEpCiAK
IC8qIFJldHVybnMgMCBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBvbiBmYWlsdXJlICovCiBpbnQgeGRw
X3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBfcnhxLAotCQkgICAgIHN0cnVj
dCBuZXRfZGV2aWNlICpkZXYsIHUzMiBxdWV1ZV9pbmRleCkKKwkJICAgICBzdHJ1Y3QgbmV0X2Rl
dmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgsIHVuc2lnbmVkIGludCBuYXBpX2lkKQogewogCWlm
ICh4ZHBfcnhxLT5yZWdfc3RhdGUgPT0gUkVHX1NUQVRFX1VOVVNFRCkgewogCQlXQVJOKDEsICJE
cml2ZXIgcHJvbWlzZWQgbm90IHRvIHJlZ2lzdGVyIHRoaXMiKTsKQEAgLTE3OSw2ICsxNzksNyBA
QCBpbnQgeGRwX3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBfcnhxLAogCXhk
cF9yeHFfaW5mb19pbml0KHhkcF9yeHEpOwogCXhkcF9yeHEtPmRldiA9IGRldjsKIAl4ZHBfcnhx
LT5xdWV1ZV9pbmRleCA9IHF1ZXVlX2luZGV4OworCXhkcF9yeHEtPm5hcGlfaWQgPSBuYXBpX2lk
OwogCiAJeGRwX3J4cS0+cmVnX3N0YXRlID0gUkVHX1NUQVRFX1JFR0lTVEVSRUQ7CiAJcmV0dXJu
IDA7CmRpZmYgLS1naXQgYS9uZXQveGRwL3hzay5jIGIvbmV0L3hkcC94c2suYwppbmRleCBkYTY0
OWI0ZjM3N2MuLjBiODI1NjEyZDg5NSAxMDA2NDQKLS0tIGEvbmV0L3hkcC94c2suYworKysgYi9u
ZXQveGRwL3hzay5jCkBAIC0yMzMsNiArMjMzLDcgQEAgc3RhdGljIGludCB4c2tfcmN2KHN0cnVj
dCB4ZHBfc29jayAqeHMsIHN0cnVjdCB4ZHBfYnVmZiAqeGRwLAogCWlmICh4cy0+ZGV2ICE9IHhk
cC0+cnhxLT5kZXYgfHwgeHMtPnF1ZXVlX2lkICE9IHhkcC0+cnhxLT5xdWV1ZV9pbmRleCkKIAkJ
cmV0dXJuIC1FSU5WQUw7CiAKKwlza19tYXJrX25hcGlfaWRfb25jZV94ZHAoJnhzLT5zaywgeGRw
KTsKIAlsZW4gPSB4ZHAtPmRhdGFfZW5kIC0geGRwLT5kYXRhOwogCiAJcmV0dXJuIHhkcC0+cnhx
LT5tZW0udHlwZSA9PSBNRU1fVFlQRV9YU0tfQlVGRl9QT09MID8KLS0gCjIuMjcuMAoKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwtd2lyZWQtbGFu
IG1haWxpbmcgbGlzdApJbnRlbC13aXJlZC1sYW5Ab3N1b3NsLm9yZwpodHRwczovL2xpc3RzLm9z
dW9zbC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC13aXJlZC1sYW4K
