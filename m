Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 07DA72A7BBC
	for <lists+intel-wired-lan@lfdr.de>; Thu,  5 Nov 2020 11:28:51 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by fraxinus.osuosl.org (Postfix) with ESMTP id C108785725;
	Thu,  5 Nov 2020 10:28:49 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 91XtnUYl3Cbb; Thu,  5 Nov 2020 10:28:48 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by fraxinus.osuosl.org (Postfix) with ESMTP id 2755185754;
	Thu,  5 Nov 2020 10:28:48 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
 by ash.osuosl.org (Postfix) with ESMTP id B96181BF59A
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:45 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by fraxinus.osuosl.org (Postfix) with ESMTP id B553885742
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:45 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id bEPhjC7RQ0_x for <intel-wired-lan@lists.osuosl.org>;
 Thu,  5 Nov 2020 10:28:44 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pg1-f195.google.com (mail-pg1-f195.google.com
 [209.85.215.195])
 by fraxinus.osuosl.org (Postfix) with ESMTPS id C3FA285725
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:44 +0000 (UTC)
Received: by mail-pg1-f195.google.com with SMTP id g12so1111957pgm.8
 for <intel-wired-lan@lists.osuosl.org>; Thu, 05 Nov 2020 02:28:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=JDjKkrZHW9cU8J1KikSg6JLqEf+0NjFDlMbUYIB+L5o=;
 b=ml7iUbWntQ1dzscKW1jJITjeT+MdFk/5IJajRteRRYNpKloP3r//Wx+FpgUo7frs+W
 A6nWxFkwMpoVgaG15+S34wFjGgUiET3bShzZjZ8Dlk3QczVSS9so5DhfFIv0u7htPf3h
 pbHp1/32uFkVyil52y2YIoZIWIS+pFC/8TWVcRoasiKcUZQbLDN/5I72jD3R2yyimCWZ
 Xs7WYaV+jIJ+ESL9oOsAFpxAOwC1X8AwXHyX0QGNJIR/zKNZx+yWkymxinENamy97d+1
 vpxcArk39PLqL7MhAxWbq/Ugp/oRfSEvrMPh/BLymFc7MFuTA5CZncjCdn5jGXxZwLV4
 zp7w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=JDjKkrZHW9cU8J1KikSg6JLqEf+0NjFDlMbUYIB+L5o=;
 b=rQiS4f5cZB+Szn+rdDYtq041qf6vQtLeGhcd7kRjNqViHzITpGmuYF0fGQEyF/FiTw
 OG46K6Ayn105D8lEy18KfdI77BevpIDDIw7jRY3oQEbqLH6OnuV7YAUB0Lc5Qe2FVGpr
 YU/EPPzbtAdYdJ8MWmJlFHPGIFnW5VaidLYQOwSeTykyLcmjSJXmgzVYex0a0unyY2mF
 mHGkWpxa2N7jlnyz0YyyPHcvgKEjS/sTCtvlJb9uqKHev9oXuH8BPEsAubqj5NPC3Sg3
 zUGuXf4bMSQGXimZT7mbRrmmVWwLSdVsAoMqql8KsYKxLjJi4HKnSYVkan7BTGdRyucu
 uXoA==
X-Gm-Message-State: AOAM5339HDhcaCFgagwAyn3vadOHDPAQAX2J49McK+xoaVsCkEnvSPhv
 7GqQuR1WeEBLF7YgBawRpIg=
X-Google-Smtp-Source: ABdhPJy3GziQjRgVuTCEetYlTSl9SAp7soBjlf3smeX1IxO5ylwRI0uM1790+wUXbZLCd5RMTfNTpg==
X-Received: by 2002:a63:cf15:: with SMTP id j21mr1737137pgg.116.1604572124399; 
 Thu, 05 Nov 2020 02:28:44 -0800 (PST)
Received: from btopel-mobl.ger.intel.com (fmdmzpr03-ext.fm.intel.com.
 [192.55.54.38])
 by smtp.gmail.com with ESMTPSA id 192sm2050117pfz.200.2020.11.05.02.28.38
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 05 Nov 2020 02:28:43 -0800 (PST)
From: =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@gmail.com>
To: netdev@vger.kernel.org,
	bpf@vger.kernel.org
Date: Thu,  5 Nov 2020 11:28:05 +0100
Message-Id: <20201105102812.152836-3-bjorn.topel@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201105102812.152836-1-bjorn.topel@gmail.com>
References: <20201105102812.152836-1-bjorn.topel@gmail.com>
MIME-Version: 1.0
Subject: [Intel-wired-lan] [RFC PATCH bpf-next v2 2/9] net: add
 SO_BUSY_POLL_BUDGET socket option
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: daniel@iogearbox.net, jonathan.lemon@gmail.com, ast@kernel.org,
 edumazet@google.com, intel-wired-lan@lists.osuosl.org, qi.z.zhang@intel.com,
 kuba@kernel.org, =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 magnus.karlsson@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RnJvbTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgoKVGhpcyBvcHRpb24g
bGV0cyBhIHVzZXIgc2V0IGEgcGVyIHNvY2tldCBOQVBJIGJ1ZGdldCBmb3IKYnVzeS1wb2xsaW5n
LiBJZiB0aGUgb3B0aW9ucyBpcyBub3Qgc2V0LCBpdCB3aWxsIHVzZSB0aGUgZGVmYXVsdCBvZiA4
LgoKU2lnbmVkLW9mZi1ieTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgot
LS0KIGFyY2gvYWxwaGEvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaCAgfCAgMSArCiBhcmNoL21p
cHMvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaCAgIHwgIDEgKwogYXJjaC9wYXJpc2MvaW5jbHVk
ZS91YXBpL2FzbS9zb2NrZXQuaCB8ICAxICsKIGFyY2gvc3BhcmMvaW5jbHVkZS91YXBpL2FzbS9z
b2NrZXQuaCAgfCAgMSArCiBmcy9ldmVudHBvbGwuYyAgICAgICAgICAgICAgICAgICAgICAgIHwg
IDMgKystCiBpbmNsdWRlL25ldC9idXN5X3BvbGwuaCAgICAgICAgICAgICAgIHwgIDcgKysrKyst
LQogaW5jbHVkZS9uZXQvc29jay5oICAgICAgICAgICAgICAgICAgICB8ICAxICsKIGluY2x1ZGUv
dWFwaS9hc20tZ2VuZXJpYy9zb2NrZXQuaCAgICAgfCAgMSArCiBuZXQvY29yZS9kZXYuYyAgICAg
ICAgICAgICAgICAgICAgICAgIHwgMjEgKysrKysrKysrKy0tLS0tLS0tLS0tCiBuZXQvY29yZS9z
b2NrLmMgICAgICAgICAgICAgICAgICAgICAgIHwgMTAgKysrKysrKysrKwogMTAgZmlsZXMgY2hh
bmdlZCwgMzMgaW5zZXJ0aW9ucygrKSwgMTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvYXJj
aC9hbHBoYS9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oIGIvYXJjaC9hbHBoYS9pbmNsdWRlL3Vh
cGkvYXNtL3NvY2tldC5oCmluZGV4IDUzODM1OTY0MjU1NC4uNTc0MjAzNTZjZTRjIDEwMDY0NAot
LS0gYS9hcmNoL2FscGhhL2luY2x1ZGUvdWFwaS9hc20vc29ja2V0LmgKKysrIGIvYXJjaC9hbHBo
YS9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCkBAIC0xMjUsNiArMTI1LDcgQEAKICNkZWZpbmUg
U09fREVUQUNIX1JFVVNFUE9SVF9CUEYgNjgKIAogI2RlZmluZSBTT19QUkVGRVJfQlVTWV9QT0xM
CTY5CisjZGVmaW5lIFNPX0JVU1lfUE9MTF9CVURHRVQJNzAKIAogI2lmICFkZWZpbmVkKF9fS0VS
TkVMX18pCiAKZGlmZiAtLWdpdCBhL2FyY2gvbWlwcy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5o
IGIvYXJjaC9taXBzL2luY2x1ZGUvdWFwaS9hc20vc29ja2V0LmgKaW5kZXggZTQwNmU3M2I1ZTZl
Li4yZDk0OTk2OTMxM2IgMTAwNjQ0Ci0tLSBhL2FyY2gvbWlwcy9pbmNsdWRlL3VhcGkvYXNtL3Nv
Y2tldC5oCisrKyBiL2FyY2gvbWlwcy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCkBAIC0xMzYs
NiArMTM2LDcgQEAKICNkZWZpbmUgU09fREVUQUNIX1JFVVNFUE9SVF9CUEYgNjgKIAogI2RlZmlu
ZSBTT19QUkVGRVJfQlVTWV9QT0xMCTY5CisjZGVmaW5lIFNPX0JVU1lfUE9MTF9CVURHRVQJNzAK
IAogI2lmICFkZWZpbmVkKF9fS0VSTkVMX18pCiAKZGlmZiAtLWdpdCBhL2FyY2gvcGFyaXNjL2lu
Y2x1ZGUvdWFwaS9hc20vc29ja2V0LmggYi9hcmNoL3BhcmlzYy9pbmNsdWRlL3VhcGkvYXNtL3Nv
Y2tldC5oCmluZGV4IDFiYzQ2MjAwODg5ZC4uZjYwOTA0MzI5YmJjIDEwMDY0NAotLS0gYS9hcmNo
L3BhcmlzYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCisrKyBiL2FyY2gvcGFyaXNjL2luY2x1
ZGUvdWFwaS9hc20vc29ja2V0LmgKQEAgLTExNyw2ICsxMTcsNyBAQAogI2RlZmluZSBTT19ERVRB
Q0hfUkVVU0VQT1JUX0JQRiAweDQwNDIKIAogI2RlZmluZSBTT19QUkVGRVJfQlVTWV9QT0xMCTB4
NDA0MworI2RlZmluZSBTT19CVVNZX1BPTExfQlVER0VUCTB4NDA0NAogCiAjaWYgIWRlZmluZWQo
X19LRVJORUxfXykKIApkaWZmIC0tZ2l0IGEvYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3Nv
Y2tldC5oIGIvYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCmluZGV4IDk5Njg4
Y2Y2NzNhNC4uODQ4YTIyZmJhYzIwIDEwMDY0NAotLS0gYS9hcmNoL3NwYXJjL2luY2x1ZGUvdWFw
aS9hc20vc29ja2V0LmgKKysrIGIvYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5o
CkBAIC0xMTgsNiArMTE4LDcgQEAKICNkZWZpbmUgU09fREVUQUNIX1JFVVNFUE9SVF9CUEYgIDB4
MDA0NwogCiAjZGVmaW5lIFNPX1BSRUZFUl9CVVNZX1BPTEwJIDB4MDA0OAorI2RlZmluZSBTT19C
VVNZX1BPTExfQlVER0VUCSAweDAwNDkKIAogI2lmICFkZWZpbmVkKF9fS0VSTkVMX18pCiAKZGlm
ZiAtLWdpdCBhL2ZzL2V2ZW50cG9sbC5jIGIvZnMvZXZlbnRwb2xsLmMKaW5kZXggZTExZmFiM2Ew
YjllLi43M2MzNDZlNTAzZDcgMTAwNjQ0Ci0tLSBhL2ZzL2V2ZW50cG9sbC5jCisrKyBiL2ZzL2V2
ZW50cG9sbC5jCkBAIC0zOTcsNyArMzk3LDggQEAgc3RhdGljIHZvaWQgZXBfYnVzeV9sb29wKHN0
cnVjdCBldmVudHBvbGwgKmVwLCBpbnQgbm9uYmxvY2spCiAJdW5zaWduZWQgaW50IG5hcGlfaWQg
PSBSRUFEX09OQ0UoZXAtPm5hcGlfaWQpOwogCiAJaWYgKChuYXBpX2lkID49IE1JTl9OQVBJX0lE
KSAmJiBuZXRfYnVzeV9sb29wX29uKCkpCi0JCW5hcGlfYnVzeV9sb29wKG5hcGlfaWQsIG5vbmJs
b2NrID8gTlVMTCA6IGVwX2J1c3lfbG9vcF9lbmQsIGVwLCBmYWxzZSk7CisJCW5hcGlfYnVzeV9s
b29wKG5hcGlfaWQsIG5vbmJsb2NrID8gTlVMTCA6IGVwX2J1c3lfbG9vcF9lbmQsIGVwLCBmYWxz
ZSwKKwkJCSAgICAgICBCVVNZX1BPTExfQlVER0VUKTsKIH0KIAogc3RhdGljIGlubGluZSB2b2lk
IGVwX3Jlc2V0X2J1c3lfcG9sbF9uYXBpX2lkKHN0cnVjdCBldmVudHBvbGwgKmVwKQpkaWZmIC0t
Z2l0IGEvaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmggYi9pbmNsdWRlL25ldC9idXN5X3BvbGwuaApp
bmRleCAwMjkyYjgzNTNkN2UuLmI0ZjY1M2NjMTVhNyAxMDA2NDQKLS0tIGEvaW5jbHVkZS9uZXQv
YnVzeV9wb2xsLmgKKysrIGIvaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmgKQEAgLTIzLDYgKzIzLDgg
QEAKICAqLwogI2RlZmluZSBNSU5fTkFQSV9JRCAoKHVuc2lnbmVkIGludCkoTlJfQ1BVUyArIDEp
KQogCisjZGVmaW5lIEJVU1lfUE9MTF9CVURHRVQgOAorCiAjaWZkZWYgQ09ORklHX05FVF9SWF9C
VVNZX1BPTEwKIAogc3RydWN0IG5hcGlfc3RydWN0OwpAQCAtNDMsNyArNDUsNyBAQCBib29sIHNr
X2J1c3lfbG9vcF9lbmQodm9pZCAqcCwgdW5zaWduZWQgbG9uZyBzdGFydF90aW1lKTsKIAogdm9p
ZCBuYXBpX2J1c3lfbG9vcCh1bnNpZ25lZCBpbnQgbmFwaV9pZCwKIAkJICAgIGJvb2wgKCpsb29w
X2VuZCkodm9pZCAqLCB1bnNpZ25lZCBsb25nKSwKLQkJICAgIHZvaWQgKmxvb3BfZW5kX2FyZywg
Ym9vbCBwcmVmZXJfYnVzeV9wb2xsKTsKKwkJICAgIHZvaWQgKmxvb3BfZW5kX2FyZywgYm9vbCBw
cmVmZXJfYnVzeV9wb2xsLCB1MTYgYnVkZ2V0KTsKIAogI2Vsc2UgLyogQ09ORklHX05FVF9SWF9C
VVNZX1BPTEwgKi8KIHN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBuZXRfYnVzeV9sb29wX29u
KHZvaWQpCkBAIC0xMDYsNyArMTA4LDggQEAgc3RhdGljIGlubGluZSB2b2lkIHNrX2J1c3lfbG9v
cChzdHJ1Y3Qgc29jayAqc2ssIGludCBub25ibG9jaykKIAogCWlmIChuYXBpX2lkID49IE1JTl9O
QVBJX0lEKQogCQluYXBpX2J1c3lfbG9vcChuYXBpX2lkLCBub25ibG9jayA/IE5VTEwgOiBza19i
dXN5X2xvb3BfZW5kLCBzaywKLQkJCSAgICAgICBSRUFEX09OQ0Uoc2stPnNrX3ByZWZlcl9idXN5
X3BvbGwpKTsKKwkJCSAgICAgICBSRUFEX09OQ0Uoc2stPnNrX3ByZWZlcl9idXN5X3BvbGwpLAor
CQkJICAgICAgIHNrLT5za19idXN5X3BvbGxfYnVkZ2V0ID86IEJVU1lfUE9MTF9CVURHRVQpOwog
I2VuZGlmCiB9CiAKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0L3NvY2suaCBiL2luY2x1ZGUvbmV0
L3NvY2suaAppbmRleCA3MTY5NjBhMTVlODMuLjFkZGZiNGEyZGFjMiAxMDA2NDQKLS0tIGEvaW5j
bHVkZS9uZXQvc29jay5oCisrKyBiL2luY2x1ZGUvbmV0L3NvY2suaApAQCAtNDgxLDYgKzQ4MSw3
IEBAIHN0cnVjdCBzb2NrIHsKIAlrdWlkX3QJCQlza191aWQ7CiAjaWZkZWYgQ09ORklHX05FVF9S
WF9CVVNZX1BPTEwKIAl1OAkJCXNrX3ByZWZlcl9idXN5X3BvbGw7CisJdTE2CQkJc2tfYnVzeV9w
b2xsX2J1ZGdldDsKICNlbmRpZgogCXN0cnVjdCBwaWQJCSpza19wZWVyX3BpZDsKIAljb25zdCBz
dHJ1Y3QgY3JlZAkqc2tfcGVlcl9jcmVkOwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS91YXBpL2FzbS1n
ZW5lcmljL3NvY2tldC5oIGIvaW5jbHVkZS91YXBpL2FzbS1nZW5lcmljL3NvY2tldC5oCmluZGV4
IDdkZDAyNDA4YjdjZS4uNGRjZDEzZDA5N2E5IDEwMDY0NAotLS0gYS9pbmNsdWRlL3VhcGkvYXNt
LWdlbmVyaWMvc29ja2V0LmgKKysrIGIvaW5jbHVkZS91YXBpL2FzbS1nZW5lcmljL3NvY2tldC5o
CkBAIC0xMjAsNiArMTIwLDcgQEAKICNkZWZpbmUgU09fREVUQUNIX1JFVVNFUE9SVF9CUEYgNjgK
IAogI2RlZmluZSBTT19QUkVGRVJfQlVTWV9QT0xMCTY5CisjZGVmaW5lIFNPX0JVU1lfUE9MTF9C
VURHRVQJNzAKIAogI2lmICFkZWZpbmVkKF9fS0VSTkVMX18pCiAKZGlmZiAtLWdpdCBhL25ldC9j
b3JlL2Rldi5jIGIvbmV0L2NvcmUvZGV2LmMKaW5kZXggNDkwMTViMDU5NTQ5Li4zM2M2NzAwNGYy
YWQgMTAwNjQ0Ci0tLSBhL25ldC9jb3JlL2Rldi5jCisrKyBiL25ldC9jb3JlL2Rldi5jCkBAIC02
NDkyLDggKzY0OTIsNiBAQCBzdGF0aWMgc3RydWN0IG5hcGlfc3RydWN0ICpuYXBpX2J5X2lkKHVu
c2lnbmVkIGludCBuYXBpX2lkKQogCiAjaWYgZGVmaW5lZChDT05GSUdfTkVUX1JYX0JVU1lfUE9M
TCkKIAotI2RlZmluZSBCVVNZX1BPTExfQlVER0VUIDgKLQogc3RhdGljIHZvaWQgX19idXN5X3Bv
bGxfc3RvcChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksIGJvb2wgc2tpcF9zY2hlZHVsZSkKIHsK
IAlpZiAoIXNraXBfc2NoZWR1bGUpIHsKQEAgLTY1MTMsNyArNjUxMSw4IEBAIHN0YXRpYyB2b2lk
IF9fYnVzeV9wb2xsX3N0b3Aoc3RydWN0IG5hcGlfc3RydWN0ICpuYXBpLCBib29sIHNraXBfc2No
ZWR1bGUpCiAJY2xlYXJfYml0KE5BUElfU1RBVEVfU0NIRUQsICZuYXBpLT5zdGF0ZSk7CiB9CiAK
LXN0YXRpYyB2b2lkIGJ1c3lfcG9sbF9zdG9wKHN0cnVjdCBuYXBpX3N0cnVjdCAqbmFwaSwgdm9p
ZCAqaGF2ZV9wb2xsX2xvY2ssIGJvb2wgcHJlZmVyX2J1c3lfcG9sbCkKK3N0YXRpYyB2b2lkIGJ1
c3lfcG9sbF9zdG9wKHN0cnVjdCBuYXBpX3N0cnVjdCAqbmFwaSwgdm9pZCAqaGF2ZV9wb2xsX2xv
Y2ssIGJvb2wgcHJlZmVyX2J1c3lfcG9sbCwKKwkJCSAgIHUxNiBidWRnZXQpCiB7CiAJYm9vbCBz
a2lwX3NjaGVkdWxlID0gZmFsc2U7CiAJdW5zaWduZWQgbG9uZyB0aW1lb3V0OwpAQCAtNjU0NSwy
MSArNjU0NCwyMSBAQCBzdGF0aWMgdm9pZCBidXN5X3BvbGxfc3RvcChzdHJ1Y3QgbmFwaV9zdHJ1
Y3QgKm5hcGksIHZvaWQgKmhhdmVfcG9sbF9sb2NrLCBib29sCiAJLyogQWxsIHdlIHJlYWxseSB3
YW50IGhlcmUgaXMgdG8gcmUtZW5hYmxlIGRldmljZSBpbnRlcnJ1cHRzLgogCSAqIElkZWFsbHks
IGEgbmV3IG5kb19idXN5X3BvbGxfc3RvcCgpIGNvdWxkIGF2b2lkIGFub3RoZXIgcm91bmQuCiAJ
ICovCi0JcmMgPSBuYXBpLT5wb2xsKG5hcGksIEJVU1lfUE9MTF9CVURHRVQpOworCXJjID0gbmFw
aS0+cG9sbChuYXBpLCBidWRnZXQpOwogCS8qIFdlIGNhbid0IGdyb19ub3JtYWxfbGlzdCgpIGhl
cmUsIGJlY2F1c2UgbmFwaS0+cG9sbCgpIG1pZ2h0IGhhdmUKIAkgKiByZWFybWVkIHRoZSBuYXBp
IChuYXBpX2NvbXBsZXRlX2RvbmUoKSkgaW4gd2hpY2ggY2FzZSBpdCBjb3VsZAogCSAqIGFscmVh
ZHkgYmUgcnVubmluZyBvbiBhbm90aGVyIENQVS4KIAkgKi8KLQl0cmFjZV9uYXBpX3BvbGwobmFw
aSwgcmMsIEJVU1lfUE9MTF9CVURHRVQpOworCXRyYWNlX25hcGlfcG9sbChuYXBpLCByYywgYnVk
Z2V0KTsKIAluZXRwb2xsX3BvbGxfdW5sb2NrKGhhdmVfcG9sbF9sb2NrKTsKLQlpZiAocmMgPT0g
QlVTWV9QT0xMX0JVREdFVCkKKwlpZiAocmMgPT0gYnVkZ2V0KQogCQlfX2J1c3lfcG9sbF9zdG9w
KG5hcGksIHNraXBfc2NoZWR1bGUpOwogCWxvY2FsX2JoX2VuYWJsZSgpOwogfQogCiB2b2lkIG5h
cGlfYnVzeV9sb29wKHVuc2lnbmVkIGludCBuYXBpX2lkLAogCQkgICAgYm9vbCAoKmxvb3BfZW5k
KSh2b2lkICosIHVuc2lnbmVkIGxvbmcpLAotCQkgICAgdm9pZCAqbG9vcF9lbmRfYXJnLCBib29s
IHByZWZlcl9idXN5X3BvbGwpCisJCSAgICB2b2lkICpsb29wX2VuZF9hcmcsIGJvb2wgcHJlZmVy
X2J1c3lfcG9sbCwgdTE2IGJ1ZGdldCkKIHsKIAl1bnNpZ25lZCBsb25nIHN0YXJ0X3RpbWUgPSBs
b29wX2VuZCA/IGJ1c3lfbG9vcF9jdXJyZW50X3RpbWUoKSA6IDA7CiAJaW50ICgqbmFwaV9wb2xs
KShzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksIGludCBidWRnZXQpOwpAQCAtNjYwMiw4ICs2NjAx
LDggQEAgdm9pZCBuYXBpX2J1c3lfbG9vcCh1bnNpZ25lZCBpbnQgbmFwaV9pZCwKIAkJCWhhdmVf
cG9sbF9sb2NrID0gbmV0cG9sbF9wb2xsX2xvY2sobmFwaSk7CiAJCQluYXBpX3BvbGwgPSBuYXBp
LT5wb2xsOwogCQl9Ci0JCXdvcmsgPSBuYXBpX3BvbGwobmFwaSwgQlVTWV9QT0xMX0JVREdFVCk7
Ci0JCXRyYWNlX25hcGlfcG9sbChuYXBpLCB3b3JrLCBCVVNZX1BPTExfQlVER0VUKTsKKwkJd29y
ayA9IG5hcGlfcG9sbChuYXBpLCBidWRnZXQpOworCQl0cmFjZV9uYXBpX3BvbGwobmFwaSwgd29y
aywgYnVkZ2V0KTsKIAkJZ3JvX25vcm1hbF9saXN0KG5hcGkpOwogY291bnQ6CiAJCWlmICh3b3Jr
ID4gMCkKQEAgLTY2MTYsNyArNjYxNSw3IEBAIHZvaWQgbmFwaV9idXN5X2xvb3AodW5zaWduZWQg
aW50IG5hcGlfaWQsCiAKIAkJaWYgKHVubGlrZWx5KG5lZWRfcmVzY2hlZCgpKSkgewogCQkJaWYg
KG5hcGlfcG9sbCkKLQkJCQlidXN5X3BvbGxfc3RvcChuYXBpLCBoYXZlX3BvbGxfbG9jaywgcHJl
ZmVyX2J1c3lfcG9sbCk7CisJCQkJYnVzeV9wb2xsX3N0b3AobmFwaSwgaGF2ZV9wb2xsX2xvY2ss
IHByZWZlcl9idXN5X3BvbGwsIGJ1ZGdldCk7CiAJCQlwcmVlbXB0X2VuYWJsZSgpOwogCQkJcmN1
X3JlYWRfdW5sb2NrKCk7CiAJCQljb25kX3Jlc2NoZWQoKTsKQEAgLTY2MjcsNyArNjYyNiw3IEBA
IHZvaWQgbmFwaV9idXN5X2xvb3AodW5zaWduZWQgaW50IG5hcGlfaWQsCiAJCWNwdV9yZWxheCgp
OwogCX0KIAlpZiAobmFwaV9wb2xsKQotCQlidXN5X3BvbGxfc3RvcChuYXBpLCBoYXZlX3BvbGxf
bG9jaywgcHJlZmVyX2J1c3lfcG9sbCk7CisJCWJ1c3lfcG9sbF9zdG9wKG5hcGksIGhhdmVfcG9s
bF9sb2NrLCBwcmVmZXJfYnVzeV9wb2xsLCBidWRnZXQpOwogCXByZWVtcHRfZW5hYmxlKCk7CiBv
dXQ6CiAJcmN1X3JlYWRfdW5sb2NrKCk7CmRpZmYgLS1naXQgYS9uZXQvY29yZS9zb2NrLmMgYi9u
ZXQvY29yZS9zb2NrLmMKaW5kZXggMjQ4ZjZhNzYzNjYxLi5lMDhkNWE2YWU5ZDQgMTAwNjQ0Ci0t
LSBhL25ldC9jb3JlL3NvY2suYworKysgYi9uZXQvY29yZS9zb2NrLmMKQEAgLTExNjUsNiArMTE2
NSwxNiBAQCBpbnQgc29ja19zZXRzb2Nrb3B0KHN0cnVjdCBzb2NrZXQgKnNvY2ssIGludCBsZXZl
bCwgaW50IG9wdG5hbWUsCiAJCWVsc2UKIAkJCXNrLT5za19wcmVmZXJfYnVzeV9wb2xsID0gdmFs
Ym9vbDsKIAkJYnJlYWs7CisJY2FzZSBTT19CVVNZX1BPTExfQlVER0VUOgorCQlpZiAodmFsID4g
c2stPnNrX2J1c3lfcG9sbF9idWRnZXQgJiYgIWNhcGFibGUoQ0FQX05FVF9BRE1JTikpIHsKKwkJ
CXJldCA9IC1FUEVSTTsKKwkJfSBlbHNlIHsKKwkJCWlmICh2YWwgPCAwKQorCQkJCXJldCA9IC1F
SU5WQUw7CisJCQllbHNlCisJCQkJc2stPnNrX2J1c3lfcG9sbF9idWRnZXQgPSB2YWw7CisJCX0K
KwkJYnJlYWs7CiAjZW5kaWYKIAogCWNhc2UgU09fTUFYX1BBQ0lOR19SQVRFOgotLSAKMi4yNy4w
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpJbnRlbC13
aXJlZC1sYW4gbWFpbGluZyBsaXN0CkludGVsLXdpcmVkLWxhbkBvc3Vvc2wub3JnCmh0dHBzOi8v
bGlzdHMub3N1b3NsLm9yZy9tYWlsbWFuL2xpc3RpbmZvL2ludGVsLXdpcmVkLWxhbgo=
