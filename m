Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from fraxinus.osuosl.org (smtp4.osuosl.org [140.211.166.137])
	by mail.lfdr.de (Postfix) with ESMTPS id 3B05D2B07B9
	for <lists+intel-wired-lan@lfdr.de>; Thu, 12 Nov 2020 15:45:13 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by fraxinus.osuosl.org (Postfix) with ESMTP id E220C86D9D;
	Thu, 12 Nov 2020 14:45:11 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from fraxinus.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OecJlUViWL4w; Thu, 12 Nov 2020 14:45:10 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by fraxinus.osuosl.org (Postfix) with ESMTP id 1377586C99;
	Thu, 12 Nov 2020 14:45:09 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from hemlock.osuosl.org (smtp2.osuosl.org [140.211.166.133])
 by ash.osuosl.org (Postfix) with ESMTP id 378111BF2C4
 for <intel-wired-lan@lists.osuosl.org>; Thu, 12 Nov 2020 11:41:55 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by hemlock.osuosl.org (Postfix) with ESMTP id 321CC876FB
 for <intel-wired-lan@lists.osuosl.org>; Thu, 12 Nov 2020 11:41:55 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from hemlock.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 96HstWP8Rb5w for <intel-wired-lan@lists.osuosl.org>;
 Thu, 12 Nov 2020 11:41:50 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pf1-f193.google.com (mail-pf1-f193.google.com
 [209.85.210.193])
 by hemlock.osuosl.org (Postfix) with ESMTPS id 57BA3876D8
 for <intel-wired-lan@lists.osuosl.org>; Thu, 12 Nov 2020 11:41:50 +0000 (UTC)
Received: by mail-pf1-f193.google.com with SMTP id x15so2959936pfm.9
 for <intel-wired-lan@lists.osuosl.org>; Thu, 12 Nov 2020 03:41:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=nYskcLFyc6szi7Z9xpAptKa+a4JeRd4qlkl7qFKCSsw=;
 b=CnIKVXFYMGIypsRSiIEmXq88iabHd5Ois/6P8SWz6BwxeRgJEaaTXD0nJWn0LUya/D
 JETb+UqA5Vba8MvT6YlJpU/NYIyl5LCfOD6Rp1O2fJjLTNP7ie9yRa9qZHfyxNeNMyaY
 YcyD8SEcAjSO/NXRodrftbn5GsjE9OeyzRk4lRDjfhCvfnnrlO0Y5LqDyGwQS25lgtS4
 C76/I1JfXkhjA6mCH9bNyWd9BKQkPpXdzP+bW2paFwviuq8bZUckGOUtDfgpOknLKDul
 QypYgqd5slDx5y5tggJiUmY0E08QfvKl1w7jXsnT+Gjw8MicRRWBkZEWgoWJXpfkm/gi
 rg4A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=nYskcLFyc6szi7Z9xpAptKa+a4JeRd4qlkl7qFKCSsw=;
 b=Zc1GC7okUYWALz8sBStC4U5GKRYdrnuX7K6OTSvV1IC3VkIbOs7rKbjojDXMLEwo0c
 DHGRQ1zxgzhsE/iCjIgk0RCA562Dk55NZtjV1UjGdzXvVRieYg2X7tbfDXnnST4sRUuj
 ly3l/jxzUtqnVsJ46L8itTlgRvlz0TObKAEMabOgjWXDzzF/JXxi5sicYh2BETDPXqFC
 B5NYfxxg0kfTKynM66SYVKYiw3F6HY+SKVIXCkqu/VibES/zSX5v/23S6wGNipPfR28M
 ug8gsyjitxVgRqoI/qc1iXtHq0NkhjQq/idITy7NIR5knCsec2XWetWpVwyONjFkWTwG
 YetA==
X-Gm-Message-State: AOAM5333RsO5EFHXyiJIOdL7a6zjJCPGeMoxke+qfxzMgimW1suuU7kz
 p9oDdshOCCZQMAd3frI2g4s=
X-Google-Smtp-Source: ABdhPJxFNhs5fN8c0MKKlrJyugO+v/7jNyo73p7yx+RU+3wenhNxS5d+kSDe2ojfg0Ajp+HJ6O50ZA==
X-Received: by 2002:a17:90a:c401:: with SMTP id
 i1mr8765325pjt.184.1605181309873; 
 Thu, 12 Nov 2020 03:41:49 -0800 (PST)
Received: from btopel-mobl.ger.intel.com (fmdmzpr03-ext.fm.intel.com.
 [192.55.54.38])
 by smtp.gmail.com with ESMTPSA id y8sm6161629pfe.33.2020.11.12.03.41.38
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 12 Nov 2020 03:41:48 -0800 (PST)
From: =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@gmail.com>
To: netdev@vger.kernel.org,
	bpf@vger.kernel.org
Date: Thu, 12 Nov 2020 12:40:38 +0100
Message-Id: <20201112114041.131998-7-bjorn.topel@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201112114041.131998-1-bjorn.topel@gmail.com>
References: <20201112114041.131998-1-bjorn.topel@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Thu, 12 Nov 2020 14:45:07 +0000
Subject: [Intel-wired-lan] [PATCH bpf-next 6/9] xsk: propagate napi_id to
 XDP socket Rx path
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: mst@redhat.com, kda@linux-powerpc.org, ast@kernel.org, edumazet@google.com,
 thomas.petazzoni@bootlin.com, ioana.ciornei@nxp.com, ecree@solarflare.com,
 aelior@marvell.com, akiyano@amazon.com, sthemmin@microsoft.com,
 ruxandra.radulescu@nxp.com, maximmi@nvidia.com,
 intel-wired-lan@lists.osuosl.org, kuba@kernel.org,
 =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 sgoutham@marvell.com, grygorii.strashko@ti.com, qi.z.zhang@intel.com,
 mcroce@microsoft.com, michael.chan@broadcom.com, magnus.karlsson@intel.com,
 daniel@iogearbox.net, ilias.apalodimas@linaro.org, tariqt@nvidia.com,
 netanel@amazon.com, jonathan.lemon@gmail.com, saeedm@nvidia.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RnJvbTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgoKQWRkIG5hcGlfaWQg
dG8gdGhlIHhkcF9yeHFfaW5mbyBzdHJ1Y3R1cmUsIGFuZCBtYWtlIHN1cmUgdGhlIFhEUApzb2Nr
ZXQgcGljayB1cCB0aGUgbmFwaV9pZCBpbiB0aGUgUnggcGF0aC4gVGhlIG5hcGlfaWQgaXMgdXNl
ZCB0byBmaW5kCnRoZSBjb3JyZXNwb25kaW5nIE5BUEkgc3RydWN0dXJlIGZvciBzb2NrZXQgYnVz
eSBwb2xsaW5nLgoKU2lnbmVkLW9mZi1ieTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50
ZWwuY29tPgotLS0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5j
ICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9ibnh0L2JueHQuYyAgICAg
fCAgMiArLQogLi4uL2V0aGVybmV0L2Nhdml1bS90aHVuZGVyL25pY3ZmX3F1ZXVlcy5jICAgIHwg
IDIgKy0KIC4uLi9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jICB8ICAy
ICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pNDBlL2k0MGVfdHhyeC5jICAgfCAgMiAr
LQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV9iYXNlLmMgICAgIHwgIDQgKyst
LQogZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMgICAgIHwgIDIgKy0K
IGRyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2lnYi9pZ2JfbWFpbi5jICAgICB8ICAyICstCiBk
cml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMgfCAgMiArLQogLi4u
L25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZXZmL2l4Z2JldmZfbWFpbi5jIHwgIDIgKy0KIGRyaXZl
cnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXZuZXRhLmMgICAgICAgICB8ICAyICstCiAuLi4vbmV0
L2V0aGVybmV0L21hcnZlbGwvbXZwcDIvbXZwcDJfbWFpbi5jICAgfCAgNCArKy0tCiBkcml2ZXJz
L25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg0L2VuX3J4LmMgICAgfCAgMiArLQogLi4uL25ldC9l
dGhlcm5ldC9tZWxsYW5veC9tbHg1L2NvcmUvZW5fbWFpbi5jIHwgIDIgKy0KIC4uLi9ldGhlcm5l
dC9uZXRyb25vbWUvbmZwL25mcF9uZXRfY29tbW9uLmMgICB8ICAyICstCiBkcml2ZXJzL25ldC9l
dGhlcm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4uYyAgfCAgMiArLQogZHJpdmVycy9uZXQvZXRo
ZXJuZXQvc2ZjL3J4X2NvbW1vbi5jICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVy
bmV0L3NvY2lvbmV4dC9uZXRzZWMuYyAgICAgICB8ICAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5l
dC90aS9jcHN3X3ByaXYuYyAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9uZXQvaHlwZXJ2L25l
dHZzYy5jICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L3R1bi5jICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBkcml2ZXJzL25ldC92ZXRoLmMgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgfCAgMiArLQogZHJpdmVycy9uZXQvdmlydGlvX25ldC5jICAg
ICAgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGRyaXZlcnMvbmV0L3hlbi1uZXRmcm9udC5jICAg
ICAgICAgICAgICAgICAgICB8ICAyICstCiBpbmNsdWRlL25ldC9idXN5X3BvbGwuaCAgICAgICAg
ICAgICAgICAgICAgICAgfCAxOSArKysrKysrKysrKysrKystLS0tCiBpbmNsdWRlL25ldC94ZHAu
aCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5ldC9jb3JlL2Rldi5jICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAyICstCiBuZXQvY29yZS94ZHAuYyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgMyArKy0KIG5ldC94ZHAveHNrLmMgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAxICsKIDI5IGZpbGVzIGNoYW5nZWQsIDQ3IGlu
c2VydGlvbnMoKyksIDMzIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYW1h
em9uL2VuYS9lbmFfbmV0ZGV2LmMKaW5kZXggZTgxMzFkYWRjMjJjLi42YWQ1OWYwMDY4ZjYgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jCisr
KyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FtYXpvbi9lbmEvZW5hX25ldGRldi5jCkBAIC00MTYs
NyArNDE2LDcgQEAgc3RhdGljIGludCBlbmFfeGRwX3JlZ2lzdGVyX3J4cV9pbmZvKHN0cnVjdCBl
bmFfcmluZyAqcnhfcmluZykKIHsKIAlpbnQgcmM7CiAKLQlyYyA9IHhkcF9yeHFfaW5mb19yZWco
JnJ4X3JpbmctPnhkcF9yeHEsIHJ4X3JpbmctPm5ldGRldiwgcnhfcmluZy0+cWlkKTsKKwlyYyA9
IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIHJ4X3JpbmctPm5ldGRldiwgcnhf
cmluZy0+cWlkLCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIocnhfcmluZy0+YWRhcHRl
ciwgaWZ1cCwgcnhfcmluZy0+bmV0ZGV2LApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvYnJvYWRjb20vYm54dC9ibnh0LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9i
bnh0L2JueHQuYwppbmRleCBmYTE0Nzg2NWUzM2YuLjVkZjEzMzg3YWI3NCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMKKysrIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYnJvYWRjb20vYm54dC9ibnh0LmMKQEAgLTI4OTQsNyArMjg5NCw3IEBAIHN0
YXRpYyBpbnQgYm54dF9hbGxvY19yeF9yaW5ncyhzdHJ1Y3QgYm54dCAqYnApCiAJCWlmIChyYykK
IAkJCXJldHVybiByYzsKIAotCQlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4ci0+eGRwX3J4cSwg
YnAtPmRldiwgaSk7CisJCXJjID0geGRwX3J4cV9pbmZvX3JlZygmcnhyLT54ZHBfcnhxLCBicC0+
ZGV2LCBpLCAwKTsKIAkJaWYgKHJjIDwgMCkKIAkJCXJldHVybiByYzsKIApkaWZmIC0tZ2l0IGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vdGh1bmRlci9uaWN2Zl9xdWV1ZXMuYwppbmRleCA3YTE0
MWNlMzJlODYuLmY3ODJlNmFmNDVlOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
Y2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
Y2F2aXVtL3RodW5kZXIvbmljdmZfcXVldWVzLmMKQEAgLTc3MCw3ICs3NzAsNyBAQCBzdGF0aWMg
dm9pZCBuaWN2Zl9yY3ZfcXVldWVfY29uZmlnKHN0cnVjdCBuaWN2ZiAqbmljLCBzdHJ1Y3QgcXVl
dWVfc2V0ICpxcywKIAlycS0+Y2FjaGluZyA9IDE7CiAKIAkvKiBEcml2ZXIgaGF2ZSBubyBwcm9w
ZXIgZXJyb3IgcGF0aCBmb3IgZmFpbGVkIFhEUCBSWC1xdWV1ZSBpbmZvIHJlZyAqLwotCVdBUk5f
T04oeGRwX3J4cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEsIG5pYy0+bmV0ZGV2LCBxaWR4KSA8IDAp
OworCVdBUk5fT04oeGRwX3J4cV9pbmZvX3JlZygmcnEtPnhkcF9yeHEsIG5pYy0+bmV0ZGV2LCBx
aWR4LCAwKSA8IDApOwogCiAJLyogU2VuZCBhIG1haWxib3ggbXNnIHRvIFBGIHRvIGNvbmZpZyBS
USAqLwogCW1ieC5ycS5tc2cgPSBOSUNfTUJPWF9NU0dfUlFfQ0ZHOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2RwYWEyL2RwYWEyLWV0aC5jCmluZGV4IGNmOTQwMGE5ODg2
ZC4uNDA5NTM5ODBlODQ2IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2Nh
bGUvZHBhYTIvZHBhYTItZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxl
L2RwYWEyL2RwYWEyLWV0aC5jCkBAIC0zMzM0LDcgKzMzMzQsNyBAQCBzdGF0aWMgaW50IGRwYWEy
X2V0aF9zZXR1cF9yeF9mbG93KHN0cnVjdCBkcGFhMl9ldGhfcHJpdiAqcHJpdiwKIAkJcmV0dXJu
IDA7CiAKIAllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZmcS0+Y2hhbm5lbC0+eGRwX3J4cSwgcHJp
di0+bmV0X2RldiwKLQkJCSAgICAgICBmcS0+Zmxvd2lkKTsKKwkJCSAgICAgICBmcS0+Zmxvd2lk
LCAwKTsKIAlpZiAoZXJyKSB7CiAJCWRldl9lcnIoZGV2LCAieGRwX3J4cV9pbmZvX3JlZyBmYWls
ZWRcbiIpOwogCQlyZXR1cm4gZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
aW50ZWwvaTQwZS9pNDBlX3R4cnguYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2k0MGUv
aTQwZV90eHJ4LmMKaW5kZXggZDQzY2UxM2E5M2M5Li5hM2Q1YmRhY2EyZjUgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2k0MGUvaTQwZV90eHJ4LmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQwZS9pNDBlX3R4cnguYwpAQCAtMTQzNiw3ICsxNDM2LDcg
QEAgaW50IGk0MGVfc2V0dXBfcnhfZGVzY3JpcHRvcnMoc3RydWN0IGk0MGVfcmluZyAqcnhfcmlu
ZykKIAkvKiBYRFAgUlgtcXVldWUgaW5mbyBvbmx5IG5lZWRlZCBmb3IgUlggcmluZ3MgZXhwb3Nl
ZCB0byBYRFAgKi8KIAlpZiAocnhfcmluZy0+dnNpLT50eXBlID09IEk0MEVfVlNJX01BSU4pIHsK
IAkJZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnhfcmluZy0+eGRwX3J4cSwgcnhfcmluZy0+bmV0
ZGV2LAotCQkJCSAgICAgICByeF9yaW5nLT5xdWV1ZV9pbmRleCk7CisJCQkJICAgICAgIHJ4X3Jp
bmctPnF1ZXVlX2luZGV4LCByeF9yaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAkJaWYg
KGVyciA8IDApCiAJCQlyZXR1cm4gZXJyOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwv
aWNlL2ljZV9iYXNlLmMKaW5kZXggZmU0MzIwZTJkMWYyLi4zMTI0YTNiZjUxOWEgMTAwNjQ0Ci0t
LSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jCisrKyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2ludGVsL2ljZS9pY2VfYmFzZS5jCkBAIC0zMDYsNyArMzA2LDcgQEAg
aW50IGljZV9zZXR1cF9yeF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5nKQogCQlpZiAoIXhkcF9y
eHFfaW5mb19pc19yZWcoJnJpbmctPnhkcF9yeHEpKQogCQkJLyogY292ZXJpdHlbY2hlY2tfcmV0
dXJuXSAqLwogCQkJeGRwX3J4cV9pbmZvX3JlZygmcmluZy0+eGRwX3J4cSwgcmluZy0+bmV0ZGV2
LAotCQkJCQkgcmluZy0+cV9pbmRleCk7CisJCQkJCSByaW5nLT5xX2luZGV4LCByaW5nLT5xX3Zl
Y3Rvci0+bmFwaS5uYXBpX2lkKTsKIAogCQlyaW5nLT54c2tfcG9vbCA9IGljZV94c2tfcG9vbChy
aW5nKTsKIAkJaWYgKHJpbmctPnhza19wb29sKSB7CkBAIC0zMzMsNyArMzMzLDcgQEAgaW50IGlj
ZV9zZXR1cF9yeF9jdHgoc3RydWN0IGljZV9yaW5nICpyaW5nKQogCQkJCS8qIGNvdmVyaXR5W2No
ZWNrX3JldHVybl0gKi8KIAkJCQl4ZHBfcnhxX2luZm9fcmVnKCZyaW5nLT54ZHBfcnhxLAogCQkJ
CQkJIHJpbmctPm5ldGRldiwKLQkJCQkJCSByaW5nLT5xX2luZGV4KTsKKwkJCQkJCSByaW5nLT5x
X2luZGV4LCByaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBpX2lkKTsKIAogCQkJZXJyID0geGRwX3J4
cV9pbmZvX3JlZ19tZW1fbW9kZWwoJnJpbmctPnhkcF9yeHEsCiAJCQkJCQkJIE1FTV9UWVBFX1BB
R0VfU0hBUkVELApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWNlL2lj
ZV90eHJ4LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pY2UvaWNlX3R4cnguYwppbmRl
eCBlYWU3NTI2MGZlMjAuLjc3ZDVlYWU2YjRjMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvaW50ZWwvaWNlL2ljZV90eHJ4LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50
ZWwvaWNlL2ljZV90eHJ4LmMKQEAgLTQ4Myw3ICs0ODMsNyBAQCBpbnQgaWNlX3NldHVwX3J4X3Jp
bmcoc3RydWN0IGljZV9yaW5nICpyeF9yaW5nKQogCWlmIChyeF9yaW5nLT52c2ktPnR5cGUgPT0g
SUNFX1ZTSV9QRiAmJgogCSAgICAheGRwX3J4cV9pbmZvX2lzX3JlZygmcnhfcmluZy0+eGRwX3J4
cSkpCiAJCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhxLCByeF9yaW5nLT5u
ZXRkZXYsCi0JCQkJICAgICByeF9yaW5nLT5xX2luZGV4KSkKKwkJCQkgICAgIHJ4X3JpbmctPnFf
aW5kZXgsIHJ4X3JpbmctPnFfdmVjdG9yLT5uYXBpLm5hcGlfaWQpKQogCQkJZ290byBlcnI7CiAJ
cmV0dXJuIDA7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2lnYi9p
Z2JfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaWdiL2lnYl9tYWluLmMKaW5k
ZXggNWZjMmMzODFkYTU1Li42YTRlZjQ5MzRmY2YgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2ludGVsL2lnYi9pZ2JfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2lu
dGVsL2lnYi9pZ2JfbWFpbi5jCkBAIC00MzUyLDcgKzQzNTIsNyBAQCBpbnQgaWdiX3NldHVwX3J4
X3Jlc291cmNlcyhzdHJ1Y3QgaWdiX3JpbmcgKnJ4X3JpbmcpCiAKIAkvKiBYRFAgUlgtcXVldWUg
aW5mbyAqLwogCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhxLCByeF9yaW5n
LT5uZXRkZXYsCi0JCQkgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4KSA8IDApCisJCQkgICAgIHJ4
X3JpbmctPnF1ZXVlX2luZGV4LCAwKSA8IDApCiAJCWdvdG8gZXJyOwogCiAJcmV0dXJuIDA7CmRp
ZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZS9peGdiZV9tYWluLmMKaW5kZXggNDVh
ZTMzZTE1MzAzLi41MGU2YjhiNmJhN2IgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2ludGVsL2l4Z2JlL2l4Z2JlX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRl
bC9peGdiZS9peGdiZV9tYWluLmMKQEAgLTY1NzcsNyArNjU3Nyw3IEBAIGludCBpeGdiZV9zZXR1
cF9yeF9yZXNvdXJjZXMoc3RydWN0IGl4Z2JlX2FkYXB0ZXIgKmFkYXB0ZXIsCiAKIAkvKiBYRFAg
UlgtcXVldWUgaW5mbyAqLwogCWlmICh4ZHBfcnhxX2luZm9fcmVnKCZyeF9yaW5nLT54ZHBfcnhx
LCBhZGFwdGVyLT5uZXRkZXYsCi0JCQkgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4KSA8IDApCisJ
CQkgICAgIHJ4X3JpbmctPnF1ZXVlX2luZGV4LCByeF9yaW5nLT5xX3ZlY3Rvci0+bmFwaS5uYXBp
X2lkKSA8IDApCiAJCWdvdG8gZXJyOwogCiAJcnhfcmluZy0+eGRwX3Byb2cgPSBhZGFwdGVyLT54
ZHBfcHJvZzsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4Z2JldmYv
aXhnYmV2Zl9tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZXZmL2l4Z2Jl
dmZfbWFpbi5jCmluZGV4IDgyZmNlMjdmNjgyYi4uNDA2MWNkN2RiNWRkIDEwMDY0NAotLS0gYS9k
cml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9peGdiZXZmL2l4Z2JldmZfbWFpbi5jCisrKyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2l4Z2JldmYvaXhnYmV2Zl9tYWluLmMKQEAgLTM0OTMs
NyArMzQ5Myw3IEBAIGludCBpeGdiZXZmX3NldHVwX3J4X3Jlc291cmNlcyhzdHJ1Y3QgaXhnYmV2
Zl9hZGFwdGVyICphZGFwdGVyLAogCiAJLyogWERQIFJYLXF1ZXVlIGluZm8gKi8KIAlpZiAoeGRw
X3J4cV9pbmZvX3JlZygmcnhfcmluZy0+eGRwX3J4cSwgYWRhcHRlci0+bmV0ZGV2LAotCQkJICAg
ICByeF9yaW5nLT5xdWV1ZV9pbmRleCkgPCAwKQorCQkJICAgICByeF9yaW5nLT5xdWV1ZV9pbmRl
eCwgMCkgPCAwKQogCQlnb3RvIGVycjsKIAogCXJ4X3JpbmctPnhkcF9wcm9nID0gYWRhcHRlci0+
eGRwX3Byb2c7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0
YS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYwppbmRleCA1NGIwYmY1
NzRjMDUuLjdkMDA5OGY0ZWY5ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFy
dmVsbC9tdm5ldGEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212bmV0YS5j
CkBAIC0zMjE5LDcgKzMyMTksNyBAQCBzdGF0aWMgaW50IG12bmV0YV9jcmVhdGVfcGFnZV9wb29s
KHN0cnVjdCBtdm5ldGFfcG9ydCAqcHAsCiAJCXJldHVybiBlcnI7CiAJfQogCi0JZXJyID0geGRw
X3J4cV9pbmZvX3JlZygmcnhxLT54ZHBfcnhxLCBwcC0+ZGV2LCByeHEtPmlkKTsKKwllcnIgPSB4
ZHBfcnhxX2luZm9fcmVnKCZyeHEtPnhkcF9yeHEsIHBwLT5kZXYsIHJ4cS0+aWQsIDApOwogCWlm
IChlcnIgPCAwKQogCQlnb3RvIGVycl9mcmVlX3BwOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL25l
dC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAyX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L21hcnZlbGwvbXZwcDIvbXZwcDJfbWFpbi5jCmluZGV4IGY2NjE2Yzg5MzNjYS4uZmY4NzI5
YjZjNDE0IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212
cHAyX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212cHAyL212cHAy
X21haW4uYwpAQCAtMjYwNiwxMSArMjYwNiwxMSBAQCBzdGF0aWMgaW50IG12cHAyX3J4cV9pbml0
KHN0cnVjdCBtdnBwMl9wb3J0ICpwb3J0LAogCW12cHAyX3J4cV9zdGF0dXNfdXBkYXRlKHBvcnQs
IHJ4cS0+aWQsIDAsIHJ4cS0+c2l6ZSk7CiAKIAlpZiAocHJpdi0+cGVyY3B1X3Bvb2xzKSB7Ci0J
CWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4cS0+eGRwX3J4cV9zaG9ydCwgcG9ydC0+ZGV2LCBy
eHEtPmlkKTsKKwkJZXJyID0geGRwX3J4cV9pbmZvX3JlZygmcnhxLT54ZHBfcnhxX3Nob3J0LCBw
b3J0LT5kZXYsIHJ4cS0+aWQsIDApOwogCQlpZiAoZXJyIDwgMCkKIAkJCWdvdG8gZXJyX2ZyZWVf
ZG1hOwogCi0JCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4cS0+eGRwX3J4cV9sb25nLCBwb3J0
LT5kZXYsIHJ4cS0+aWQpOworCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZyeHEtPnhkcF9yeHFf
bG9uZywgcG9ydC0+ZGV2LCByeHEtPmlkLCAwKTsKIAkJaWYgKGVyciA8IDApCiAJCQlnb3RvIGVy
cl91bnJlZ2lzdGVyX3J4cV9zaG9ydDsKIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvbWVsbGFub3gvbWx4NC9lbl9yeC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gv
bWx4NC9lbl9yeC5jCmluZGV4IDUwMmQxYjk3ODU1Yy4uZjU2MTk3OWU1NzMxIDEwMDY0NAotLS0g
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWxsYW5veC9tbHg0L2VuX3J4LmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NC9lbl9yeC5jCkBAIC0yODMsNyArMjgzLDcgQEAg
aW50IG1seDRfZW5fY3JlYXRlX3J4X3Jpbmcoc3RydWN0IG1seDRfZW5fcHJpdiAqcHJpdiwKIAly
aW5nLT5sb2dfc3RyaWRlID0gZmZzKHJpbmctPnN0cmlkZSkgLSAxOwogCXJpbmctPmJ1Zl9zaXpl
ID0gcmluZy0+c2l6ZSAqIHJpbmctPnN0cmlkZSArIFRYQkJfU0laRTsKIAotCWlmICh4ZHBfcnhx
X2luZm9fcmVnKCZyaW5nLT54ZHBfcnhxLCBwcml2LT5kZXYsIHF1ZXVlX2luZGV4KSA8IDApCisJ
aWYgKHhkcF9yeHFfaW5mb19yZWcoJnJpbmctPnhkcF9yeHEsIHByaXYtPmRldiwgcXVldWVfaW5k
ZXgsIDApIDwgMCkKIAkJZ290byBlcnJfcmluZzsKIAogCXRtcCA9IHNpemUgKiByb3VuZHVwX3Bv
d19vZl90d28oTUxYNF9FTl9NQVhfUlhfRlJBR1MgKgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvbWVsbGFub3gvbWx4NS9jb3JlL2VuX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L21lbGxhbm94L21seDUvY29yZS9lbl9tYWluLmMKaW5kZXggYjNmMDJhYWM3ZjI2Li4zZTdl
Y2Q3ZjAyOTAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lbGxhbm94L21seDUv
Y29yZS9lbl9tYWluLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWVsbGFub3gvbWx4NS9j
b3JlL2VuX21haW4uYwpAQCAtNDM0LDcgKzQzNCw3IEBAIHN0YXRpYyBpbnQgbWx4NWVfYWxsb2Nf
cnEoc3RydWN0IG1seDVlX2NoYW5uZWwgKmMsCiAJcnFfeGRwX2l4ID0gcnEtPml4OwogCWlmICh4
c2spCiAJCXJxX3hkcF9peCArPSBwYXJhbXMtPm51bV9jaGFubmVscyAqIE1MWDVFX1JRX0dST1VQ
X1hTSzsKLQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwgcnEtPm5ldGRldiwg
cnFfeGRwX2l4KTsKKwllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4cSwgcnEtPm5l
dGRldiwgcnFfeGRwX2l4LCAwKTsKIAlpZiAoZXJyIDwgMCkKIAkJZ290byBlcnJfcnFfeGRwX3By
b2c7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZw
X25ldF9jb21tb24uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25l
dF9jb21tb24uYwppbmRleCBiMTUwZGE0M2FkYjIuLmI0YWNmMmY0MWU4NCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvbmV0cm9ub21lL25mcC9uZnBfbmV0X2NvbW1vbi5jCisrKyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L25ldHJvbm9tZS9uZnAvbmZwX25ldF9jb21tb24uYwpAQCAt
MjUzMyw3ICsyNTMzLDcgQEAgbmZwX25ldF9yeF9yaW5nX2FsbG9jKHN0cnVjdCBuZnBfbmV0X2Rw
ICpkcCwgc3RydWN0IG5mcF9uZXRfcnhfcmluZyAqcnhfcmluZykKIAogCWlmIChkcC0+bmV0ZGV2
KSB7CiAJCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3JpbmctPnhkcF9yeHEsIGRwLT5uZXRk
ZXYsCi0JCQkJICAgICAgIHJ4X3JpbmctPmlkeCk7CisJCQkJICAgICAgIHJ4X3JpbmctPmlkeCwg
cnhfcmluZy0+cl92ZWMtPm5hcGkubmFwaV9pZCk7CiAJCWlmIChlcnIgPCAwKQogCQkJcmV0dXJu
IGVycjsKIAl9CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xbG9naWMvcWVkZS9x
ZWRlX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Fsb2dpYy9xZWRlL3FlZGVfbWFpbi5j
CmluZGV4IDA1ZTNhM2I2MDI2OS4uOWNmOTYwYTZkMDA3IDEwMDY0NAotLS0gYS9kcml2ZXJzL25l
dC9ldGhlcm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC9xbG9naWMvcWVkZS9xZWRlX21haW4uYwpAQCAtMTc2Miw3ICsxNzYyLDcgQEAgc3RhdGlj
IHZvaWQgcWVkZV9pbml0X2ZwKHN0cnVjdCBxZWRlX2RldiAqZWRldikKIAogCQkJLyogRHJpdmVy
IGhhdmUgbm8gZXJyb3IgcGF0aCBmcm9tIGhlcmUgKi8KIAkJCVdBUk5fT04oeGRwX3J4cV9pbmZv
X3JlZygmZnAtPnJ4cS0+eGRwX3J4cSwgZWRldi0+bmRldiwKLQkJCQkJCSBmcC0+cnhxLT5yeHFf
aWQpIDwgMCk7CisJCQkJCQkgZnAtPnJ4cS0+cnhxX2lkLCAwKSA8IDApOwogCiAJCQlpZiAoeGRw
X3J4cV9pbmZvX3JlZ19tZW1fbW9kZWwoJmZwLT5yeHEtPnhkcF9yeHEsCiAJCQkJCQkgICAgICAg
TUVNX1RZUEVfUEFHRV9PUkRFUjAsCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9z
ZmMvcnhfY29tbW9uLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhfY29tbW9uLmMKaW5k
ZXggMTljZjdjYWMxZTZlLi42OGZjN2QzMTc2OTMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L3NmYy9yeF9jb21tb24uYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zZmMvcnhf
Y29tbW9uLmMKQEAgLTI2Miw3ICsyNjIsNyBAQCB2b2lkIGVmeF9pbml0X3J4X3F1ZXVlKHN0cnVj
dCBlZnhfcnhfcXVldWUgKnJ4X3F1ZXVlKQogCiAJLyogSW5pdGlhbGlzZSBYRFAgcXVldWUgaW5m
b3JtYXRpb24gKi8KIAlyYyA9IHhkcF9yeHFfaW5mb19yZWcoJnJ4X3F1ZXVlLT54ZHBfcnhxX2lu
Zm8sIGVmeC0+bmV0X2RldiwKLQkJCSAgICAgIHJ4X3F1ZXVlLT5jb3JlX2luZGV4KTsKKwkJCSAg
ICAgIHJ4X3F1ZXVlLT5jb3JlX2luZGV4LCAwKTsKIAogCWlmIChyYykgewogCQluZXRpZl9lcnIo
ZWZ4LCByeF9lcnIsIGVmeC0+bmV0X2RldiwKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L3NvY2lvbmV4dC9uZXRzZWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NvY2lvbmV4dC9u
ZXRzZWMuYwppbmRleCAxNTAzY2M5ZWM2ZTIuLjgwYWIyNDY1OGU4NyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L25ldHNlYy5jCisrKyBiL2RyaXZlcnMvbmV0L2V0
aGVybmV0L3NvY2lvbmV4dC9uZXRzZWMuYwpAQCAtMTMwNCw3ICsxMzA0LDcgQEAgc3RhdGljIGlu
dCBuZXRzZWNfc2V0dXBfcnhfZHJpbmcoc3RydWN0IG5ldHNlY19wcml2ICpwcml2KQogCQlnb3Rv
IGVycl9vdXQ7CiAJfQogCi0JZXJyID0geGRwX3J4cV9pbmZvX3JlZygmZHJpbmctPnhkcF9yeHEs
IHByaXYtPm5kZXYsIDApOworCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJmRyaW5nLT54ZHBfcnhx
LCBwcml2LT5uZGV2LCAwLCAwKTsKIAlpZiAoZXJyKQogCQlnb3RvIGVycl9vdXQ7CiAKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvdGkvY3Bzd19wcml2LmMKaW5kZXggNTFjYzI5ZjM5MDM4Li5kOGYyODdjODhkNzcg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCisrKyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3dfcHJpdi5jCkBAIC0xMTg5LDcgKzExODksNyBAQCBz
dGF0aWMgaW50IGNwc3dfbmRldl9jcmVhdGVfeGRwX3J4cShzdHJ1Y3QgY3Bzd19wcml2ICpwcml2
LCBpbnQgY2gpCiAJcG9vbCA9IGNwc3ctPnBhZ2VfcG9vbFtjaF07CiAJcnhxID0gJnByaXYtPnhk
cF9yeHFbY2hdOwogCi0JcmV0ID0geGRwX3J4cV9pbmZvX3JlZyhyeHEsIHByaXYtPm5kZXYsIGNo
KTsKKwlyZXQgPSB4ZHBfcnhxX2luZm9fcmVnKHJ4cSwgcHJpdi0+bmRldiwgY2gsIDApOwogCWlm
IChyZXQpCiAJCXJldHVybiByZXQ7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2h5cGVydi9u
ZXR2c2MuYyBiL2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYwppbmRleCAwYzNkZTk0YjUxNzgu
LmZhODM0MWY4MzU5YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvaHlwZXJ2L25ldHZzYy5jCisr
KyBiL2RyaXZlcnMvbmV0L2h5cGVydi9uZXR2c2MuYwpAQCAtMTQ5OSw3ICsxNDk5LDcgQEAgc3Ry
dWN0IG5ldHZzY19kZXZpY2UgKm5ldHZzY19kZXZpY2VfYWRkKHN0cnVjdCBodl9kZXZpY2UgKmRl
dmljZSwKIAkJdTY0X3N0YXRzX2luaXQoJm52Y2hhbi0+dHhfc3RhdHMuc3luY3ApOwogCQl1NjRf
c3RhdHNfaW5pdCgmbnZjaGFuLT5yeF9zdGF0cy5zeW5jcCk7CiAKLQkJcmV0ID0geGRwX3J4cV9p
bmZvX3JlZygmbnZjaGFuLT54ZHBfcnhxLCBuZGV2LCBpKTsKKwkJcmV0ID0geGRwX3J4cV9pbmZv
X3JlZygmbnZjaGFuLT54ZHBfcnhxLCBuZGV2LCBpLCAwKTsKIAogCQlpZiAocmV0KSB7CiAJCQlu
ZXRkZXZfZXJyKG5kZXYsICJ4ZHBfcnhxX2luZm9fcmVnIGZhaWw6ICVkXG4iLCByZXQpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvdHVuLmMgYi9kcml2ZXJzL25ldC90dW4uYwppbmRleCBiZTY5
ZDI3MjA1MmYuLmYyNTQxZDY0NTcwNyAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvdHVuLmMKKysr
IGIvZHJpdmVycy9uZXQvdHVuLmMKQEAgLTc5MSw3ICs3OTEsNyBAQCBzdGF0aWMgaW50IHR1bl9h
dHRhY2goc3RydWN0IHR1bl9zdHJ1Y3QgKnR1biwgc3RydWN0IGZpbGUgKmZpbGUsCiAJfSBlbHNl
IHsKIAkJLyogU2V0dXAgWERQIFJYLXF1ZXVlIGluZm8sIGZvciBuZXcgdGZpbGUgZ2V0dGluZyBh
dHRhY2hlZCAqLwogCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZ0ZmlsZS0+eGRwX3J4cSwKLQkJ
CQkgICAgICAgdHVuLT5kZXYsIHRmaWxlLT5xdWV1ZV9pbmRleCk7CisJCQkJICAgICAgIHR1bi0+
ZGV2LCB0ZmlsZS0+cXVldWVfaW5kZXgsIDApOwogCQlpZiAoZXJyIDwgMCkKIAkJCWdvdG8gb3V0
OwogCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnX21lbV9tb2RlbCgmdGZpbGUtPnhkcF9yeHEsCmRp
ZmYgLS1naXQgYS9kcml2ZXJzL25ldC92ZXRoLmMgYi9kcml2ZXJzL25ldC92ZXRoLmMKaW5kZXgg
OGM3Mzc2NjgwMDhhLi4wNGQyMGU5ZDg0MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L3ZldGgu
YworKysgYi9kcml2ZXJzL25ldC92ZXRoLmMKQEAgLTkyNiw3ICs5MjYsNyBAQCBzdGF0aWMgaW50
IHZldGhfZW5hYmxlX3hkcChzdHJ1Y3QgbmV0X2RldmljZSAqZGV2KQogCQlmb3IgKGkgPSAwOyBp
IDwgZGV2LT5yZWFsX251bV9yeF9xdWV1ZXM7IGkrKykgewogCQkJc3RydWN0IHZldGhfcnEgKnJx
ID0gJnByaXYtPnJxW2ldOwogCi0JCQllcnIgPSB4ZHBfcnhxX2luZm9fcmVnKCZycS0+eGRwX3J4
cSwgZGV2LCBpKTsKKwkJCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnJxLT54ZHBfcnhxLCBkZXYs
IGksIDApOwogCQkJaWYgKGVyciA8IDApCiAJCQkJZ290byBlcnJfcnhxX3JlZzsKIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5j
CmluZGV4IDIxYjcxMTQ4YzUzMi4uZDcxZmU0MTU5NWI3IDEwMDY0NAotLS0gYS9kcml2ZXJzL25l
dC92aXJ0aW9fbmV0LmMKKysrIGIvZHJpdmVycy9uZXQvdmlydGlvX25ldC5jCkBAIC0xNDg1LDcg
KzE0ODUsNyBAQCBzdGF0aWMgaW50IHZpcnRuZXRfb3BlbihzdHJ1Y3QgbmV0X2RldmljZSAqZGV2
KQogCQkJaWYgKCF0cnlfZmlsbF9yZWN2KHZpLCAmdmktPnJxW2ldLCBHRlBfS0VSTkVMKSkKIAkJ
CQlzY2hlZHVsZV9kZWxheWVkX3dvcmsoJnZpLT5yZWZpbGwsIDApOwogCi0JCWVyciA9IHhkcF9y
eHFfaW5mb19yZWcoJnZpLT5ycVtpXS54ZHBfcnhxLCBkZXYsIGkpOworCQllcnIgPSB4ZHBfcnhx
X2luZm9fcmVnKCZ2aS0+cnFbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDAp
CiAJCQlyZXR1cm4gZXJyOwogCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQu
YyBiL2RyaXZlcnMvbmV0L3hlbi1uZXRmcm9udC5jCmluZGV4IDNlOTg5NWJlYzE1Zi4uMjg3MTRh
NDhmNWQwIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYworKysgYi9kcml2
ZXJzL25ldC94ZW4tbmV0ZnJvbnQuYwpAQCAtMjAxNCw3ICsyMDE0LDcgQEAgc3RhdGljIGludCB4
ZW5uZXRfY3JlYXRlX3BhZ2VfcG9vbChzdHJ1Y3QgbmV0ZnJvbnRfcXVldWUgKnF1ZXVlKQogCX0K
IAogCWVyciA9IHhkcF9yeHFfaW5mb19yZWcoJnF1ZXVlLT54ZHBfcnhxLCBxdWV1ZS0+aW5mby0+
bmV0ZGV2LAotCQkJICAgICAgIHF1ZXVlLT5pZCk7CisJCQkgICAgICAgcXVldWUtPmlkLCAwKTsK
IAlpZiAoZXJyKSB7CiAJCW5ldGRldl9lcnIocXVldWUtPmluZm8tPm5ldGRldiwgInhkcF9yeHFf
aW5mb19yZWcgZmFpbGVkXG4iKTsKIAkJZ290byBlcnJfZnJlZV9wcDsKZGlmZiAtLWdpdCBhL2lu
Y2x1ZGUvbmV0L2J1c3lfcG9sbC5oIGIvaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmgKaW5kZXggYjRm
NjUzY2MxNWE3Li4yZGQ4YzJjOTBjMGMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbmV0L2J1c3lfcG9s
bC5oCisrKyBiL2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5oCkBAIC0xMzUsMTQgKzEzNSwyNSBAQCBz
dGF0aWMgaW5saW5lIHZvaWQgc2tfbWFya19uYXBpX2lkKHN0cnVjdCBzb2NrICpzaywgY29uc3Qg
c3RydWN0IHNrX2J1ZmYgKnNrYikKIAlza19yeF9xdWV1ZV9zZXQoc2ssIHNrYik7CiB9CiAKLS8q
IHZhcmlhbnQgdXNlZCBmb3IgdW5jb25uZWN0ZWQgc29ja2V0cyAqLwotc3RhdGljIGlubGluZSB2
b2lkIHNrX21hcmtfbmFwaV9pZF9vbmNlKHN0cnVjdCBzb2NrICpzaywKLQkJCQkJY29uc3Qgc3Ry
dWN0IHNrX2J1ZmYgKnNrYikKK3N0YXRpYyBpbmxpbmUgdm9pZCBfX3NrX21hcmtfbmFwaV9pZF9v
bmNlX3hkcChzdHJ1Y3Qgc29jayAqc2ssIHVuc2lnbmVkIGludCBuYXBpX2lkKQogewogI2lmZGVm
IENPTkZJR19ORVRfUlhfQlVTWV9QT0xMCiAJaWYgKCFSRUFEX09OQ0Uoc2stPnNrX25hcGlfaWQp
KQotCQlXUklURV9PTkNFKHNrLT5za19uYXBpX2lkLCBza2ItPm5hcGlfaWQpOworCQlXUklURV9P
TkNFKHNrLT5za19uYXBpX2lkLCBuYXBpX2lkKTsKICNlbmRpZgogfQogCisvKiB2YXJpYW50IHVz
ZWQgZm9yIHVuY29ubmVjdGVkIHNvY2tldHMgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZCBza19tYXJr
X25hcGlfaWRfb25jZShzdHJ1Y3Qgc29jayAqc2ssCisJCQkJCWNvbnN0IHN0cnVjdCBza19idWZm
ICpza2IpCit7CisJX19za19tYXJrX25hcGlfaWRfb25jZV94ZHAoc2ssIHNrYi0+bmFwaV9pZCk7
Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCBza19tYXJrX25hcGlfaWRfb25jZV94ZHAoc3RydWN0
IHNvY2sgKnNrLAorCQkJCQkgICAgY29uc3Qgc3RydWN0IHhkcF9idWZmICp4ZHApCit7CisJX19z
a19tYXJrX25hcGlfaWRfb25jZV94ZHAoc2ssIHhkcC0+cnhxLT5uYXBpX2lkKTsKK30KKwogI2Vu
ZGlmIC8qIF9MSU5VWF9ORVRfQlVTWV9QT0xMX0ggKi8KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0
L3hkcC5oIGIvaW5jbHVkZS9uZXQveGRwLmgKaW5kZXggMzgxNGZiNjMxZDUyLi40ZDQyNTVhOTQ3
NzMgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbmV0L3hkcC5oCisrKyBiL2luY2x1ZGUvbmV0L3hkcC5o
CkBAIC01OSw2ICs1OSw3IEBAIHN0cnVjdCB4ZHBfcnhxX2luZm8gewogCXUzMiBxdWV1ZV9pbmRl
eDsKIAl1MzIgcmVnX3N0YXRlOwogCXN0cnVjdCB4ZHBfbWVtX2luZm8gbWVtOworCXVuc2lnbmVk
IGludCBuYXBpX2lkOwogfSBfX19fY2FjaGVsaW5lX2FsaWduZWQ7IC8qIHBlcmYgY3JpdGljYWws
IGF2b2lkIGZhbHNlLXNoYXJpbmcgKi8KIAogc3RydWN0IHhkcF90eHFfaW5mbyB7CkBAIC0yMTEs
NyArMjEyLDcgQEAgc3RhdGljIGlubGluZSB2b2lkIHhkcF9yZWxlYXNlX2ZyYW1lKHN0cnVjdCB4
ZHBfZnJhbWUgKnhkcGYpCiB9CiAKIGludCB4ZHBfcnhxX2luZm9fcmVnKHN0cnVjdCB4ZHBfcnhx
X2luZm8gKnhkcF9yeHEsCi0JCSAgICAgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwgdTMyIHF1ZXVl
X2luZGV4KTsKKwkJICAgICBzdHJ1Y3QgbmV0X2RldmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgs
IHVuc2lnbmVkIGludCBuYXBpX2lkKTsKIHZvaWQgeGRwX3J4cV9pbmZvX3VucmVnKHN0cnVjdCB4
ZHBfcnhxX2luZm8gKnhkcF9yeHEpOwogdm9pZCB4ZHBfcnhxX2luZm9fdW51c2VkKHN0cnVjdCB4
ZHBfcnhxX2luZm8gKnhkcF9yeHEpOwogYm9vbCB4ZHBfcnhxX2luZm9faXNfcmVnKHN0cnVjdCB4
ZHBfcnhxX2luZm8gKnhkcF9yeHEpOwpkaWZmIC0tZ2l0IGEvbmV0L2NvcmUvZGV2LmMgYi9uZXQv
Y29yZS9kZXYuYwppbmRleCAzM2M2NzAwNGYyYWQuLjY2MzVjOTI5MzViYyAxMDA2NDQKLS0tIGEv
bmV0L2NvcmUvZGV2LmMKKysrIGIvbmV0L2NvcmUvZGV2LmMKQEAgLTk4MDYsNyArOTgwNiw3IEBA
IHN0YXRpYyBpbnQgbmV0aWZfYWxsb2NfcnhfcXVldWVzKHN0cnVjdCBuZXRfZGV2aWNlICpkZXYp
CiAJCXJ4W2ldLmRldiA9IGRldjsKIAogCQkvKiBYRFAgUlgtcXVldWUgc2V0dXAgKi8KLQkJZXJy
ID0geGRwX3J4cV9pbmZvX3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpKTsKKwkJZXJyID0geGRw
X3J4cV9pbmZvX3JlZygmcnhbaV0ueGRwX3J4cSwgZGV2LCBpLCAwKTsKIAkJaWYgKGVyciA8IDAp
CiAJCQlnb3RvIGVycl9yeHFfaW5mbzsKIAl9CmRpZmYgLS1naXQgYS9uZXQvY29yZS94ZHAuYyBi
L25ldC9jb3JlL3hkcC5jCmluZGV4IDQ4YWJhOTMzYTVhOC4uN2NjYTdjYjViNjVmIDEwMDY0NAot
LS0gYS9uZXQvY29yZS94ZHAuYworKysgYi9uZXQvY29yZS94ZHAuYwpAQCAtMTU4LDcgKzE1OCw3
IEBAIHN0YXRpYyB2b2lkIHhkcF9yeHFfaW5mb19pbml0KHN0cnVjdCB4ZHBfcnhxX2luZm8gKnhk
cF9yeHEpCiAKIC8qIFJldHVybnMgMCBvbiBzdWNjZXNzLCBuZWdhdGl2ZSBvbiBmYWlsdXJlICov
CiBpbnQgeGRwX3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBfcnhxLAotCQkg
ICAgIHN0cnVjdCBuZXRfZGV2aWNlICpkZXYsIHUzMiBxdWV1ZV9pbmRleCkKKwkJICAgICBzdHJ1
Y3QgbmV0X2RldmljZSAqZGV2LCB1MzIgcXVldWVfaW5kZXgsIHVuc2lnbmVkIGludCBuYXBpX2lk
KQogewogCWlmICh4ZHBfcnhxLT5yZWdfc3RhdGUgPT0gUkVHX1NUQVRFX1VOVVNFRCkgewogCQlX
QVJOKDEsICJEcml2ZXIgcHJvbWlzZWQgbm90IHRvIHJlZ2lzdGVyIHRoaXMiKTsKQEAgLTE3OSw2
ICsxNzksNyBAQCBpbnQgeGRwX3J4cV9pbmZvX3JlZyhzdHJ1Y3QgeGRwX3J4cV9pbmZvICp4ZHBf
cnhxLAogCXhkcF9yeHFfaW5mb19pbml0KHhkcF9yeHEpOwogCXhkcF9yeHEtPmRldiA9IGRldjsK
IAl4ZHBfcnhxLT5xdWV1ZV9pbmRleCA9IHF1ZXVlX2luZGV4OworCXhkcF9yeHEtPm5hcGlfaWQg
PSBuYXBpX2lkOwogCiAJeGRwX3J4cS0+cmVnX3N0YXRlID0gUkVHX1NUQVRFX1JFR0lTVEVSRUQ7
CiAJcmV0dXJuIDA7CmRpZmYgLS1naXQgYS9uZXQveGRwL3hzay5jIGIvbmV0L3hkcC94c2suYwpp
bmRleCAwMDY2MzM5MGE0YTguLjVjOTBlNTk5M2RkYiAxMDA2NDQKLS0tIGEvbmV0L3hkcC94c2su
YworKysgYi9uZXQveGRwL3hzay5jCkBAIC0yMzMsNiArMjMzLDcgQEAgc3RhdGljIGludCB4c2tf
cmN2KHN0cnVjdCB4ZHBfc29jayAqeHMsIHN0cnVjdCB4ZHBfYnVmZiAqeGRwLAogCWlmICh4cy0+
ZGV2ICE9IHhkcC0+cnhxLT5kZXYgfHwgeHMtPnF1ZXVlX2lkICE9IHhkcC0+cnhxLT5xdWV1ZV9p
bmRleCkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKKwlza19tYXJrX25hcGlfaWRfb25jZV94ZHAoJnhz
LT5zaywgeGRwKTsKIAlsZW4gPSB4ZHAtPmRhdGFfZW5kIC0geGRwLT5kYXRhOwogCiAJcmV0dXJu
IHhkcC0+cnhxLT5tZW0udHlwZSA9PSBNRU1fVFlQRV9YU0tfQlVGRl9QT09MID8KLS0gCjIuMjcu
MAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KSW50ZWwt
d2lyZWQtbGFuIG1haWxpbmcgbGlzdApJbnRlbC13aXJlZC1sYW5Ab3N1b3NsLm9yZwpodHRwczov
L2xpc3RzLm9zdW9zbC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC13aXJlZC1sYW4K
