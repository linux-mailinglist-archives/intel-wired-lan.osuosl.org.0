Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from silver.osuosl.org (smtp3.osuosl.org [140.211.166.136])
	by mail.lfdr.de (Postfix) with ESMTPS id 53D3A2A7BBB
	for <lists+intel-wired-lan@lfdr.de>; Thu,  5 Nov 2020 11:28:48 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by silver.osuosl.org (Postfix) with ESMTP id 5D14522926;
	Thu,  5 Nov 2020 10:28:46 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from silver.osuosl.org ([127.0.0.1])
	by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3Q2WB-pBUD+A; Thu,  5 Nov 2020 10:28:46 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by silver.osuosl.org (Postfix) with ESMTP id AFB8822D22;
	Thu,  5 Nov 2020 10:28:42 +0000 (UTC)
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from silver.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by ash.osuosl.org (Postfix) with ESMTP id 526D51BF59A
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:41 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by silver.osuosl.org (Postfix) with ESMTP id 3898222926
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:41 +0000 (UTC)
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from silver.osuosl.org ([127.0.0.1])
 by localhost (.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id dp4lWXWWUs-a for <intel-wired-lan@lists.osuosl.org>;
 Thu,  5 Nov 2020 10:28:38 +0000 (UTC)
X-Greylist: domain auto-whitelisted by SQLgrey-1.7.6
Received: from mail-pf1-f195.google.com (mail-pf1-f195.google.com
 [209.85.210.195])
 by silver.osuosl.org (Postfix) with ESMTPS id 9D65620373
 for <intel-wired-lan@lists.osuosl.org>; Thu,  5 Nov 2020 10:28:38 +0000 (UTC)
Received: by mail-pf1-f195.google.com with SMTP id y7so83617pfq.11
 for <intel-wired-lan@lists.osuosl.org>; Thu, 05 Nov 2020 02:28:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=0S/pJoSQbdzJexH57xOvPa6elOsgcCpZwFRQdMcEx4o=;
 b=UDHw5DcqYUqIIhvvoEtRSMJu/4Q5beBqQuCD5do9ll79D3UD08yTTHSm8cjcx3P8Uc
 WhnAv7aP1geTGRO2ZhOyZjU/6hrLb2Rnmmf6KT7x2TJjlfaMjqr4jwDIrML7w2vBV8O5
 /vU4Rzhvd7NPWnYdkTkNJa3pIwi7OmCNZXwY2DCY9sl7R+PeD/vtUAqesB0zGcqBNE9R
 obTTuiS0Tb5yP3pdvX4zMfabUVnJiP5baLon1SS/IfOBqNNY30IWL1EvCFq9YXYOYnwt
 k1TPweTXkpxCrZCx+Z24KyOmF2afA5qKY2qc7/rPZ4AEE2T94V4Ptd++l4RlTr0DLWmJ
 OVQg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=0S/pJoSQbdzJexH57xOvPa6elOsgcCpZwFRQdMcEx4o=;
 b=b8lRcW100pqgB0KJuRxGAdoWsHcbrghCVW3AHARILLHn4FlrIRYe0UcC19Vco28dFc
 Wlet7VzBT1i3B5nr347//eSHPfnta7ysGQGcpanPuNesranAbvHfDK8kvofEQjoy0rA4
 LJvvxsHh7w74YuVTRw4CzsM/cVUVuCeONE8MV5tbzl4IkiAeo1kjwn42NqV0qe5sd3VL
 bngDbZVIG23FBxTKwnjUOdL5z87eApIPSOH+6YpibsBmpr/kwgwZ2qwIe1WugrqbL7vp
 9zyv6I5tKXJgTn7eTLTFgGeqJSExoDt86lQqQSF9PS8t5Vz+tTQol4H0hOirF7RbGQ1h
 BiMA==
X-Gm-Message-State: AOAM532zh4UX9bLV3iv4M+J9sPnZes+4mtgK+NFvDYibCWSvld6HZD52
 MonprvpCZXTZDs8l8RAG+qk=
X-Google-Smtp-Source: ABdhPJypr4qEjfgtsQkafPRrs42RJ1UqwYw78RkgMRn+REgztnWgnp4FhwuMuIoL274Kd0Crc+e9SQ==
X-Received: by 2002:a62:e40c:0:b029:18b:ad5:18a8 with SMTP id
 r12-20020a62e40c0000b029018b0ad518a8mr1791960pfh.16.1604572118066; 
 Thu, 05 Nov 2020 02:28:38 -0800 (PST)
Received: from btopel-mobl.ger.intel.com (fmdmzpr03-ext.fm.intel.com.
 [192.55.54.38])
 by smtp.gmail.com with ESMTPSA id 192sm2050117pfz.200.2020.11.05.02.28.32
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 05 Nov 2020 02:28:37 -0800 (PST)
From: =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@gmail.com>
To: netdev@vger.kernel.org,
	bpf@vger.kernel.org
Date: Thu,  5 Nov 2020 11:28:04 +0100
Message-Id: <20201105102812.152836-2-bjorn.topel@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <20201105102812.152836-1-bjorn.topel@gmail.com>
References: <20201105102812.152836-1-bjorn.topel@gmail.com>
MIME-Version: 1.0
Subject: [Intel-wired-lan] [RFC PATCH bpf-next v2 1/9] net: introduce
 preferred busy-polling
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: daniel@iogearbox.net, jonathan.lemon@gmail.com, ast@kernel.org,
 edumazet@google.com, intel-wired-lan@lists.osuosl.org, qi.z.zhang@intel.com,
 kuba@kernel.org, =?UTF-8?q?Bj=C3=B6rn=20T=C3=B6pel?= <bjorn.topel@intel.com>,
 magnus.karlsson@intel.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RnJvbTogQmrDtnJuIFTDtnBlbCA8Ympvcm4udG9wZWxAaW50ZWwuY29tPgoKVGhlIGV4aXN0aW5n
IGJ1c3ktcG9sbGluZyBtb2RlLCBlbmFibGVkIGJ5IHRoZSBTT19CVVNZX1BPTEwgc29ja2V0Cm9w
dGlvbiBvciBzeXN0ZW0td2lkZSB1c2luZyB0aGUgL3Byb2Mvc3lzL25ldC9jb3JlL2J1c3lfcmVh
ZCBrbm9iLCBpcwphbiBvcHBvcnR1bmlzdGljLiBUaGF0IG1lYW5zIHRoYXQgaWYgdGhlIE5BUEkg
Y29udGV4dCBpcyBub3QKc2NoZWR1bGVkLCBpdCB3aWxsIHBvbGwgaXQuIElmLCBhZnRlciBidXN5
LXBvbGxpbmcsIHRoZSBidWRnZXQgaXMKZXhjZWVkZWQgdGhlIGJ1c3ktcG9sbGluZyBsb2dpYyB3
aWxsIHNjaGVkdWxlIHRoZSBOQVBJIG9udG8gdGhlCnJlZ3VsYXIgc29mdGlycSBoYW5kbGluZy4K
Ck9uZSBpbXBsaWNhdGlvbiBvZiB0aGUgYmVoYXZpb3IgYWJvdmUgaXMgdGhhdCBhIGJ1c3kvaGVh
dnkgbG9hZGVkIE5BUEkKY29udGV4dCB3aWxsIG5ldmVyIGVudGVyL2FsbG93IGZvciBidXN5LXBv
bGxpbmcuIFNvbWUgYXBwbGljYXRpb25zCnByZWZlciB0aGF0IG1vc3QgTkFQSSBwcm9jZXNzaW5n
IHdvdWxkIGJlIGRvbmUgYnkgYnVzeS1wb2xsaW5nLgoKVGhpcyBzZXJpZXMgYWRkcyBhIG5ldyBz
b2NrZXQgb3B0aW9uLCBTT19QUkVGRVJfQlVTWV9QT0xMLCB0aGF0IHdvcmtzCmluIGNvbmNlcnQg
d2l0aCB0aGUgbmFwaV9kZWZlcl9oYXJkX2lycXMgYW5kIGdyb19mbHVzaF90aW1lb3V0Cmtub2Jz
LiBUaGUgbmFwaV9kZWZlcl9oYXJkX2lycXMgYW5kIGdyb19mbHVzaF90aW1lb3V0IGtub2JzIHdl
cmUKaW50cm9kdWNlZCBpbiBjb21taXQgNmY4YjEyZDY2MWQwICgibmV0OiBuYXBpOiBhZGQgaGFy
ZCBpcnFzIGRlZmVycmFsCmZlYXR1cmUiKSwgYW5kIGFsbG93cyBmb3IgYSB1c2VyIHRvIGRlZmVy
IGludGVycnVwdHMgdG8gYmUgZW5hYmxlZCBhbmQKaW5zdGVhZCBzY2hlZHVsZSB0aGUgTkFQSSBj
b250ZXh0IGZyb20gYSB3YXRjaGRvZyB0aW1lci4gV2hlbiBhIHVzZXIKZW5hYmxlcyB0aGUgU09f
UFJFRkVSX0JVU1lfUE9MTCwgYWdhaW4gd2l0aCB0aGUgb3RoZXIga25vYnMgZW5hYmxlZCwKYW5k
IHRoZSBOQVBJIGNvbnRleHQgaXMgYmVpbmcgcHJvY2Vzc2VkIGJ5IGEgc29mdGlycSwgdGhlIHNv
ZnRpcnEgTkFQSQpwcm9jZXNzaW5nIHdpbGwgZXhpdCBlYXJseSB0byBhbGxvdyB0aGUgYnVzeS1w
b2xsaW5nIHRvIGJlIHBlcmZvcm1lZC4KCklmIHRoZSBhcHBsaWNhdGlvbiBzdG9wcyBwZXJmb3Jt
aW5nIGJ1c3ktcG9sbGluZyB2aWEgYSBzeXN0ZW0gY2FsbCwKdGhlIHdhdGNoZG9nIHRpbWVyIGRl
ZmluZWQgYnkgZ3JvX2ZsdXNoX3RpbWVvdXQgd2lsbCB0aW1lb3V0LCBhbmQKcmVndWxhciBzb2Z0
aXJxIGhhbmRsaW5nIHdpbGwgcmVzdW1lLgoKSW4gc3VtbWFyeTsgSGVhdnkgdHJhZmZpYyBhcHBs
aWNhdGlvbnMgdGhhdCBwcmVmZXIgYnVzeS1wb2xsaW5nIG92ZXIKc29mdGlycSBwcm9jZXNzaW5n
IHNob3VsZCB1c2UgdGhpcyBvcHRpb24uCgpFeGFtcGxlIHVzYWdlOgoKICAkIGVjaG8gMiB8IHN1
ZG8gdGVlIC9zeXMvY2xhc3MvbmV0L2Vuczc4NWYxL25hcGlfZGVmZXJfaGFyZF9pcnFzCiAgJCBl
Y2hvIDIwMDAwMCB8IHN1ZG8gdGVlIC9zeXMvY2xhc3MvbmV0L2Vuczc4NWYxL2dyb19mbHVzaF90
aW1lb3V0CgpOb3RlIHRoYXQgdGhlIHRpbWVvdXQgc2hvdWxkIGJlIGxhcmdlciB0aGFuIHRoZSB1
c2Vyc3BhY2UgcHJvY2Vzc2luZwp3aW5kb3csIG90aGVyd2lzZSB0aGUgd2F0Y2hkb2cgd2lsbCB0
aW1lb3V0IGFuZCBmYWxsIGJhY2sgdG8gcmVndWxhcgpzb2Z0aXJxIHByb2Nlc3NpbmcuCgpFbmFi
bGUgdGhlIFNPX0JVU1lfUE9MTC9TT19QUkVGRVJfQlVTWV9QT0xMIG9wdGlvbnMgb24geW91ciBz
b2NrZXQuCgpTaWduZWQtb2ZmLWJ5OiBCasO2cm4gVMO2cGVsIDxiam9ybi50b3BlbEBpbnRlbC5j
b20+Ci0tLQogYXJjaC9hbHBoYS9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oICB8ICAyICsKIGFy
Y2gvbWlwcy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oICAgfCAgMiArCiBhcmNoL3BhcmlzYy9p
bmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oIHwgIDIgKwogYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkv
YXNtL3NvY2tldC5oICB8ICAyICsKIGZzL2V2ZW50cG9sbC5jICAgICAgICAgICAgICAgICAgICAg
ICAgfCAgMiArLQogaW5jbHVkZS9saW51eC9uZXRkZXZpY2UuaCAgICAgICAgICAgICB8IDM1ICsr
KysrKystLS0tLQogaW5jbHVkZS9uZXQvYnVzeV9wb2xsLmggICAgICAgICAgICAgICB8ICA1ICst
CiBpbmNsdWRlL25ldC9zb2NrLmggICAgICAgICAgICAgICAgICAgIHwgIDMgKysKIGluY2x1ZGUv
dWFwaS9hc20tZ2VuZXJpYy9zb2NrZXQuaCAgICAgfCAgMiArCiBuZXQvY29yZS9kZXYuYyAgICAg
ICAgICAgICAgICAgICAgICAgIHwgNzggKysrKysrKysrKysrKysrKysrKysrLS0tLS0tCiBuZXQv
Y29yZS9zb2NrLmMgICAgICAgICAgICAgICAgICAgICAgIHwgIDkgKysrKwogMTEgZmlsZXMgY2hh
bmdlZCwgMTEwIGluc2VydGlvbnMoKyksIDMyIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2Fy
Y2gvYWxwaGEvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaCBiL2FyY2gvYWxwaGEvaW5jbHVkZS91
YXBpL2FzbS9zb2NrZXQuaAppbmRleCBkZTZjNGRmNjEwODIuLjUzODM1OTY0MjU1NCAxMDA2NDQK
LS0tIGEvYXJjaC9hbHBoYS9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCisrKyBiL2FyY2gvYWxw
aGEvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaApAQCAtMTI0LDYgKzEyNCw4IEBACiAKICNkZWZp
bmUgU09fREVUQUNIX1JFVVNFUE9SVF9CUEYgNjgKIAorI2RlZmluZSBTT19QUkVGRVJfQlVTWV9Q
T0xMCTY5CisKICNpZiAhZGVmaW5lZChfX0tFUk5FTF9fKQogCiAjaWYgX19CSVRTX1BFUl9MT05H
ID09IDY0CmRpZmYgLS1naXQgYS9hcmNoL21pcHMvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaCBi
L2FyY2gvbWlwcy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCmluZGV4IGQwYTllZDJjYTJkNi4u
ZTQwNmU3M2I1ZTZlIDEwMDY0NAotLS0gYS9hcmNoL21pcHMvaW5jbHVkZS91YXBpL2FzbS9zb2Nr
ZXQuaAorKysgYi9hcmNoL21pcHMvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaApAQCAtMTM1LDYg
KzEzNSw4IEBACiAKICNkZWZpbmUgU09fREVUQUNIX1JFVVNFUE9SVF9CUEYgNjgKIAorI2RlZmlu
ZSBTT19QUkVGRVJfQlVTWV9QT0xMCTY5CisKICNpZiAhZGVmaW5lZChfX0tFUk5FTF9fKQogCiAj
aWYgX19CSVRTX1BFUl9MT05HID09IDY0CmRpZmYgLS1naXQgYS9hcmNoL3BhcmlzYy9pbmNsdWRl
L3VhcGkvYXNtL3NvY2tldC5oIGIvYXJjaC9wYXJpc2MvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQu
aAppbmRleCAxMDE3M2MzMjE5NWUuLjFiYzQ2MjAwODg5ZCAxMDA2NDQKLS0tIGEvYXJjaC9wYXJp
c2MvaW5jbHVkZS91YXBpL2FzbS9zb2NrZXQuaAorKysgYi9hcmNoL3BhcmlzYy9pbmNsdWRlL3Vh
cGkvYXNtL3NvY2tldC5oCkBAIC0xMTYsNiArMTE2LDggQEAKIAogI2RlZmluZSBTT19ERVRBQ0hf
UkVVU0VQT1JUX0JQRiAweDQwNDIKIAorI2RlZmluZSBTT19QUkVGRVJfQlVTWV9QT0xMCTB4NDA0
MworCiAjaWYgIWRlZmluZWQoX19LRVJORUxfXykKIAogI2lmIF9fQklUU19QRVJfTE9ORyA9PSA2
NApkaWZmIC0tZ2l0IGEvYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oIGIvYXJj
aC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCmluZGV4IDgwMjliNjgxZmM3Yy4uOTk2
ODhjZjY3M2E0IDEwMDY0NAotLS0gYS9hcmNoL3NwYXJjL2luY2x1ZGUvdWFwaS9hc20vc29ja2V0
LmgKKysrIGIvYXJjaC9zcGFyYy9pbmNsdWRlL3VhcGkvYXNtL3NvY2tldC5oCkBAIC0xMTcsNiAr
MTE3LDggQEAKIAogI2RlZmluZSBTT19ERVRBQ0hfUkVVU0VQT1JUX0JQRiAgMHgwMDQ3CiAKKyNk
ZWZpbmUgU09fUFJFRkVSX0JVU1lfUE9MTAkgMHgwMDQ4CisKICNpZiAhZGVmaW5lZChfX0tFUk5F
TF9fKQogCiAKZGlmZiAtLWdpdCBhL2ZzL2V2ZW50cG9sbC5jIGIvZnMvZXZlbnRwb2xsLmMKaW5k
ZXggNGRmNjExMjk1NjZkLi5lMTFmYWIzYTBiOWUgMTAwNjQ0Ci0tLSBhL2ZzL2V2ZW50cG9sbC5j
CisrKyBiL2ZzL2V2ZW50cG9sbC5jCkBAIC0zOTcsNyArMzk3LDcgQEAgc3RhdGljIHZvaWQgZXBf
YnVzeV9sb29wKHN0cnVjdCBldmVudHBvbGwgKmVwLCBpbnQgbm9uYmxvY2spCiAJdW5zaWduZWQg
aW50IG5hcGlfaWQgPSBSRUFEX09OQ0UoZXAtPm5hcGlfaWQpOwogCiAJaWYgKChuYXBpX2lkID49
IE1JTl9OQVBJX0lEKSAmJiBuZXRfYnVzeV9sb29wX29uKCkpCi0JCW5hcGlfYnVzeV9sb29wKG5h
cGlfaWQsIG5vbmJsb2NrID8gTlVMTCA6IGVwX2J1c3lfbG9vcF9lbmQsIGVwKTsKKwkJbmFwaV9i
dXN5X2xvb3AobmFwaV9pZCwgbm9uYmxvY2sgPyBOVUxMIDogZXBfYnVzeV9sb29wX2VuZCwgZXAs
IGZhbHNlKTsKIH0KIAogc3RhdGljIGlubGluZSB2b2lkIGVwX3Jlc2V0X2J1c3lfcG9sbF9uYXBp
X2lkKHN0cnVjdCBldmVudHBvbGwgKmVwKQpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9uZXRk
ZXZpY2UuaCBiL2luY2x1ZGUvbGludXgvbmV0ZGV2aWNlLmgKaW5kZXggOTY0YjQ5NGIwZThkLi44
NGRjYTNlZmRkMDUgMTAwNjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvbmV0ZGV2aWNlLmgKKysrIGIv
aW5jbHVkZS9saW51eC9uZXRkZXZpY2UuaApAQCAtMzUwLDIzICszNTAsMjUgQEAgc3RydWN0IG5h
cGlfc3RydWN0IHsKIH07CiAKIGVudW0gewotCU5BUElfU1RBVEVfU0NIRUQsCS8qIFBvbGwgaXMg
c2NoZWR1bGVkICovCi0JTkFQSV9TVEFURV9NSVNTRUQsCS8qIHJlc2NoZWR1bGUgYSBuYXBpICov
Ci0JTkFQSV9TVEFURV9ESVNBQkxFLAkvKiBEaXNhYmxlIHBlbmRpbmcgKi8KLQlOQVBJX1NUQVRF
X05QU1ZDLAkvKiBOZXRwb2xsIC0gZG9uJ3QgZGVxdWV1ZSBmcm9tIHBvbGxfbGlzdCAqLwotCU5B
UElfU1RBVEVfTElTVEVELAkvKiBOQVBJIGFkZGVkIHRvIHN5c3RlbSBsaXN0cyAqLwotCU5BUElf
U1RBVEVfTk9fQlVTWV9QT0xMLC8qIERvIG5vdCBhZGQgaW4gbmFwaV9oYXNoLCBubyBidXN5IHBv
bGxpbmcgKi8KLQlOQVBJX1NUQVRFX0lOX0JVU1lfUE9MTCwvKiBza19idXN5X2xvb3AoKSBvd25z
IHRoaXMgTkFQSSAqLworCU5BUElfU1RBVEVfU0NIRUQsCQkvKiBQb2xsIGlzIHNjaGVkdWxlZCAq
LworCU5BUElfU1RBVEVfTUlTU0VELAkJLyogcmVzY2hlZHVsZSBhIG5hcGkgKi8KKwlOQVBJX1NU
QVRFX0RJU0FCTEUsCQkvKiBEaXNhYmxlIHBlbmRpbmcgKi8KKwlOQVBJX1NUQVRFX05QU1ZDLAkJ
LyogTmV0cG9sbCAtIGRvbid0IGRlcXVldWUgZnJvbSBwb2xsX2xpc3QgKi8KKwlOQVBJX1NUQVRF
X0xJU1RFRCwJCS8qIE5BUEkgYWRkZWQgdG8gc3lzdGVtIGxpc3RzICovCisJTkFQSV9TVEFURV9O
T19CVVNZX1BPTEwsCS8qIERvIG5vdCBhZGQgaW4gbmFwaV9oYXNoLCBubyBidXN5IHBvbGxpbmcg
Ki8KKwlOQVBJX1NUQVRFX0lOX0JVU1lfUE9MTCwJLyogc2tfYnVzeV9sb29wKCkgb3ducyB0aGlz
IE5BUEkgKi8KKwlOQVBJX1NUQVRFX1BSRUZFUl9CVVNZX1BPTEwsCS8qIHByZWZlciBidXN5LXBv
bGxpbmcgb3ZlciBzb2Z0aXJxIHByb2Nlc3NpbmcqLwogfTsKIAogZW51bSB7Ci0JTkFQSUZfU1RB
VEVfU0NIRUQJID0gQklUKE5BUElfU1RBVEVfU0NIRUQpLAotCU5BUElGX1NUQVRFX01JU1NFRAkg
PSBCSVQoTkFQSV9TVEFURV9NSVNTRUQpLAotCU5BUElGX1NUQVRFX0RJU0FCTEUJID0gQklUKE5B
UElfU1RBVEVfRElTQUJMRSksCi0JTkFQSUZfU1RBVEVfTlBTVkMJID0gQklUKE5BUElfU1RBVEVf
TlBTVkMpLAotCU5BUElGX1NUQVRFX0xJU1RFRAkgPSBCSVQoTkFQSV9TVEFURV9MSVNURUQpLAot
CU5BUElGX1NUQVRFX05PX0JVU1lfUE9MTCA9IEJJVChOQVBJX1NUQVRFX05PX0JVU1lfUE9MTCks
Ci0JTkFQSUZfU1RBVEVfSU5fQlVTWV9QT0xMID0gQklUKE5BUElfU1RBVEVfSU5fQlVTWV9QT0xM
KSwKKwlOQVBJRl9TVEFURV9TQ0hFRAkJPSBCSVQoTkFQSV9TVEFURV9TQ0hFRCksCisJTkFQSUZf
U1RBVEVfTUlTU0VECQk9IEJJVChOQVBJX1NUQVRFX01JU1NFRCksCisJTkFQSUZfU1RBVEVfRElT
QUJMRQkJPSBCSVQoTkFQSV9TVEFURV9ESVNBQkxFKSwKKwlOQVBJRl9TVEFURV9OUFNWQwkJPSBC
SVQoTkFQSV9TVEFURV9OUFNWQyksCisJTkFQSUZfU1RBVEVfTElTVEVECQk9IEJJVChOQVBJX1NU
QVRFX0xJU1RFRCksCisJTkFQSUZfU1RBVEVfTk9fQlVTWV9QT0xMCT0gQklUKE5BUElfU1RBVEVf
Tk9fQlVTWV9QT0xMKSwKKwlOQVBJRl9TVEFURV9JTl9CVVNZX1BPTEwJPSBCSVQoTkFQSV9TVEFU
RV9JTl9CVVNZX1BPTEwpLAorCU5BUElGX1NUQVRFX1BSRUZFUl9CVVNZX1BPTEwJPSBCSVQoTkFQ
SV9TVEFURV9QUkVGRVJfQlVTWV9QT0xMKSwKIH07CiAKIGVudW0gZ3JvX3Jlc3VsdCB7CkBAIC00
MzcsNiArNDM5LDExIEBAIHN0YXRpYyBpbmxpbmUgYm9vbCBuYXBpX2Rpc2FibGVfcGVuZGluZyhz
dHJ1Y3QgbmFwaV9zdHJ1Y3QgKm4pCiAJcmV0dXJuIHRlc3RfYml0KE5BUElfU1RBVEVfRElTQUJM
RSwgJm4tPnN0YXRlKTsKIH0KIAorc3RhdGljIGlubGluZSBib29sIG5hcGlfcHJlZmVyX2J1c3lf
cG9sbChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm4pCit7CisJcmV0dXJuIHRlc3RfYml0KE5BUElfU1RB
VEVfUFJFRkVSX0JVU1lfUE9MTCwgJm4tPnN0YXRlKTsKK30KKwogYm9vbCBuYXBpX3NjaGVkdWxl
X3ByZXAoc3RydWN0IG5hcGlfc3RydWN0ICpuKTsKIAogLyoqCmRpZmYgLS1naXQgYS9pbmNsdWRl
L25ldC9idXN5X3BvbGwuaCBiL2luY2x1ZGUvbmV0L2J1c3lfcG9sbC5oCmluZGV4IGIwMDFmYTkx
YzE0ZS4uMDI5MmI4MzUzZDdlIDEwMDY0NAotLS0gYS9pbmNsdWRlL25ldC9idXN5X3BvbGwuaAor
KysgYi9pbmNsdWRlL25ldC9idXN5X3BvbGwuaApAQCAtNDMsNyArNDMsNyBAQCBib29sIHNrX2J1
c3lfbG9vcF9lbmQodm9pZCAqcCwgdW5zaWduZWQgbG9uZyBzdGFydF90aW1lKTsKIAogdm9pZCBu
YXBpX2J1c3lfbG9vcCh1bnNpZ25lZCBpbnQgbmFwaV9pZCwKIAkJICAgIGJvb2wgKCpsb29wX2Vu
ZCkodm9pZCAqLCB1bnNpZ25lZCBsb25nKSwKLQkJICAgIHZvaWQgKmxvb3BfZW5kX2FyZyk7CisJ
CSAgICB2b2lkICpsb29wX2VuZF9hcmcsIGJvb2wgcHJlZmVyX2J1c3lfcG9sbCk7CiAKICNlbHNl
IC8qIENPTkZJR19ORVRfUlhfQlVTWV9QT0xMICovCiBzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGxv
bmcgbmV0X2J1c3lfbG9vcF9vbih2b2lkKQpAQCAtMTA1LDcgKzEwNSw4IEBAIHN0YXRpYyBpbmxp
bmUgdm9pZCBza19idXN5X2xvb3Aoc3RydWN0IHNvY2sgKnNrLCBpbnQgbm9uYmxvY2spCiAJdW5z
aWduZWQgaW50IG5hcGlfaWQgPSBSRUFEX09OQ0Uoc2stPnNrX25hcGlfaWQpOwogCiAJaWYgKG5h
cGlfaWQgPj0gTUlOX05BUElfSUQpCi0JCW5hcGlfYnVzeV9sb29wKG5hcGlfaWQsIG5vbmJsb2Nr
ID8gTlVMTCA6IHNrX2J1c3lfbG9vcF9lbmQsIHNrKTsKKwkJbmFwaV9idXN5X2xvb3AobmFwaV9p
ZCwgbm9uYmxvY2sgPyBOVUxMIDogc2tfYnVzeV9sb29wX2VuZCwgc2ssCisJCQkgICAgICAgUkVB
RF9PTkNFKHNrLT5za19wcmVmZXJfYnVzeV9wb2xsKSk7CiAjZW5kaWYKIH0KIApkaWZmIC0tZ2l0
IGEvaW5jbHVkZS9uZXQvc29jay5oIGIvaW5jbHVkZS9uZXQvc29jay5oCmluZGV4IGE1YzZhZTc4
ZGY3Ny4uNzE2OTYwYTE1ZTgzIDEwMDY0NAotLS0gYS9pbmNsdWRlL25ldC9zb2NrLmgKKysrIGIv
aW5jbHVkZS9uZXQvc29jay5oCkBAIC00NzksNiArNDc5LDkgQEAgc3RydWN0IHNvY2sgewogCXUz
MgkJCXNrX2Fja19iYWNrbG9nOwogCXUzMgkJCXNrX21heF9hY2tfYmFja2xvZzsKIAlrdWlkX3QJ
CQlza191aWQ7CisjaWZkZWYgQ09ORklHX05FVF9SWF9CVVNZX1BPTEwKKwl1OAkJCXNrX3ByZWZl
cl9idXN5X3BvbGw7CisjZW5kaWYKIAlzdHJ1Y3QgcGlkCQkqc2tfcGVlcl9waWQ7CiAJY29uc3Qg
c3RydWN0IGNyZWQJKnNrX3BlZXJfY3JlZDsKIAlsb25nCQkJc2tfcmN2dGltZW87CmRpZmYgLS1n
aXQgYS9pbmNsdWRlL3VhcGkvYXNtLWdlbmVyaWMvc29ja2V0LmggYi9pbmNsdWRlL3VhcGkvYXNt
LWdlbmVyaWMvc29ja2V0LmgKaW5kZXggNzdmN2MxNjM4ZWIxLi43ZGQwMjQwOGI3Y2UgMTAwNjQ0
Ci0tLSBhL2luY2x1ZGUvdWFwaS9hc20tZ2VuZXJpYy9zb2NrZXQuaAorKysgYi9pbmNsdWRlL3Vh
cGkvYXNtLWdlbmVyaWMvc29ja2V0LmgKQEAgLTExOSw2ICsxMTksOCBAQAogCiAjZGVmaW5lIFNP
X0RFVEFDSF9SRVVTRVBPUlRfQlBGIDY4CiAKKyNkZWZpbmUgU09fUFJFRkVSX0JVU1lfUE9MTAk2
OQorCiAjaWYgIWRlZmluZWQoX19LRVJORUxfXykKIAogI2lmIF9fQklUU19QRVJfTE9ORyA9PSA2
NCB8fCAoZGVmaW5lZChfX3g4Nl82NF9fKSAmJiBkZWZpbmVkKF9fSUxQMzJfXykpCmRpZmYgLS1n
aXQgYS9uZXQvY29yZS9kZXYuYyBiL25ldC9jb3JlL2Rldi5jCmluZGV4IDk0OTlhNDE0ZDY3ZS4u
NDkwMTViMDU5NTQ5IDEwMDY0NAotLS0gYS9uZXQvY29yZS9kZXYuYworKysgYi9uZXQvY29yZS9k
ZXYuYwpAQCAtNjQ1NCw3ICs2NDU0LDggQEAgYm9vbCBuYXBpX2NvbXBsZXRlX2RvbmUoc3RydWN0
IG5hcGlfc3RydWN0ICpuLCBpbnQgd29ya19kb25lKQogCiAJCVdBUk5fT05fT05DRSghKHZhbCAm
IE5BUElGX1NUQVRFX1NDSEVEKSk7CiAKLQkJbmV3ID0gdmFsICYgfihOQVBJRl9TVEFURV9NSVNT
RUQgfCBOQVBJRl9TVEFURV9TQ0hFRCk7CisJCW5ldyA9IHZhbCAmIH4oTkFQSUZfU1RBVEVfTUlT
U0VEIHwgTkFQSUZfU1RBVEVfU0NIRUQgfAorCQkJICAgICAgTkFQSUZfU1RBVEVfUFJFRkVSX0JV
U1lfUE9MTCk7CiAKIAkJLyogSWYgU1RBVEVfTUlTU0VEIHdhcyBzZXQsIGxlYXZlIFNUQVRFX1ND
SEVEIHNldCwKIAkJICogYmVjYXVzZSB3ZSB3aWxsIGNhbGwgbmFwaS0+cG9sbCgpIG9uZSBtb3Jl
IHRpbWUuCkBAIC02NDkzLDggKzY0OTQsMjkgQEAgc3RhdGljIHN0cnVjdCBuYXBpX3N0cnVjdCAq
bmFwaV9ieV9pZCh1bnNpZ25lZCBpbnQgbmFwaV9pZCkKIAogI2RlZmluZSBCVVNZX1BPTExfQlVE
R0VUIDgKIAotc3RhdGljIHZvaWQgYnVzeV9wb2xsX3N0b3Aoc3RydWN0IG5hcGlfc3RydWN0ICpu
YXBpLCB2b2lkICpoYXZlX3BvbGxfbG9jaykKK3N0YXRpYyB2b2lkIF9fYnVzeV9wb2xsX3N0b3Ao
c3RydWN0IG5hcGlfc3RydWN0ICpuYXBpLCBib29sIHNraXBfc2NoZWR1bGUpCiB7CisJaWYgKCFz
a2lwX3NjaGVkdWxlKSB7CisJCWdyb19ub3JtYWxfbGlzdChuYXBpKTsKKwkJX19uYXBpX3NjaGVk
dWxlKG5hcGkpOworCQlyZXR1cm47CisJfQorCisJaWYgKG5hcGktPmdyb19iaXRtYXNrKSB7CisJ
CS8qIGZsdXNoIHRvbyBvbGQgcGFja2V0cworCQkgKiBJZiBIWiA8IDEwMDAsIGZsdXNoIGFsbCBw
YWNrZXRzLgorCQkgKi8KKwkJbmFwaV9ncm9fZmx1c2gobmFwaSwgSFogPj0gMTAwMCk7CisJfQor
CisJZ3JvX25vcm1hbF9saXN0KG5hcGkpOworCWNsZWFyX2JpdChOQVBJX1NUQVRFX1NDSEVELCAm
bmFwaS0+c3RhdGUpOworfQorCitzdGF0aWMgdm9pZCBidXN5X3BvbGxfc3RvcChzdHJ1Y3QgbmFw
aV9zdHJ1Y3QgKm5hcGksIHZvaWQgKmhhdmVfcG9sbF9sb2NrLCBib29sIHByZWZlcl9idXN5X3Bv
bGwpCit7CisJYm9vbCBza2lwX3NjaGVkdWxlID0gZmFsc2U7CisJdW5zaWduZWQgbG9uZyB0aW1l
b3V0OwogCWludCByYzsKIAogCS8qIEJ1c3kgcG9sbGluZyBtZWFucyB0aGVyZSBpcyBhIGhpZ2gg
Y2hhbmNlIGRldmljZSBkcml2ZXIgaGFyZCBpcnEKQEAgLTY1MTEsNiArNjUzMywxNSBAQCBzdGF0
aWMgdm9pZCBidXN5X3BvbGxfc3RvcChzdHJ1Y3QgbmFwaV9zdHJ1Y3QgKm5hcGksIHZvaWQgKmhh
dmVfcG9sbF9sb2NrKQogCiAJbG9jYWxfYmhfZGlzYWJsZSgpOwogCisJaWYgKHByZWZlcl9idXN5
X3BvbGwpIHsKKwkJbmFwaS0+ZGVmZXJfaGFyZF9pcnFzX2NvdW50ID0gUkVBRF9PTkNFKG5hcGkt
PmRldi0+bmFwaV9kZWZlcl9oYXJkX2lycXMpOworCQl0aW1lb3V0ID0gUkVBRF9PTkNFKG5hcGkt
PmRldi0+Z3JvX2ZsdXNoX3RpbWVvdXQpOworCQlpZiAobmFwaS0+ZGVmZXJfaGFyZF9pcnFzX2Nv
dW50ICYmIHRpbWVvdXQpIHsKKwkJCWhydGltZXJfc3RhcnQoJm5hcGktPnRpbWVyLCBuc190b19r
dGltZSh0aW1lb3V0KSwgSFJUSU1FUl9NT0RFX1JFTF9QSU5ORUQpOworCQkJc2tpcF9zY2hlZHVs
ZSA9IHRydWU7CisJCX0KKwl9CisKIAkvKiBBbGwgd2UgcmVhbGx5IHdhbnQgaGVyZSBpcyB0byBy
ZS1lbmFibGUgZGV2aWNlIGludGVycnVwdHMuCiAJICogSWRlYWxseSwgYSBuZXcgbmRvX2J1c3lf
cG9sbF9zdG9wKCkgY291bGQgYXZvaWQgYW5vdGhlciByb3VuZC4KIAkgKi8KQEAgLTY1MjEsMTkg
KzY1NTIsMTQgQEAgc3RhdGljIHZvaWQgYnVzeV9wb2xsX3N0b3Aoc3RydWN0IG5hcGlfc3RydWN0
ICpuYXBpLCB2b2lkICpoYXZlX3BvbGxfbG9jaykKIAkgKi8KIAl0cmFjZV9uYXBpX3BvbGwobmFw
aSwgcmMsIEJVU1lfUE9MTF9CVURHRVQpOwogCW5ldHBvbGxfcG9sbF91bmxvY2soaGF2ZV9wb2xs
X2xvY2spOwotCWlmIChyYyA9PSBCVVNZX1BPTExfQlVER0VUKSB7Ci0JCS8qIEFzIHRoZSB3aG9s
ZSBidWRnZXQgd2FzIHNwZW50LCB3ZSBzdGlsbCBvd24gdGhlIG5hcGkgc28gY2FuCi0JCSAqIHNh
ZmVseSBoYW5kbGUgdGhlIHJ4X2xpc3QuCi0JCSAqLwotCQlncm9fbm9ybWFsX2xpc3QobmFwaSk7
Ci0JCV9fbmFwaV9zY2hlZHVsZShuYXBpKTsKLQl9CisJaWYgKHJjID09IEJVU1lfUE9MTF9CVURH
RVQpCisJCV9fYnVzeV9wb2xsX3N0b3AobmFwaSwgc2tpcF9zY2hlZHVsZSk7CiAJbG9jYWxfYmhf
ZW5hYmxlKCk7CiB9CiAKIHZvaWQgbmFwaV9idXN5X2xvb3AodW5zaWduZWQgaW50IG5hcGlfaWQs
CiAJCSAgICBib29sICgqbG9vcF9lbmQpKHZvaWQgKiwgdW5zaWduZWQgbG9uZyksCi0JCSAgICB2
b2lkICpsb29wX2VuZF9hcmcpCisJCSAgICB2b2lkICpsb29wX2VuZF9hcmcsIGJvb2wgcHJlZmVy
X2J1c3lfcG9sbCkKIHsKIAl1bnNpZ25lZCBsb25nIHN0YXJ0X3RpbWUgPSBsb29wX2VuZCA/IGJ1
c3lfbG9vcF9jdXJyZW50X3RpbWUoKSA6IDA7CiAJaW50ICgqbmFwaV9wb2xsKShzdHJ1Y3QgbmFw
aV9zdHJ1Y3QgKm5hcGksIGludCBidWRnZXQpOwpAQCAtNjU2MSwxMiArNjU4NywxOCBAQCB2b2lk
IG5hcGlfYnVzeV9sb29wKHVuc2lnbmVkIGludCBuYXBpX2lkLAogCQkJICogd2UgYXZvaWQgZGly
dHlpbmcgbmFwaS0+c3RhdGUgYXMgbXVjaCBhcyB3ZSBjYW4uCiAJCQkgKi8KIAkJCWlmICh2YWwg
JiAoTkFQSUZfU1RBVEVfRElTQUJMRSB8IE5BUElGX1NUQVRFX1NDSEVEIHwKLQkJCQkgICBOQVBJ
Rl9TVEFURV9JTl9CVVNZX1BPTEwpKQorCQkJCSAgIE5BUElGX1NUQVRFX0lOX0JVU1lfUE9MTCkp
IHsKKwkJCQlpZiAocHJlZmVyX2J1c3lfcG9sbCkKKwkJCQkJc2V0X2JpdChOQVBJX1NUQVRFX1BS
RUZFUl9CVVNZX1BPTEwsICZuYXBpLT5zdGF0ZSk7CiAJCQkJZ290byBjb3VudDsKKwkJCX0KIAkJ
CWlmIChjbXB4Y2hnKCZuYXBpLT5zdGF0ZSwgdmFsLAogCQkJCSAgICB2YWwgfCBOQVBJRl9TVEFU
RV9JTl9CVVNZX1BPTEwgfAotCQkJCQkgIE5BUElGX1NUQVRFX1NDSEVEKSAhPSB2YWwpCisJCQkJ
CSAgTkFQSUZfU1RBVEVfU0NIRUQpICE9IHZhbCkgeworCQkJCWlmIChwcmVmZXJfYnVzeV9wb2xs
KQorCQkJCQlzZXRfYml0KE5BUElfU1RBVEVfUFJFRkVSX0JVU1lfUE9MTCwgJm5hcGktPnN0YXRl
KTsKIAkJCQlnb3RvIGNvdW50OworCQkJfQogCQkJaGF2ZV9wb2xsX2xvY2sgPSBuZXRwb2xsX3Bv
bGxfbG9jayhuYXBpKTsKIAkJCW5hcGlfcG9sbCA9IG5hcGktPnBvbGw7CiAJCX0KQEAgLTY1ODQs
NyArNjYxNiw3IEBAIHZvaWQgbmFwaV9idXN5X2xvb3AodW5zaWduZWQgaW50IG5hcGlfaWQsCiAK
IAkJaWYgKHVubGlrZWx5KG5lZWRfcmVzY2hlZCgpKSkgewogCQkJaWYgKG5hcGlfcG9sbCkKLQkJ
CQlidXN5X3BvbGxfc3RvcChuYXBpLCBoYXZlX3BvbGxfbG9jayk7CisJCQkJYnVzeV9wb2xsX3N0
b3AobmFwaSwgaGF2ZV9wb2xsX2xvY2ssIHByZWZlcl9idXN5X3BvbGwpOwogCQkJcHJlZW1wdF9l
bmFibGUoKTsKIAkJCXJjdV9yZWFkX3VubG9jaygpOwogCQkJY29uZF9yZXNjaGVkKCk7CkBAIC02
NTk1LDcgKzY2MjcsNyBAQCB2b2lkIG5hcGlfYnVzeV9sb29wKHVuc2lnbmVkIGludCBuYXBpX2lk
LAogCQljcHVfcmVsYXgoKTsKIAl9CiAJaWYgKG5hcGlfcG9sbCkKLQkJYnVzeV9wb2xsX3N0b3Ao
bmFwaSwgaGF2ZV9wb2xsX2xvY2spOworCQlidXN5X3BvbGxfc3RvcChuYXBpLCBoYXZlX3BvbGxf
bG9jaywgcHJlZmVyX2J1c3lfcG9sbCk7CiAJcHJlZW1wdF9lbmFibGUoKTsKIG91dDoKIAlyY3Vf
cmVhZF91bmxvY2soKTsKQEAgLTY2NDYsOCArNjY3OCwxMCBAQCBzdGF0aWMgZW51bSBocnRpbWVy
X3Jlc3RhcnQgbmFwaV93YXRjaGRvZyhzdHJ1Y3QgaHJ0aW1lciAqdGltZXIpCiAJICogTkFQSV9T
VEFURV9NSVNTRUQsIHNpbmNlIHdlIGRvIG5vdCByZWFjdCB0byBhIGRldmljZSBJUlEuCiAJICov
CiAJaWYgKCFuYXBpX2Rpc2FibGVfcGVuZGluZyhuYXBpKSAmJgotCSAgICAhdGVzdF9hbmRfc2V0
X2JpdChOQVBJX1NUQVRFX1NDSEVELCAmbmFwaS0+c3RhdGUpKQorCSAgICAhdGVzdF9hbmRfc2V0
X2JpdChOQVBJX1NUQVRFX1NDSEVELCAmbmFwaS0+c3RhdGUpKSB7CisJCWNsZWFyX2JpdChOQVBJ
X1NUQVRFX1BSRUZFUl9CVVNZX1BPTEwsICZuYXBpLT5zdGF0ZSk7CiAJCV9fbmFwaV9zY2hlZHVs
ZV9pcnFvZmYobmFwaSk7CisJfQogCiAJcmV0dXJuIEhSVElNRVJfTk9SRVNUQVJUOwogfQpAQCAt
NjcwNSw2ICs2NzM5LDcgQEAgdm9pZCBuYXBpX2Rpc2FibGUoc3RydWN0IG5hcGlfc3RydWN0ICpu
KQogCiAJaHJ0aW1lcl9jYW5jZWwoJm4tPnRpbWVyKTsKIAorCWNsZWFyX2JpdChOQVBJX1NUQVRF
X1BSRUZFUl9CVVNZX1BPTEwsICZuLT5zdGF0ZSk7CiAJY2xlYXJfYml0KE5BUElfU1RBVEVfRElT
QUJMRSwgJm4tPnN0YXRlKTsKIH0KIEVYUE9SVF9TWU1CT0wobmFwaV9kaXNhYmxlKTsKQEAgLTY3
NjcsNiArNjgwMiwxOSBAQCBzdGF0aWMgaW50IG5hcGlfcG9sbChzdHJ1Y3QgbmFwaV9zdHJ1Y3Qg
Km4sIHN0cnVjdCBsaXN0X2hlYWQgKnJlcG9sbCkKIAlpZiAobGlrZWx5KHdvcmsgPCB3ZWlnaHQp
KQogCQlnb3RvIG91dF91bmxvY2s7CiAKKwkvKiBUaGUgTkFQSSBjb250ZXh0IGhhcyBtb3JlIHBy
b2Nlc3Npbmcgd29yaywgYnV0IGJ1c3ktcG9sbGluZworCSAqIGlzIHByZWZlcnJlZC4gRXhpdCBl
YXJseS4KKwkgKi8KKwlpZiAobmFwaV9wcmVmZXJfYnVzeV9wb2xsKG4pKSB7CisJCWlmIChuYXBp
X2NvbXBsZXRlX2RvbmUobiwgd29yaykpIHsKKwkJCS8qIElmIHRpbWVvdXQgaXMgbm90IHNldCwg
d2UgbmVlZCB0byBtYWtlIHN1cmUKKwkJCSAqIHRoYXQgdGhlIE5BUEkgaXMgcmUtc2NoZWR1bGVk
LgorCQkJICovCisJCQluYXBpX3NjaGVkdWxlKG4pOworCQl9CisJCWdvdG8gb3V0X3VubG9jazsK
Kwl9CisKIAkvKiBEcml2ZXJzIG11c3Qgbm90IG1vZGlmeSB0aGUgTkFQSSBzdGF0ZSBpZiB0aGV5
CiAJICogY29uc3VtZSB0aGUgZW50aXJlIHdlaWdodC4gIEluIHN1Y2ggY2FzZXMgdGhpcyBjb2Rl
CiAJICogc3RpbGwgIm93bnMiIHRoZSBOQVBJIGluc3RhbmNlIGFuZCB0aGVyZWZvcmUgY2FuCmRp
ZmYgLS1naXQgYS9uZXQvY29yZS9zb2NrLmMgYi9uZXQvY29yZS9zb2NrLmMKaW5kZXggNzI3ZWEx
Y2M2MzNjLi4yNDhmNmE3NjM2NjEgMTAwNjQ0Ci0tLSBhL25ldC9jb3JlL3NvY2suYworKysgYi9u
ZXQvY29yZS9zb2NrLmMKQEAgLTExNTksNiArMTE1OSwxMiBAQCBpbnQgc29ja19zZXRzb2Nrb3B0
KHN0cnVjdCBzb2NrZXQgKnNvY2ssIGludCBsZXZlbCwgaW50IG9wdG5hbWUsCiAJCQkJc2stPnNr
X2xsX3VzZWMgPSB2YWw7CiAJCX0KIAkJYnJlYWs7CisJY2FzZSBTT19QUkVGRVJfQlVTWV9QT0xM
OgorCQlpZiAodmFsYm9vbCAmJiAhY2FwYWJsZShDQVBfTkVUX0FETUlOKSkKKwkJCXJldCA9IC1F
UEVSTTsKKwkJZWxzZQorCQkJc2stPnNrX3ByZWZlcl9idXN5X3BvbGwgPSB2YWxib29sOworCQli
cmVhazsKICNlbmRpZgogCiAJY2FzZSBTT19NQVhfUEFDSU5HX1JBVEU6CkBAIC0xNTIzLDYgKzE1
MjksOSBAQCBpbnQgc29ja19nZXRzb2Nrb3B0KHN0cnVjdCBzb2NrZXQgKnNvY2ssIGludCBsZXZl
bCwgaW50IG9wdG5hbWUsCiAJY2FzZSBTT19CVVNZX1BPTEw6CiAJCXYudmFsID0gc2stPnNrX2xs
X3VzZWM7CiAJCWJyZWFrOworCWNhc2UgU09fUFJFRkVSX0JVU1lfUE9MTDoKKwkJdi52YWwgPSBz
ay0+c2tfcHJlZmVyX2J1c3lfcG9sbDsKKwkJYnJlYWs7CiAjZW5kaWYKIAogCWNhc2UgU09fTUFY
X1BBQ0lOR19SQVRFOgotLSAKMi4yNy4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpJbnRlbC13aXJlZC1sYW4gbWFpbGluZyBsaXN0CkludGVsLXdpcmVk
LWxhbkBvc3Vvc2wub3JnCmh0dHBzOi8vbGlzdHMub3N1b3NsLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L2ludGVsLXdpcmVkLWxhbgo=
