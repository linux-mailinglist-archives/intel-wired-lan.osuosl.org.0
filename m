Return-Path: <intel-wired-lan-bounces@osuosl.org>
X-Original-To: lists+intel-wired-lan@lfdr.de
Delivered-To: lists+intel-wired-lan@lfdr.de
Received: from smtp1.osuosl.org (smtp1.osuosl.org [IPv6:2605:bc80:3010::138])
	by mail.lfdr.de (Postfix) with ESMTPS id 0CAEA60C6B0
	for <lists+intel-wired-lan@lfdr.de>; Tue, 25 Oct 2022 10:41:04 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by smtp1.osuosl.org (Postfix) with ESMTP id 0A5EF81304;
	Tue, 25 Oct 2022 08:41:02 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 0A5EF81304
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=osuosl.org;
	s=default; t=1666687262;
	bh=rxZ1+75LEJsCZ6EIBiAbvDem4MgPurEVrhN0SRo76xg=;
	h=Date:To:References:From:In-Reply-To:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 Cc:From;
	b=xKQ7VzMI9eOu+FsrbwGaDTu5t8UCwUHqoeUx6IlWJGJyH6I+u/cj6j6sy57Gxhl5Z
	 h3p0+QjW9yDRgbsyBszExrOVWY9JsyahBsNc1GsKHOBuXE0+QrkroTOi9aiYQpRwvm
	 OyeLQqREHoera03CvinmkghSHIBPJCMYqpmVr36CnZ7jb+wD90l3kAKpbXb9e9JH58
	 xv2YJCIAl9GOduJi7Jj6XQEav10zeaicnptfc+kE+lBiVCLpntHB4eKhpTVCYkWKiA
	 JmmyobAnMN1lN4oxq83xtT36y+n0woYAtJAlZbBK+2JzC4atQB0KVTB19XCEez8N0l
	 cVTniil0PARjA==
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp1.osuosl.org ([127.0.0.1])
	by localhost (smtp1.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OCzaJu00bBKB; Tue, 25 Oct 2022 08:41:00 +0000 (UTC)
Received: from ash.osuosl.org (ash.osuosl.org [140.211.166.34])
	by smtp1.osuosl.org (Postfix) with ESMTP id 55318812D4;
	Tue, 25 Oct 2022 08:41:00 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp1.osuosl.org 55318812D4
X-Original-To: intel-wired-lan@lists.osuosl.org
Delivered-To: intel-wired-lan@lists.osuosl.org
Received: from smtp3.osuosl.org (smtp3.osuosl.org [140.211.166.136])
 by ash.osuosl.org (Postfix) with ESMTP id 9AC571BF2FC
 for <intel-wired-lan@lists.osuosl.org>; Tue, 25 Oct 2022 08:40:54 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
 by smtp3.osuosl.org (Postfix) with ESMTP id 74FF360B10
 for <intel-wired-lan@lists.osuosl.org>; Tue, 25 Oct 2022 08:40:54 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 74FF360B10
X-Virus-Scanned: amavisd-new at osuosl.org
Received: from smtp3.osuosl.org ([127.0.0.1])
 by localhost (smtp3.osuosl.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id nh7XCsxgxOCC for <intel-wired-lan@lists.osuosl.org>;
 Tue, 25 Oct 2022 08:40:52 +0000 (UTC)
X-Greylist: from auto-whitelisted by SQLgrey-1.8.0
DKIM-Filter: OpenDKIM Filter v2.11.0 smtp3.osuosl.org 22F2660AEA
Received: from mx1.molgen.mpg.de (mx3.molgen.mpg.de [141.14.17.11])
 by smtp3.osuosl.org (Postfix) with ESMTPS id 22F2660AEA
 for <intel-wired-lan@lists.osuosl.org>; Tue, 25 Oct 2022 08:40:51 +0000 (UTC)
Received: from [141.14.220.45] (g45.guest.molgen.mpg.de [141.14.220.45])
 (using TLSv1.3 with cipher TLS_AES_128_GCM_SHA256 (128/128 bits)
 key-exchange X25519 server-signature RSA-PSS (2048 bits))
 (No client certificate requested) (Authenticated sender: pmenzel)
 by mx.molgen.mpg.de (Postfix) with ESMTPSA id 0231961EA1934;
 Tue, 25 Oct 2022 10:40:49 +0200 (CEST)
Message-ID: <38508641-6127-97df-304f-c85477f2a9eb@molgen.mpg.de>
Date: Tue, 25 Oct 2022 10:40:48 +0200
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101
 Thunderbird/102.3.3
Content-Language: en-US
To: Andrii Staikov <andrii.staikov@intel.com>,
 Sylwester Dziedziuch <sylwesterx.dziedziuch@intel.com>
References: <20221025072705.1270255-1-andrii.staikov@intel.com>
From: Paul Menzel <pmenzel@molgen.mpg.de>
In-Reply-To: <20221025072705.1270255-1-andrii.staikov@intel.com>
Subject: Re: [Intel-wired-lan] [PATCH net v1] i40e: Fix crash when rebuild
 failed in i40e_xdp_setup
X-BeenThere: intel-wired-lan@osuosl.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Intel Wired Ethernet Linux Kernel Driver Development
 <intel-wired-lan.osuosl.org>
List-Unsubscribe: <https://lists.osuosl.org/mailman/options/intel-wired-lan>, 
 <mailto:intel-wired-lan-request@osuosl.org?subject=unsubscribe>
List-Archive: <http://lists.osuosl.org/pipermail/intel-wired-lan/>
List-Post: <mailto:intel-wired-lan@osuosl.org>
List-Help: <mailto:intel-wired-lan-request@osuosl.org?subject=help>
List-Subscribe: <https://lists.osuosl.org/mailman/listinfo/intel-wired-lan>,
 <mailto:intel-wired-lan-request@osuosl.org?subject=subscribe>
Cc: intel-wired-lan@lists.osuosl.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: intel-wired-lan-bounces@osuosl.org
Sender: "Intel-wired-lan" <intel-wired-lan-bounces@osuosl.org>

RGVhciBBbmRyaWksIGRlYXIgU3lsd2VzdGVyLAoKClRoYW5rIHlvdSBmb3IgdGhlIHBhdGNoLgoK
CkFtIDI1LjEwLjIyIHVtIDA5OjI3IHNjaHJpZWIgQW5kcmlpIFN0YWlrb3Y6Cj4gRnJvbTogU3ls
d2VzdGVyIER6aWVkeml1Y2ggPHN5bHdlc3RlcnguZHppZWR6aXVjaEBpbnRlbC5jb20+CgpJbiB0
aGUgc3VtbWFyeS90aXRsZSwgbWF5YmUgdXNlOgoK4oCmIHJlYnVpbGQgZmFpbHMg4oCmCgo+IFdo
ZW4gYXR0YWNoaW5nIFhEUCBwcm9ncmFtIG9uIGk0MGUgZHJpdmVyIHRoZXJlIHdhcyBhCj4gcmVz
ZXQgYW5kIHJlYnVpbGQgb2YgdGhlIGludGVyZmFjZSB0byByZWNvbmZpZ3VyZSB0aGUKPiBxdWV1
ZXMgZm9yIFhEUCBvcGVyYXRpb24uIElmIG9uZSBvZiB0aGUgc3RlcHMgb2YgcmVidWlsZAo+IGZh
aWxlZCB0aGVuIHRoZSBpbnRlcmZhY2Ugd2FzIGxlZnQgaW4gaW5jb3JyZWN0IHN0YXRlCj4gdGhh
dCBjb3VsZCBsZWFkIHRvIGEgY3Jhc2guIElmIHJlYnVpbGQgZmFpbGVkIHdoaWxlCj4gZ2V0dGlu
ZyBjYXBhYmlsaXRpZXMgZnJvbSBIVyBzdWNoIGNyYXNoIG9jY3VyczoKClBsZWFzZSByZWZsb3cg
Zm9yIDc1IGNoYXJhY3RlcnMgcGVyIGxpbmUuCgo+IGNhcGFiaWxpdHkgZGlzY292ZXJ5IGZhaWxl
ZCwgZXJyIEk0MEVfRVJSX0FETUlOX1FVRVVFX1RJTUVPVVQgYXFfZXJyIE9LCj4gQlVHOiB1bmFi
bGUgdG8gaGFuZGxlIGtlcm5lbCBOVUxMIHBvaW50ZXIgZGVyZWZlcmVuY2UgYXQgMDAwMDAwMDAw
MDAwMDAwMAo+IENhbGwgVHJhY2U6Cj4gPyBpNDBlX3JlY29uZmlnX3Jzc19xdWV1ZXMrMHgxMjAv
MHgxMjAgW2k0MGVdCj4gICAgZGV2X3hkcF9pbnN0YWxsKzB4NzAvMHgxMDAKPiAgICBkZXZfeGRw
X2F0dGFjaCsweDFkNy8weDUzMAo+ICAgIGRldl9jaGFuZ2VfeGRwX2ZkKzB4MWY0LzB4MjMwCj4g
ICAgZG9fc2V0bGluaysweDQ1Zi8weGYzMAo+ICAgID8gaXJxX3dvcmtfaW50ZXJydXB0KzB4YS8w
eDIwCj4gICAgPyBfX25sYV92YWxpZGF0ZV9wYXJzZSsweDEyZC8weDFhMAo+ICAgIHJ0bmxfc2V0
bGluaysweGI1LzB4MTIwCj4gICAgcnRuZXRsaW5rX3Jjdl9tc2crMHgyYjEvMHgzNjAKPiAgICA/
IHNvY2tfaGFzX3Blcm0rMHg4MC8weGEwCj4gICAgPyBydG5sX2NhbGNpdC5pc3JhLjQyKzB4MTIw
LzB4MTIwCj4gICAgbmV0bGlua19yY3Zfc2tiKzB4NGMvMHgxMjAKPiAgICBuZXRsaW5rX3VuaWNh
c3QrMHgxOTYvMHgyMzAKPiAgICBuZXRsaW5rX3NlbmRtc2crMHgyMDQvMHgzZDAKPiAgICBzb2Nr
X3NlbmRtc2crMHg0Yy8weDUwCj4gICAgX19zeXNfc2VuZHRvKzB4ZWUvMHgxNjAKPiAgICA/IGhh
bmRsZV9tbV9mYXVsdCsweGMxLzB4MWUwCj4gICAgPyBzeXNjYWxsX3RyYWNlX2VudGVyKzB4MWZi
LzB4MmMwCj4gICAgPyBfX3N5c19zZXRzb2Nrb3B0KzB4ZDYvMHgxZDAKPiAgICBfX3g2NF9zeXNf
c2VuZHRvKzB4MjQvMHgzMAo+ICAgIGRvX3N5c2NhbGxfNjQrMHg1Yi8weDFhMAo+ICAgIGVudHJ5
X1NZU0NBTExfNjRfYWZ0ZXJfaHdmcmFtZSsweDY1LzB4Y2EKPiAgICBSSVA6IDAwMzM6MHg3ZjM1
MzVkOTk3ODEKPiAKPiBGaXggdGhpcyBieSByZW1vdmluZyByZXNldCBhbmQgcmVidWlsZCBmcm9t
IGk0MGVfeGRwX3NldHVwCj4gYW5kIHJlcGxhY2UgaXQgYnkgaW50ZXJmYWNlIGRvd24sIHJlY29u
ZmlndXJlIHF1ZXVlcyBhbmQKPiBpbnRlcmZhY2UgdXAuIFRoaXMgd2F5IGlmIGFueSBzdGVwIGZh
aWxzIHRoZSBpbnRlcmZhY2UKPiB3aWxsIHJlbWFpbiBpbiBhIGNvcnJlY3Qgc3RhdGUuCgpIb3cg
bXVjaCBsb25nZXIgZG9lcyB0aGlzIHRha2U/CgpDYW4geW91IGdpdmUgYSBzaW1wbGUgWERQIHRv
IHJlcHJvZHVjZSB0aGlzPwoKPiBGaXhlczogMGM4NDkzZDkwYjZiICgiaTQwZTogYWRkIFhEUCBz
dXBwb3J0IGZvciBwYXNzIGFuZCBkcm9wIGFjdGlvbnMiKQo+IFRpdGxlOiBpNDBlOiBGaXggY3Jh
c2ggd2hlbiByZWJ1aWxkIGZhaWxlZCBpbiBpNDBlX3hkcF9zZXR1cAo+IENoYW5nZS10eXBlOiBE
ZWZlY3RSZXNvbHV0aW9uCgpUaGUgdHdvIHRhZ3MgYWJvdmUgYXJlIG5vdCB1c2VmdWwgZm9yIHRo
ZSB1cHN0cmVhbSBMaW51eCBrZXJuZWwsIHJpZ2h0PwoKPiBTaWduZWQtb2ZmLWJ5OiBTeWx3ZXN0
ZXIgRHppZWR6aXVjaCA8c3lsd2VzdGVyeC5kemllZHppdWNoQGludGVsLmNvbT4KPiBTaWduZWQt
b2ZmLWJ5OiBBbmRyaWkgU3RhaWtvdiA8YW5kcmlpLnN0YWlrb3ZAaW50ZWwuY29tPgo+IC0tLQo+
ICAgZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQwZS9pNDBlX21haW4uYyB8IDE1NSArKysr
KysrKysrKysrKy0tLS0tLQo+ICAgMSBmaWxlIGNoYW5nZWQsIDExMiBpbnNlcnRpb25zKCspLCA0
MyBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvaW50
ZWwvaTQwZS9pNDBlX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ludGVsL2k0MGUvaTQw
ZV9tYWluLmMKPiBpbmRleCA0YjNiNmU1YjYxMmQuLjY4YjM0M2E3Yjc3ZSAxMDA2NDQKPiAtLS0g
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9pbnRlbC9pNDBlL2k0MGVfbWFpbi5jCj4gKysrIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvaW50ZWwvaTQwZS9pNDBlX21haW4uYwo+IEBAIC01MCw2ICs1MCw4
IEBAIHN0YXRpYyBpbnQgaTQwZV92ZWJfZ2V0X2J3X2luZm8oc3RydWN0IGk0MGVfdmViICp2ZWIp
Owo+ICAgc3RhdGljIGludCBpNDBlX2dldF9jYXBhYmlsaXRpZXMoc3RydWN0IGk0MGVfcGYgKnBm
LAo+ICAgCQkJCSBlbnVtIGk0MGVfYWRtaW5fcXVldWVfb3BjIGxpc3RfdHlwZSk7Cj4gICBzdGF0
aWMgYm9vbCBpNDBlX2lzX3RvdGFsX3BvcnRfc2h1dGRvd25fZW5hYmxlZChzdHJ1Y3QgaTQwZV9w
ZiAqcGYpOwo+ICtzdGF0aWMgc3RydWN0IGk0MGVfdnNpICppNDBlX3ZzaV9yZWluaXRfc2V0dXAo
c3RydWN0IGk0MGVfdnNpICp2c2ksCj4gKwkJCQkJICAgICAgYm9vbCBpc194ZHApOwo+ICAgCj4g
ICAvKiBpNDBlX3BjaV90YmwgLSBQQ0kgRGV2aWNlIElEIFRhYmxlCj4gICAgKgo+IEBAIC0zNTYz
LDExICszNTY1LDE3IEBAIHN0YXRpYyBpbnQgaTQwZV9jb25maWd1cmVfcnhfcmluZyhzdHJ1Y3Qg
aTQwZV9yaW5nICpyaW5nKQo+ICAgCS8qIGNsZWFyIHRoZSBjb250ZXh0IHN0cnVjdHVyZSBmaXJz
dCAqLwo+ICAgCW1lbXNldCgmcnhfY3R4LCAwLCBzaXplb2YocnhfY3R4KSk7Cj4gICAKPiAtCWlm
IChyaW5nLT52c2ktPnR5cGUgPT0gSTQwRV9WU0lfTUFJTikKPiAtCQl4ZHBfcnhxX2luZm9fdW5y
ZWdfbWVtX21vZGVsKCZyaW5nLT54ZHBfcnhxKTsKPiArCWlmIChyaW5nLT52c2ktPnR5cGUgPT0g
STQwRV9WU0lfTUFJTikgewo+ICsJCWlmICgheGRwX3J4cV9pbmZvX2lzX3JlZygmcmluZy0+eGRw
X3J4cSkpCj4gKwkJCXhkcF9yeHFfaW5mb19yZWcoJnJpbmctPnhkcF9yeHEsIHJpbmctPm5ldGRl
diwKPiArCQkJCQkgcmluZy0+cXVldWVfaW5kZXgsCj4gKwkJCQkJIHJpbmctPnFfdmVjdG9yLT5u
YXBpLm5hcGlfaWQpOwo+ICsJfQo+ICAgCj4gICAJcmluZy0+eHNrX3Bvb2wgPSBpNDBlX3hza19w
b29sKHJpbmcpOwo+ICAgCWlmIChyaW5nLT54c2tfcG9vbCkgewo+ICsJCXhkcF9yeHFfaW5mb191
bnJlZ19tZW1fbW9kZWwoJnJpbmctPnhkcF9yeHEpOwo+ICsKPiAgIAkJcmluZy0+cnhfYnVmX2xl
biA9Cj4gICAJCSAgeHNrX3Bvb2xfZ2V0X3J4X2ZyYW1lX3NpemUocmluZy0+eHNrX3Bvb2wpOwo+
ICAgCQkvKiBGb3IgQUZfWERQIFpDLCB3ZSBkaXNhbGxvdyBwYWNrZXRzIHRvIHNwYW4gb24KPiBA
QCAtMTMyNjksNiArMTMyNzcsNDIgQEAgc3RhdGljIG5ldGRldl9mZWF0dXJlc190IGk0MGVfZmVh
dHVyZXNfY2hlY2soc3RydWN0IHNrX2J1ZmYgKnNrYiwKPiAgIAlyZXR1cm4gZmVhdHVyZXMgJiB+
KE5FVElGX0ZfQ1NVTV9NQVNLIHwgTkVUSUZfRl9HU09fTUFTSyk7Cj4gICB9Cj4gICAKPiArLyoq
Cj4gKyAqIGk0MGVfdnNpX2Fzc2lnbl9icGZfcHJvZyAtIHNldCBvciBjbGVhciBicGYgcHJvZyBw
b2ludGVyIG9uIFZTSQo+ICsgKiBAdnNpOiBWU0kgdG8gY2hhbmdlZAo+ICsgKiBAcHJvZzogWERQ
IHByb2dyYW0KPiArICoqLwo+ICtzdGF0aWMgc3RydWN0IGJwZl9wcm9nICppNDBlX3ZzaV9hc3Np
Z25fYnBmX3Byb2coc3RydWN0IGk0MGVfdnNpICp2c2ksCj4gKwkJCQkJCSBzdHJ1Y3QgYnBmX3By
b2cgKnByb2cpCj4gK3sKPiArCXN0cnVjdCBicGZfcHJvZyAqb2xkX3Byb2c7Cj4gKwlpbnQgaTsK
ClBsZWFzZSBjaGVjaywgaWYgYHVuc2lnbmVkIGludGAgY2FuIGJlIHVzZWQgZm9yIGxvb3AgdmFy
aWFibGVzLiAoWW91IGNhbiAKY2hlY2sgd2l0aCBgc2NyaXB0cy9ibG9hdC1vLW1ldGVyYC4KCgpL
aW5kIHJlZ2FyZHMsCgpQYXVsCgoKPiArCj4gKwlvbGRfcHJvZyA9IHhjaGcoJnZzaS0+eGRwX3By
b2csIHByb2cpOwo+ICsKPiArCWZvciAoaSA9IDA7IGkgPCB2c2ktPm51bV9xdWV1ZV9wYWlyczsg
aSsrKQo+ICsJCVdSSVRFX09OQ0UodnNpLT5yeF9yaW5nc1tpXS0+eGRwX3Byb2csIHZzaS0+eGRw
X3Byb2cpOwo+ICsKPiArCWlmIChvbGRfcHJvZykKPiArCQlicGZfcHJvZ19wdXQob2xkX3Byb2cp
Owo+ICsKPiArCXJldHVybiBvbGRfcHJvZzsKPiArfQo+ICsKPiArLyoqCj4gKyAqIGk0MGVfdnNp
X3J4X25hcGlfc2NoZWR1bGUgLSBTY2hlZHVsZSBuYXBpIG9uIFJYIHF1ZXVlcyBmcm9tIFZTSQo+
ICsgKiBAdnNpOiBWU0kgdG8gc2NoZWR1bGUgbmFwaSBvbgo+ICsgKi8KPiArc3RhdGljIHZvaWQg
aTQwZV92c2lfcnhfbmFwaV9zY2hlZHVsZShzdHJ1Y3QgaTQwZV92c2kgKnZzaSkKPiArewo+ICsJ
aW50IGk7Cj4gKwo+ICsJZm9yIChpID0gMDsgaSA8IHZzaS0+bnVtX3F1ZXVlX3BhaXJzOyBpKysp
Cj4gKwkJaWYgKHZzaS0+eGRwX3JpbmdzW2ldLT54c2tfcG9vbCkKPiArCQkJKHZvaWQpaTQwZV94
c2tfd2FrZXVwKHZzaS0+bmV0ZGV2LCBpLAo+ICsJCQkJCSAgICAgIFhEUF9XQUtFVVBfUlgpOwo+
ICt9Cj4gKwo+ICAgLyoqCj4gICAgKiBpNDBlX3hkcF9zZXR1cCAtIGFkZC9yZW1vdmUgYW4gWERQ
IHByb2dyYW0KPiAgICAqIEB2c2k6IFZTSSB0byBjaGFuZ2VkCj4gQEAgLTEzMjc5LDEwICsxMzMy
MywxMSBAQCBzdGF0aWMgaW50IGk0MGVfeGRwX3NldHVwKHN0cnVjdCBpNDBlX3ZzaSAqdnNpLCBz
dHJ1Y3QgYnBmX3Byb2cgKnByb2csCj4gICAJCQkgIHN0cnVjdCBuZXRsaW5rX2V4dF9hY2sgKmV4
dGFjaykKPiAgIHsKPiAgIAlpbnQgZnJhbWVfc2l6ZSA9IHZzaS0+bmV0ZGV2LT5tdHUgKyBFVEhf
SExFTiArIEVUSF9GQ1NfTEVOICsgVkxBTl9ITEVOOwo+ICsJYm9vbCBpc194ZHBfZW5hYmxlZCA9
IGk0MGVfZW5hYmxlZF94ZHBfdnNpKHZzaSk7Cj4gKwlib29sIGlmX3J1bm5pbmcgPSBuZXRpZl9y
dW5uaW5nKHZzaS0+bmV0ZGV2KTsKPiAgIAlzdHJ1Y3QgaTQwZV9wZiAqcGYgPSB2c2ktPmJhY2s7
Cj4gICAJc3RydWN0IGJwZl9wcm9nICpvbGRfcHJvZzsKPiAtCWJvb2wgbmVlZF9yZXNldDsKPiAt
CWludCBpOwo+ICsJaW50IHJldCA9IDA7Cj4gICAKPiAgIAkvKiBEb24ndCBhbGxvdyBmcmFtZXMg
dGhhdCBzcGFuIG92ZXIgbXVsdGlwbGUgYnVmZmVycyAqLwo+ICAgCWlmIChmcmFtZV9zaXplID4g
aTQwZV9jYWxjdWxhdGVfdnNpX3J4X2J1Zl9sZW4odnNpKSkgewo+IEBAIC0xMzI5MCw0OSArMTMz
MzUsNjkgQEAgc3RhdGljIGludCBpNDBlX3hkcF9zZXR1cChzdHJ1Y3QgaTQwZV92c2kgKnZzaSwg
c3RydWN0IGJwZl9wcm9nICpwcm9nLAo+ICAgCQlyZXR1cm4gLUVJTlZBTDsKPiAgIAl9Cj4gICAK
PiAtCS8qIFdoZW4gdHVybmluZyBYRFAgb24tPm9mZi9vZmYtPm9uIHdlIHJlc2V0IGFuZCByZWJ1
aWxkIHRoZSByaW5ncy4gKi8KPiAtCW5lZWRfcmVzZXQgPSAoaTQwZV9lbmFibGVkX3hkcF92c2ko
dnNpKSAhPSAhIXByb2cpOwo+IC0KPiAtCWlmIChuZWVkX3Jlc2V0KQo+IC0JCWk0MGVfcHJlcF9m
b3JfcmVzZXQocGYpOwo+IC0KPiAgIAkvKiBWU0kgc2hhbGwgYmUgZGVsZXRlZCBpbiBhIG1vbWVu
dCwganVzdCByZXR1cm4gRUlOVkFMICovCj4gICAJaWYgKHRlc3RfYml0KF9fSTQwRV9JTl9SRU1P
VkUsIHBmLT5zdGF0ZSkpCj4gICAJCXJldHVybiAtRUlOVkFMOwo+ICAgCj4gLQlvbGRfcHJvZyA9
IHhjaGcoJnZzaS0+eGRwX3Byb2csIHByb2cpOwo+ICsJaWYgKGlmX3J1bm5pbmcgJiYgIXRlc3Rf
YW5kX3NldF9iaXQoX19JNDBFX1ZTSV9ET1dOLCB2c2ktPnN0YXRlKSkKPiArCQlpNDBlX2Rvd24o
dnNpKTsKPiAgIAo+IC0JaWYgKG5lZWRfcmVzZXQpIHsKPiAtCQlpZiAoIXByb2cpCj4gLQkJCS8q
IFdhaXQgdW50aWwgbmRvX3hza193YWtldXAgY29tcGxldGVzLiAqLwo+IC0JCQlzeW5jaHJvbml6
ZV9yY3UoKTsKPiAtCQlpNDBlX3Jlc2V0X2FuZF9yZWJ1aWxkKHBmLCB0cnVlLCB0cnVlKTsKPiAr
CW9sZF9wcm9nID0gaTQwZV92c2lfYXNzaWduX2JwZl9wcm9nKHZzaSwgcHJvZyk7Cj4gKwo+ICsJ
dnNpID0gaTQwZV92c2lfcmVpbml0X3NldHVwKHZzaSwgdHJ1ZSk7Cj4gKwo+ICsJaWYgKCF2c2kp
IHsKPiArCQlOTF9TRVRfRVJSX01TR19NT0QoZXh0YWNrLCAiRmFpbGVkIHRvIHJlaW5pdGlhbGl6
ZSBWU0kgZHVyaW5nIFhEUCBzZXR1cCIpOwo+ICsJCWdvdG8gZXJyX3ZzaV9zZXR1cDsKPiAgIAl9
Cj4gICAKPiAtCWlmICghaTQwZV9lbmFibGVkX3hkcF92c2kodnNpKSAmJiBwcm9nKSB7Cj4gLQkJ
aWYgKGk0MGVfcmVhbGxvY19yeF9iaV96Yyh2c2ksIHRydWUpKQo+IC0JCQlyZXR1cm4gLUVOT01F
TTsKPiAtCX0gZWxzZSBpZiAoaTQwZV9lbmFibGVkX3hkcF92c2kodnNpKSAmJiAhcHJvZykgewo+
IC0JCWlmIChpNDBlX3JlYWxsb2NfcnhfYmlfemModnNpLCBmYWxzZSkpCj4gLQkJCXJldHVybiAt
RU5PTUVNOwo+ICsJLyogYWxsb2NhdGUgZGVzY3JpcHRvcnMgKi8KPiArCXJldCA9IGk0MGVfdnNp
X3NldHVwX3R4X3Jlc291cmNlcyh2c2kpOwo+ICsJaWYgKHJldCkgewo+ICsJCU5MX1NFVF9FUlJf
TVNHX01PRChleHRhY2ssICJGYWlsZWQgdG8gY29uZmlndXJlIFRYIHJlc291cmNlcyBkdXJpbmcg
WERQIHNldHVwIik7Cj4gKwkJZ290byBlcnJfc2V0dXBfdHg7Cj4gKwl9Cj4gKwlyZXQgPSBpNDBl
X3ZzaV9zZXR1cF9yeF9yZXNvdXJjZXModnNpKTsKPiArCWlmIChyZXQpIHsKPiArCQlOTF9TRVRf
RVJSX01TR19NT0QoZXh0YWNrLCAiRmFpbGVkIHRvIGNvbmZpZ3VyZSBSWCByZXNvdXJjZXMgZHVy
aW5nIFhEUCBzZXR1cCIpOwo+ICsJCWdvdG8gZXJyX3NldHVwX3J4Owo+ICAgCX0KPiAgIAo+IC0J
Zm9yIChpID0gMDsgaSA8IHZzaS0+bnVtX3F1ZXVlX3BhaXJzOyBpKyspCj4gLQkJV1JJVEVfT05D
RSh2c2ktPnJ4X3JpbmdzW2ldLT54ZHBfcHJvZywgdnNpLT54ZHBfcHJvZyk7Cj4gKwlpZiAoIWlz
X3hkcF9lbmFibGVkICYmIHByb2cpCj4gKwkJcmV0ID0gaTQwZV9yZWFsbG9jX3J4X2JpX3pjKHZz
aSwgdHJ1ZSk7Cj4gKwllbHNlIGlmIChpc194ZHBfZW5hYmxlZCAmJiAhcHJvZykKPiArCQlyZXQg
PSBpNDBlX3JlYWxsb2NfcnhfYmlfemModnNpLCBmYWxzZSk7Cj4gICAKPiAtCWlmIChvbGRfcHJv
ZykKPiAtCQlicGZfcHJvZ19wdXQob2xkX3Byb2cpOwo+ICsJaWYgKHJldCkgewo+ICsJCU5MX1NF
VF9FUlJfTVNHX01PRChleHRhY2ssICJGYWlsZWQgdG8gcmVhbGxvY2F0ZSBSWCByZXNvdXJjZXMg
ZHVyaW5nIFhEUCBzZXR1cCIpOwo+ICsJCWdvdG8gZXJyX3JlYWxsb2M7Cj4gKwl9Cj4gICAKPiAt
CS8qIEtpY2sgc3RhcnQgdGhlIE5BUEkgY29udGV4dCBpZiB0aGVyZSBpcyBhbiBBRl9YRFAgc29j
a2V0IG9wZW4KPiAtCSAqIG9uIHRoYXQgcXVldWUgaWQuIFRoaXMgc28gdGhhdCByZWNlaXZpbmcg
d2lsbCBzdGFydC4KPiAtCSAqLwo+IC0JaWYgKG5lZWRfcmVzZXQgJiYgcHJvZykKPiAtCQlmb3Ig
KGkgPSAwOyBpIDwgdnNpLT5udW1fcXVldWVfcGFpcnM7IGkrKykKPiAtCQkJaWYgKHZzaS0+eGRw
X3JpbmdzW2ldLT54c2tfcG9vbCkKPiAtCQkJCSh2b2lkKWk0MGVfeHNrX3dha2V1cCh2c2ktPm5l
dGRldiwgaSwKPiAtCQkJCQkJICAgICAgWERQX1dBS0VVUF9SWCk7Cj4gKwlpZiAoaWZfcnVubmlu
ZykKPiArCQlyZXQgPSBpNDBlX3VwKHZzaSk7Cj4gICAKPiAtCXJldHVybiAwOwo+ICsJaWYgKHJl
dCkgewo+ICsJCU5MX1NFVF9FUlJfTVNHX01PRChleHRhY2ssICJGYWlsZWQgdG8gb3BlbiBWU0kg
ZHVyaW5nIFhEUCBzZXR1cCIpOwo+ICsJCWdvdG8gZXJyX3JlYWxsb2M7Cj4gKwl9IGVsc2UgaWYg
KHByb2cpIHsKPiArCQkvKiBLaWNrIHN0YXJ0IHRoZSBOQVBJIGNvbnRleHQgaWYgdGhlcmUgaXMg
YW4gQUZfWERQIHNvY2tldCBvcGVuCj4gKwkJICogb24gdGhhdCBxdWV1ZSBpZC4gVGhpcyBzbyB0
aGF0IHJlY2VpdmluZyB3aWxsIHN0YXJ0Lgo+ICsJCSAqLwo+ICsJCWk0MGVfdnNpX3J4X25hcGlf
c2NoZWR1bGUodnNpKTsKPiArCX0KPiArCj4gKwlyZXR1cm4gcmV0Owo+ICsKPiArZXJyX3NldHVw
X3J4Ogo+ICsJaTQwZV92c2lfZnJlZV9yeF9yZXNvdXJjZXModnNpKTsKPiArZXJyX3NldHVwX3R4
Ogo+ICsJaTQwZV92c2lfZnJlZV90eF9yZXNvdXJjZXModnNpKTsKPiArZXJyX3ZzaV9zZXR1cDoK
PiArCWlmICh2c2kgPT0gcGYtPnZzaVtwZi0+bGFuX3ZzaV0pCj4gKwkJaTQwZV9kb19yZXNldChw
ZiwgSTQwRV9QRl9SRVNFVF9GTEFHLCB0cnVlKTsKPiArZXJyX3JlYWxsb2M6Cj4gKwlpNDBlX3Zz
aV9hc3NpZ25fYnBmX3Byb2codnNpLCBvbGRfcHJvZyk7Cj4gKwlyZXR1cm4gcmV0Owo+ICAgfQo+
ICAgCj4gICAvKioKPiBAQCAtMTQyNzQsMTMgKzE0MzM5LDE0IEBAIHN0YXRpYyBpbnQgaTQwZV92
c2lfc2V0dXBfdmVjdG9ycyhzdHJ1Y3QgaTQwZV92c2kgKnZzaSkKPiAgIC8qKgo+ICAgICogaTQw
ZV92c2lfcmVpbml0X3NldHVwIC0gcmV0dXJuIGFuZCByZWFsbG9jYXRlIHJlc291cmNlcyBmb3Ig
YSBWU0kKPiAgICAqIEB2c2k6IHBvaW50ZXIgdG8gdGhlIHZzaS4KPiArICogQGlzX3hkcDogZmxh
ZyBpbmRpY2F0aW5nIGlmIHRoaXMgaXMgcmVpbml0IGR1cmluZyBYRFAgc2V0dXAKPiAgICAqCj4g
ICAgKiBUaGlzIHJlLWFsbG9jYXRlcyBhIHZzaSdzIHF1ZXVlIHJlc291cmNlcy4KPiAgICAqCj4g
ICAgKiBSZXR1cm5zIHBvaW50ZXIgdG8gdGhlIHN1Y2Nlc3NmdWxseSBhbGxvY2F0ZWQgYW5kIGNv
bmZpZ3VyZWQgVlNJIHN3IHN0cnVjdAo+ICAgICogb24gc3VjY2Vzcywgb3RoZXJ3aXNlIHJldHVy
bnMgTlVMTCBvbiBmYWlsdXJlLgo+ICAgICoqLwo+IC1zdGF0aWMgc3RydWN0IGk0MGVfdnNpICpp
NDBlX3ZzaV9yZWluaXRfc2V0dXAoc3RydWN0IGk0MGVfdnNpICp2c2kpCj4gK3N0YXRpYyBzdHJ1
Y3QgaTQwZV92c2kgKmk0MGVfdnNpX3JlaW5pdF9zZXR1cChzdHJ1Y3QgaTQwZV92c2kgKnZzaSwg
Ym9vbCBpc194ZHApCj4gICB7Cj4gICAJdTE2IGFsbG9jX3F1ZXVlX3BhaXJzOwo+ICAgCXN0cnVj
dCBpNDBlX3BmICpwZjsKPiBAQCAtMTQzMTYsMTIgKzE0MzgyLDE0IEBAIHN0YXRpYyBzdHJ1Y3Qg
aTQwZV92c2kgKmk0MGVfdnNpX3JlaW5pdF9zZXR1cChzdHJ1Y3QgaTQwZV92c2kgKnZzaSkKPiAg
IAkvKiBVcGRhdGUgdGhlIEZXIHZpZXcgb2YgdGhlIFZTSS4gRm9yY2UgYSByZXNldCBvZiBUQyBh
bmQgcXVldWUKPiAgIAkgKiBsYXlvdXQgY29uZmlndXJhdGlvbnMuCj4gICAJICovCj4gLQllbmFi
bGVkX3RjID0gcGYtPnZzaVtwZi0+bGFuX3ZzaV0tPnRjX2NvbmZpZy5lbmFibGVkX3RjOwo+IC0J
cGYtPnZzaVtwZi0+bGFuX3ZzaV0tPnRjX2NvbmZpZy5lbmFibGVkX3RjID0gMDsKPiAtCXBmLT52
c2lbcGYtPmxhbl92c2ldLT5zZWlkID0gcGYtPm1haW5fdnNpX3NlaWQ7Cj4gLQlpNDBlX3ZzaV9j
b25maWdfdGMocGYtPnZzaVtwZi0+bGFuX3ZzaV0sIGVuYWJsZWRfdGMpOwo+IC0JaWYgKHZzaS0+
dHlwZSA9PSBJNDBFX1ZTSV9NQUlOKQo+IC0JCWk0MGVfcm1fZGVmYXVsdF9tYWNfZmlsdGVyKHZz
aSwgcGYtPmh3Lm1hYy5wZXJtX2FkZHIpOwo+ICsJaWYgKCFpc194ZHApIHsKPiArCQllbmFibGVk
X3RjID0gcGYtPnZzaVtwZi0+bGFuX3ZzaV0tPnRjX2NvbmZpZy5lbmFibGVkX3RjOwo+ICsJCXBm
LT52c2lbcGYtPmxhbl92c2ldLT50Y19jb25maWcuZW5hYmxlZF90YyA9IDA7Cj4gKwkJcGYtPnZz
aVtwZi0+bGFuX3ZzaV0tPnNlaWQgPSBwZi0+bWFpbl92c2lfc2VpZDsKPiArCQlpNDBlX3ZzaV9j
b25maWdfdGMocGYtPnZzaVtwZi0+bGFuX3ZzaV0sIGVuYWJsZWRfdGMpOwo+ICsJCWlmICh2c2kt
PnR5cGUgPT0gSTQwRV9WU0lfTUFJTikKPiArCQkJaTQwZV9ybV9kZWZhdWx0X21hY19maWx0ZXIo
dnNpLCBwZi0+aHcubWFjLnBlcm1fYWRkcik7Cj4gKwl9Cj4gICAKPiAgIAkvKiBhc3NpZ24gaXQg
c29tZSBxdWV1ZXMgKi8KPiAgIAlyZXQgPSBpNDBlX2FsbG9jX3JpbmdzKHZzaSk7Cj4gQEAgLTE1
MDg3LDcgKzE1MTU1LDggQEAgc3RhdGljIGludCBpNDBlX3NldHVwX3BmX3N3aXRjaChzdHJ1Y3Qg
aTQwZV9wZiAqcGYsIGJvb2wgcmVpbml0LCBib29sIGxvY2tfYWNxdWkKPiAgIAkJaWYgKHBmLT5s
YW5fdnNpID09IEk0MEVfTk9fVlNJKQo+ICAgCQkJdnNpID0gaTQwZV92c2lfc2V0dXAocGYsIEk0
MEVfVlNJX01BSU4sIHVwbGlua19zZWlkLCAwKTsKPiAgIAkJZWxzZSBpZiAocmVpbml0KQo+IC0J
CQl2c2kgPSBpNDBlX3ZzaV9yZWluaXRfc2V0dXAocGYtPnZzaVtwZi0+bGFuX3ZzaV0pOwo+ICsJ
CQl2c2kgPSBpNDBlX3ZzaV9yZWluaXRfc2V0dXAocGYtPnZzaVtwZi0+bGFuX3ZzaV0sCj4gKwkJ
CQkJCSAgICBmYWxzZSk7Cj4gICAJCWlmICghdnNpKSB7Cj4gICAJCQlkZXZfaW5mbygmcGYtPnBk
ZXYtPmRldiwgInNldHVwIG9mIE1BSU4gVlNJIGZhaWxlZFxuIik7Cj4gICAJCQlpNDBlX2Nsb3Vk
X2ZpbHRlcl9leGl0KHBmKTsKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KSW50ZWwtd2lyZWQtbGFuIG1haWxpbmcgbGlzdApJbnRlbC13aXJlZC1sYW5Ab3N1
b3NsLm9yZwpodHRwczovL2xpc3RzLm9zdW9zbC5vcmcvbWFpbG1hbi9saXN0aW5mby9pbnRlbC13
aXJlZC1sYW4K
